(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function yl(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Ce={},os=[],fn=()=>{},Jd=()=>!1,aa=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),vl=t=>t.startsWith("onUpdate:"),Et=Object.assign,El=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},uy=Object.prototype.hasOwnProperty,be=(t,e)=>uy.call(t,e),ce=Array.isArray,as=t=>Mi(t)==="[object Map]",ca=t=>Mi(t)==="[object Set]",Th=t=>Mi(t)==="[object Date]",he=t=>typeof t=="function",Qe=t=>typeof t=="string",En=t=>typeof t=="symbol",Pe=t=>t!==null&&typeof t=="object",Xd=t=>(Pe(t)||he(t))&&he(t.then)&&he(t.catch),Yd=Object.prototype.toString,Mi=t=>Yd.call(t),hy=t=>Mi(t).slice(8,-1),Zd=t=>Mi(t)==="[object Object]",Tl=t=>Qe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ci=yl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),la=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},fy=/-\w/g,Gt=la(t=>t.replace(fy,e=>e.slice(1).toUpperCase())),dy=/\B([A-Z])/g,$r=la(t=>t.replace(dy,"-$1").toLowerCase()),ua=la(t=>t.charAt(0).toUpperCase()+t.slice(1)),ec=la(t=>t?`on${ua(t)}`:""),ir=(t,e)=>!Object.is(t,e),_o=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},ep=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},ha=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Ih;const fa=()=>Ih||(Ih=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Il(t){if(ce(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Qe(r)?_y(r):Il(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Qe(t)||Pe(t))return t}const py=/;(?![^(]*\))/g,gy=/:([^]+)/,my=/\/\*[^]*?\*\//g;function _y(t){const e={};return t.replace(my,"").split(py).forEach(n=>{if(n){const r=n.split(gy);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function ln(t){let e="";if(Qe(t))e=t;else if(ce(t))for(let n=0;n<t.length;n++){const r=ln(t[n]);r&&(e+=r+" ")}else if(Pe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const yy="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",vy=yl(yy);function tp(t){return!!t||t===""}function Ey(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=da(t[r],e[r]);return n}function da(t,e){if(t===e)return!0;let n=Th(t),r=Th(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=En(t),r=En(e),n||r)return t===e;if(n=ce(t),r=ce(e),n||r)return n&&r?Ey(t,e):!1;if(n=Pe(t),r=Pe(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const c=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(c&&!l||!c&&l||!da(t[o],e[o]))return!1}}return String(t)===String(e)}function Ty(t,e){return t.findIndex(n=>da(n,e))}const np=t=>!!(t&&t.__v_isRef===!0),Ze=t=>Qe(t)?t:t==null?"":ce(t)||Pe(t)&&(t.toString===Yd||!he(t.toString))?np(t)?Ze(t.value):JSON.stringify(t,rp,2):String(t),rp=(t,e)=>np(e)?rp(t,e.value):as(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[tc(r,i)+" =>"]=s,n),{})}:ca(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>tc(n))}:En(e)?tc(e):Pe(e)&&!ce(e)&&!Zd(e)?String(e):e,tc=(t,e="")=>{var n;return En(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let kt;class Iy{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=kt,!e&&kt&&(this.index=(kt.scopes||(kt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=kt;try{return kt=this,e()}finally{kt=n}}}on(){++this._on===1&&(this.prevScope=kt,kt=this)}off(){this._on>0&&--this._on===0&&(kt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function wy(){return kt}let Ne;const nc=new WeakSet;class sp{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,kt&&kt.active&&kt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,nc.has(this)&&(nc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||op(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,wh(this),ap(this);const e=Ne,n=Xt;Ne=this,Xt=!0;try{return this.fn()}finally{cp(this),Ne=e,Xt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)bl(e);this.deps=this.depsTail=void 0,wh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?nc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Cc(this)&&this.run()}get dirty(){return Cc(this)}}let ip=0,li,ui;function op(t,e=!1){if(t.flags|=8,e){t.next=ui,ui=t;return}t.next=li,li=t}function wl(){ip++}function Al(){if(--ip>0)return;if(ui){let e=ui;for(ui=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;li;){let e=li;for(li=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function ap(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cp(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),bl(r),Ay(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Cc(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(lp(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function lp(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===wi)||(t.globalVersion=wi,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Cc(t))))return;t.flags|=2;const e=t.dep,n=Ne,r=Xt;Ne=t,Xt=!0;try{ap(t);const s=t.fn(t._value);(e.version===0||ir(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Ne=n,Xt=r,cp(t),t.flags&=-3}}function bl(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)bl(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Ay(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Xt=!0;const up=[];function On(){up.push(Xt),Xt=!1}function Dn(){const t=up.pop();Xt=t===void 0?!0:t}function wh(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ne;Ne=void 0;try{e()}finally{Ne=n}}}let wi=0;class by{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Rl{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ne||!Xt||Ne===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ne)n=this.activeLink=new by(Ne,this),Ne.deps?(n.prevDep=Ne.depsTail,Ne.depsTail.nextDep=n,Ne.depsTail=n):Ne.deps=Ne.depsTail=n,hp(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ne.depsTail,n.nextDep=void 0,Ne.depsTail.nextDep=n,Ne.depsTail=n,Ne.deps===n&&(Ne.deps=r)}return n}trigger(e){this.version++,wi++,this.notify(e)}notify(e){wl();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Al()}}}function hp(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)hp(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Pc=new WeakMap,Or=Symbol(""),Nc=Symbol(""),Ai=Symbol("");function gt(t,e,n){if(Xt&&Ne){let r=Pc.get(t);r||Pc.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Rl),s.map=r,s.key=n),s.track()}}function Cn(t,e,n,r,s,i){const o=Pc.get(t);if(!o){wi++;return}const c=l=>{l&&l.trigger()};if(wl(),e==="clear")o.forEach(c);else{const l=ce(t),h=l&&Tl(n);if(l&&n==="length"){const f=Number(r);o.forEach((p,m)=>{(m==="length"||m===Ai||!En(m)&&m>=f)&&c(p)})}else switch((n!==void 0||o.has(void 0))&&c(o.get(n)),h&&c(o.get(Ai)),e){case"add":l?h&&c(o.get("length")):(c(o.get(Or)),as(t)&&c(o.get(Nc)));break;case"delete":l||(c(o.get(Or)),as(t)&&c(o.get(Nc)));break;case"set":as(t)&&c(o.get(Or));break}}Al()}function Jr(t){const e=Ae(t);return e===t?e:(gt(e,"iterate",Ai),zt(t)?e:e.map(Yt))}function pa(t){return gt(t=Ae(t),"iterate",Ai),t}function Wn(t,e){return Vn(t)?Dr(t)?vs(Yt(e)):vs(e):Yt(e)}const Ry={__proto__:null,[Symbol.iterator](){return rc(this,Symbol.iterator,t=>Wn(this,t))},concat(...t){return Jr(this).concat(...t.map(e=>ce(e)?Jr(e):e))},entries(){return rc(this,"entries",t=>(t[1]=Wn(this,t[1]),t))},every(t,e){return bn(this,"every",t,e,void 0,arguments)},filter(t,e){return bn(this,"filter",t,e,n=>n.map(r=>Wn(this,r)),arguments)},find(t,e){return bn(this,"find",t,e,n=>Wn(this,n),arguments)},findIndex(t,e){return bn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return bn(this,"findLast",t,e,n=>Wn(this,n),arguments)},findLastIndex(t,e){return bn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return bn(this,"forEach",t,e,void 0,arguments)},includes(...t){return sc(this,"includes",t)},indexOf(...t){return sc(this,"indexOf",t)},join(t){return Jr(this).join(t)},lastIndexOf(...t){return sc(this,"lastIndexOf",t)},map(t,e){return bn(this,"map",t,e,void 0,arguments)},pop(){return Ys(this,"pop")},push(...t){return Ys(this,"push",t)},reduce(t,...e){return Ah(this,"reduce",t,e)},reduceRight(t,...e){return Ah(this,"reduceRight",t,e)},shift(){return Ys(this,"shift")},some(t,e){return bn(this,"some",t,e,void 0,arguments)},splice(...t){return Ys(this,"splice",t)},toReversed(){return Jr(this).toReversed()},toSorted(t){return Jr(this).toSorted(t)},toSpliced(...t){return Jr(this).toSpliced(...t)},unshift(...t){return Ys(this,"unshift",t)},values(){return rc(this,"values",t=>Wn(this,t))}};function rc(t,e,n){const r=pa(t),s=r[e]();return r!==t&&!zt(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const Sy=Array.prototype;function bn(t,e,n,r,s,i){const o=pa(t),c=o!==t&&!zt(t),l=o[e];if(l!==Sy[e]){const p=l.apply(t,i);return c?Yt(p):p}let h=n;o!==t&&(c?h=function(p,m){return n.call(this,Wn(t,p),m,t)}:n.length>2&&(h=function(p,m){return n.call(this,p,m,t)}));const f=l.call(o,h,r);return c&&s?s(f):f}function Ah(t,e,n,r){const s=pa(t);let i=n;return s!==t&&(zt(t)?n.length>3&&(i=function(o,c,l){return n.call(this,o,c,l,t)}):i=function(o,c,l){return n.call(this,o,Wn(t,c),l,t)}),s[e](i,...r)}function sc(t,e,n){const r=Ae(t);gt(r,"iterate",Ai);const s=r[e](...n);return(s===-1||s===!1)&&Pl(n[0])?(n[0]=Ae(n[0]),r[e](...n)):s}function Ys(t,e,n=[]){On(),wl();const r=Ae(t)[e].apply(t,n);return Al(),Dn(),r}const Cy=yl("__proto__,__v_isRef,__isVue"),fp=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(En));function Py(t){En(t)||(t=String(t));const e=Ae(this);return gt(e,"has",t),e.hasOwnProperty(t)}class dp{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Fy:_p:i?mp:gp).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ce(e);if(!s){let l;if(o&&(l=Ry[n]))return l;if(n==="hasOwnProperty")return Py}const c=Reflect.get(e,n,ct(e)?e:r);if((En(n)?fp.has(n):Cy(n))||(s||gt(e,"get",n),i))return c;if(ct(c)){const l=o&&Tl(n)?c:c.value;return s&&Pe(l)?Oc(l):l}return Pe(c)?s?Oc(c):ga(c):c}}class pp extends dp{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];const o=ce(e)&&Tl(n);if(!this._isShallow){const h=Vn(i);if(!zt(r)&&!Vn(r)&&(i=Ae(i),r=Ae(r)),!o&&ct(i)&&!ct(r))return h||(i.value=r),!0}const c=o?Number(n)<e.length:be(e,n),l=Reflect.set(e,n,r,ct(e)?e:s);return e===Ae(s)&&(c?ir(r,i)&&Cn(e,"set",n,r):Cn(e,"add",n,r)),l}deleteProperty(e,n){const r=be(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Cn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!En(n)||!fp.has(n))&&gt(e,"has",n),r}ownKeys(e){return gt(e,"iterate",ce(e)?"length":Or),Reflect.ownKeys(e)}}class Ny extends dp{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const ky=new pp,Oy=new Ny,Dy=new pp(!0);const kc=t=>t,so=t=>Reflect.getPrototypeOf(t);function Vy(t,e,n){return function(...r){const s=this.__v_raw,i=Ae(s),o=as(i),c=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,h=s[t](...r),f=n?kc:e?vs:Yt;return!e&&gt(i,"iterate",l?Nc:Or),{next(){const{value:p,done:m}=h.next();return m?{value:p,done:m}:{value:c?[f(p[0]),f(p[1])]:f(p),done:m}},[Symbol.iterator](){return this}}}}function io(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function xy(t,e){const n={get(s){const i=this.__v_raw,o=Ae(i),c=Ae(s);t||(ir(s,c)&&gt(o,"get",s),gt(o,"get",c));const{has:l}=so(o),h=e?kc:t?vs:Yt;if(l.call(o,s))return h(i.get(s));if(l.call(o,c))return h(i.get(c));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&gt(Ae(s),"iterate",Or),s.size},has(s){const i=this.__v_raw,o=Ae(i),c=Ae(s);return t||(ir(s,c)&&gt(o,"has",s),gt(o,"has",c)),s===c?i.has(s):i.has(s)||i.has(c)},forEach(s,i){const o=this,c=o.__v_raw,l=Ae(c),h=e?kc:t?vs:Yt;return!t&&gt(l,"iterate",Or),c.forEach((f,p)=>s.call(i,h(f),h(p),o))}};return Et(n,t?{add:io("add"),set:io("set"),delete:io("delete"),clear:io("clear")}:{add(s){!e&&!zt(s)&&!Vn(s)&&(s=Ae(s));const i=Ae(this);return so(i).has.call(i,s)||(i.add(s),Cn(i,"add",s,s)),this},set(s,i){!e&&!zt(i)&&!Vn(i)&&(i=Ae(i));const o=Ae(this),{has:c,get:l}=so(o);let h=c.call(o,s);h||(s=Ae(s),h=c.call(o,s));const f=l.call(o,s);return o.set(s,i),h?ir(i,f)&&Cn(o,"set",s,i):Cn(o,"add",s,i),this},delete(s){const i=Ae(this),{has:o,get:c}=so(i);let l=o.call(i,s);l||(s=Ae(s),l=o.call(i,s)),c&&c.call(i,s);const h=i.delete(s);return l&&Cn(i,"delete",s,void 0),h},clear(){const s=Ae(this),i=s.size!==0,o=s.clear();return i&&Cn(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Vy(s,t,e)}),n}function Sl(t,e){const n=xy(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(be(n,s)&&s in r?n:r,s,i)}const My={get:Sl(!1,!1)},Ly={get:Sl(!1,!0)},Uy={get:Sl(!0,!1)};const gp=new WeakMap,mp=new WeakMap,_p=new WeakMap,Fy=new WeakMap;function By(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function jy(t){return t.__v_skip||!Object.isExtensible(t)?0:By(hy(t))}function ga(t){return Vn(t)?t:Cl(t,!1,ky,My,gp)}function yp(t){return Cl(t,!1,Dy,Ly,mp)}function Oc(t){return Cl(t,!0,Oy,Uy,_p)}function Cl(t,e,n,r,s){if(!Pe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=jy(t);if(i===0)return t;const o=s.get(t);if(o)return o;const c=new Proxy(t,i===2?r:n);return s.set(t,c),c}function Dr(t){return Vn(t)?Dr(t.__v_raw):!!(t&&t.__v_isReactive)}function Vn(t){return!!(t&&t.__v_isReadonly)}function zt(t){return!!(t&&t.__v_isShallow)}function Pl(t){return t?!!t.__v_raw:!1}function Ae(t){const e=t&&t.__v_raw;return e?Ae(e):t}function $y(t){return!be(t,"__v_skip")&&Object.isExtensible(t)&&ep(t,"__v_skip",!0),t}const Yt=t=>Pe(t)?ga(t):t,vs=t=>Pe(t)?Oc(t):t;function ct(t){return t?t.__v_isRef===!0:!1}function rt(t){return vp(t,!1)}function qy(t){return vp(t,!0)}function vp(t,e){return ct(t)?t:new Hy(t,e)}class Hy{constructor(e,n){this.dep=new Rl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ae(e),this._value=n?e:Yt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||zt(e)||Vn(e);e=r?e:Ae(e),ir(e,n)&&(this._rawValue=e,this._value=r?e:Yt(e),this.dep.trigger())}}function Ye(t){return ct(t)?t.value:t}const zy={get:(t,e,n)=>e==="__v_raw"?t:Ye(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return ct(s)&&!ct(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Ep(t){return Dr(t)?t:new Proxy(t,zy)}class Gy{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Rl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=wi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ne!==this)return op(this,!0),!0}get value(){const e=this.dep.track();return lp(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Ky(t,e,n=!1){let r,s;return he(t)?r=t:(r=t.get,s=t.set),new Gy(r,s,n)}const oo={},Vo=new WeakMap;let Sr;function Wy(t,e=!1,n=Sr){if(n){let r=Vo.get(n);r||Vo.set(n,r=[]),r.push(t)}}function Qy(t,e,n=Ce){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:c,call:l}=n,h=z=>s?z:zt(z)||s===!1||s===0?Pn(z,1):Pn(z);let f,p,m,v,P=!1,k=!1;if(ct(t)?(p=()=>t.value,P=zt(t)):Dr(t)?(p=()=>h(t),P=!0):ce(t)?(k=!0,P=t.some(z=>Dr(z)||zt(z)),p=()=>t.map(z=>{if(ct(z))return z.value;if(Dr(z))return h(z);if(he(z))return l?l(z,2):z()})):he(t)?e?p=l?()=>l(t,2):t:p=()=>{if(m){On();try{m()}finally{Dn()}}const z=Sr;Sr=f;try{return l?l(t,3,[v]):t(v)}finally{Sr=z}}:p=fn,e&&s){const z=p,ie=s===!0?1/0:s;p=()=>Pn(z(),ie)}const O=wy(),j=()=>{f.stop(),O&&O.active&&El(O.effects,f)};if(i&&e){const z=e;e=(...ie)=>{z(...ie),j()}}let F=k?new Array(t.length).fill(oo):oo;const q=z=>{if(!(!(f.flags&1)||!f.dirty&&!z))if(e){const ie=f.run();if(s||P||(k?ie.some((oe,y)=>ir(oe,F[y])):ir(ie,F))){m&&m();const oe=Sr;Sr=f;try{const y=[ie,F===oo?void 0:k&&F[0]===oo?[]:F,v];F=ie,l?l(e,3,y):e(...y)}finally{Sr=oe}}}else f.run()};return c&&c(q),f=new sp(p),f.scheduler=o?()=>o(q,!1):q,v=z=>Wy(z,!1,f),m=f.onStop=()=>{const z=Vo.get(f);if(z){if(l)l(z,4);else for(const ie of z)ie();Vo.delete(f)}},e?r?q(!0):F=f.run():o?o(q.bind(null,!0),!0):f.run(),j.pause=f.pause.bind(f),j.resume=f.resume.bind(f),j.stop=j,j}function Pn(t,e=1/0,n){if(e<=0||!Pe(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,ct(t))Pn(t.value,e,n);else if(ce(t))for(let r=0;r<t.length;r++)Pn(t[r],e,n);else if(ca(t)||as(t))t.forEach(r=>{Pn(r,e,n)});else if(Zd(t)){for(const r in t)Pn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Pn(t[r],e,n)}return t}function Li(t,e,n,r){try{return r?t(...r):t()}catch(s){ma(s,e,n)}}function Tn(t,e,n,r){if(he(t)){const s=Li(t,e,n,r);return s&&Xd(s)&&s.catch(i=>{ma(i,e,n)}),s}if(ce(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Tn(t[i],e,n,r));return s}}function ma(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ce;if(e){let c=e.parent;const l=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const f=c.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](t,l,h)===!1)return}c=c.parent}if(i){On(),Li(i,null,10,[t,l,h]),Dn();return}}Jy(t,n,s,r,o)}function Jy(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const Rt=[];let on=-1;const cs=[];let Qn=null,Xr=0;const Tp=Promise.resolve();let xo=null;function Nl(t){const e=xo||Tp;return t?e.then(this?t.bind(this):t):e}function Xy(t){let e=on+1,n=Rt.length;for(;e<n;){const r=e+n>>>1,s=Rt[r],i=bi(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function kl(t){if(!(t.flags&1)){const e=bi(t),n=Rt[Rt.length-1];!n||!(t.flags&2)&&e>=bi(n)?Rt.push(t):Rt.splice(Xy(e),0,t),t.flags|=1,Ip()}}function Ip(){xo||(xo=Tp.then(Ap))}function Yy(t){ce(t)?cs.push(...t):Qn&&t.id===-1?Qn.splice(Xr+1,0,t):t.flags&1||(cs.push(t),t.flags|=1),Ip()}function bh(t,e,n=on+1){for(;n<Rt.length;n++){const r=Rt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Rt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function wp(t){if(cs.length){const e=[...new Set(cs)].sort((n,r)=>bi(n)-bi(r));if(cs.length=0,Qn){Qn.push(...e);return}for(Qn=e,Xr=0;Xr<Qn.length;Xr++){const n=Qn[Xr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Qn=null,Xr=0}}const bi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Ap(t){try{for(on=0;on<Rt.length;on++){const e=Rt[on];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Li(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;on<Rt.length;on++){const e=Rt[on];e&&(e.flags&=-2)}on=-1,Rt.length=0,wp(),xo=null,(Rt.length||cs.length)&&Ap()}}let Bt=null,bp=null;function Mo(t){const e=Bt;return Bt=t,bp=t&&t.type.__scopeId||null,e}function rs(t,e=Bt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Fo(-1);const i=Mo(e);let o;try{o=t(...s)}finally{Mo(i),r._d&&Fo(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function ao(t,e){if(Bt===null)return t;const n=Ea(Bt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,c,l=Ce]=e[s];i&&(he(i)&&(i={mounted:i,updated:i}),i.deep&&Pn(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:c,modifiers:l}))}return t}function br(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const c=s[o];i&&(c.oldValue=i[o].value);let l=c.dir[r];l&&(On(),Tn(l,n,8,[t.el,c,t,e]),Dn())}}const Zy=Symbol("_vte"),ev=t=>t.__isTeleport,tv=Symbol("_leaveCb");function Ol(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ol(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Rp(t,e){return he(t)?Et({name:t.name},e,{setup:t}):t}function Sp(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Lo=new WeakMap;function hi(t,e,n,r,s=!1){if(ce(t)){t.forEach((P,k)=>hi(P,e&&(ce(e)?e[k]:e),n,r,s));return}if(fi(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&hi(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?Ea(r.component):r.el,o=s?null:i,{i:c,r:l}=t,h=e&&e.r,f=c.refs===Ce?c.refs={}:c.refs,p=c.setupState,m=Ae(p),v=p===Ce?Jd:P=>be(m,P);if(h!=null&&h!==l){if(Rh(e),Qe(h))f[h]=null,v(h)&&(p[h]=null);else if(ct(h)){h.value=null;const P=e;P.k&&(f[P.k]=null)}}if(he(l))Li(l,c,12,[o,f]);else{const P=Qe(l),k=ct(l);if(P||k){const O=()=>{if(t.f){const j=P?v(l)?p[l]:f[l]:l.value;if(s)ce(j)&&El(j,i);else if(ce(j))j.includes(i)||j.push(i);else if(P)f[l]=[i],v(l)&&(p[l]=f[l]);else{const F=[i];l.value=F,t.k&&(f[t.k]=F)}}else P?(f[l]=o,v(l)&&(p[l]=o)):k&&(l.value=o,t.k&&(f[t.k]=o))};if(o){const j=()=>{O(),Lo.delete(t)};j.id=-1,Lo.set(t,j),Ft(j,n)}else Rh(t),O()}}}function Rh(t){const e=Lo.get(t);e&&(e.flags|=8,Lo.delete(t))}fa().requestIdleCallback;fa().cancelIdleCallback;const fi=t=>!!t.type.__asyncLoader,Cp=t=>t.type.__isKeepAlive;function nv(t,e){Pp(t,"a",e)}function rv(t,e){Pp(t,"da",e)}function Pp(t,e,n=_t){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(_a(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Cp(s.parent.vnode)&&sv(r,e,n,s),s=s.parent}}function sv(t,e,n,r){const s=_a(e,t,r,!0);kp(()=>{El(r[e],s)},n)}function _a(t,e,n=_t,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{On();const c=Ui(n),l=Tn(e,n,t,o);return c(),Dn(),l});return r?s.unshift(i):s.push(i),i}}const Fn=t=>(e,n=_t)=>{(!Si||t==="sp")&&_a(t,(...r)=>e(...r),n)},iv=Fn("bm"),Np=Fn("m"),ov=Fn("bu"),av=Fn("u"),cv=Fn("bum"),kp=Fn("um"),lv=Fn("sp"),uv=Fn("rtg"),hv=Fn("rtc");function fv(t,e=_t){_a("ec",t,e)}const dv="components";function Dl(t,e){return gv(dv,t,!0,e)||t}const pv=Symbol.for("v-ndc");function gv(t,e,n=!0,r=!1){const s=Bt||_t;if(s){const i=s.type;{const c=iE(i,!1);if(c&&(c===e||c===Gt(e)||c===ua(Gt(e))))return i}const o=Sh(s[t]||i[t],e)||Sh(s.appContext[t],e);return!o&&r?i:o}}function Sh(t,e){return t&&(t[e]||t[Gt(e)]||t[ua(Gt(e))])}function ss(t,e,n,r){let s;const i=n,o=ce(t);if(o||Qe(t)){const c=o&&Dr(t);let l=!1,h=!1;c&&(l=!zt(t),h=Vn(t),t=pa(t)),s=new Array(t.length);for(let f=0,p=t.length;f<p;f++)s[f]=e(l?h?vs(Yt(t[f])):Yt(t[f]):t[f],f,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let c=0;c<t;c++)s[c]=e(c+1,c,void 0,i)}else if(Pe(t))if(t[Symbol.iterator])s=Array.from(t,(c,l)=>e(c,l,void 0,i));else{const c=Object.keys(t);s=new Array(c.length);for(let l=0,h=c.length;l<h;l++){const f=c[l];s[l]=e(t[f],f,l,i)}}else s=[];return s}const Dc=t=>t?Xp(t)?Ea(t):Dc(t.parent):null,di=Et(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Dc(t.parent),$root:t=>Dc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Dp(t),$forceUpdate:t=>t.f||(t.f=()=>{kl(t.update)}),$nextTick:t=>t.n||(t.n=Nl.bind(t.proxy)),$watch:t=>Rv.bind(t)}),ic=(t,e)=>t!==Ce&&!t.__isScriptSetup&&be(t,e),mv={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:c,appContext:l}=t;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(ic(r,e))return o[e]=1,r[e];if(s!==Ce&&be(s,e))return o[e]=2,s[e];if(be(i,e))return o[e]=3,i[e];if(n!==Ce&&be(n,e))return o[e]=4,n[e];Vc&&(o[e]=0)}}const h=di[e];let f,p;if(h)return e==="$attrs"&&gt(t.attrs,"get",""),h(t);if((f=c.__cssModules)&&(f=f[e]))return f;if(n!==Ce&&be(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,be(p,e))return p[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return ic(s,e)?(s[e]=n,!0):r!==Ce&&be(r,e)?(r[e]=n,!0):be(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,props:i,type:o}},c){let l;return!!(n[c]||t!==Ce&&c[0]!=="$"&&be(t,c)||ic(e,c)||be(i,c)||be(r,c)||be(di,c)||be(s.config.globalProperties,c)||(l=o.__cssModules)&&l[c])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:be(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Ch(t){return ce(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Vc=!0;function _v(t){const e=Dp(t),n=t.proxy,r=t.ctx;Vc=!1,e.beforeCreate&&Ph(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:c,provide:l,inject:h,created:f,beforeMount:p,mounted:m,beforeUpdate:v,updated:P,activated:k,deactivated:O,beforeDestroy:j,beforeUnmount:F,destroyed:q,unmounted:z,render:ie,renderTracked:oe,renderTriggered:y,errorCaptured:_,serverPrefetch:I,expose:b,inheritAttrs:A,components:S,directives:T,filters:He}=e;if(h&&yv(h,r,null),o)for(const Ie in o){const me=o[Ie];he(me)&&(r[Ie]=me.bind(n))}if(s){const Ie=s.call(n,n);Pe(Ie)&&(t.data=ga(Ie))}if(Vc=!0,i)for(const Ie in i){const me=i[Ie],Nt=he(me)?me.bind(n,n):he(me.get)?me.get.bind(n,n):fn,tn=!he(me)&&he(me.set)?me.set.bind(n):fn,xt=Vt({get:Nt,set:tn});Object.defineProperty(r,Ie,{enumerable:!0,configurable:!0,get:()=>xt.value,set:it=>xt.value=it})}if(c)for(const Ie in c)Op(c[Ie],r,n,Ie);if(l){const Ie=he(l)?l.call(n):l;Reflect.ownKeys(Ie).forEach(me=>{yo(me,Ie[me])})}f&&Ph(f,t,"c");function ze(Ie,me){ce(me)?me.forEach(Nt=>Ie(Nt.bind(n))):me&&Ie(me.bind(n))}if(ze(iv,p),ze(Np,m),ze(ov,v),ze(av,P),ze(nv,k),ze(rv,O),ze(fv,_),ze(hv,oe),ze(uv,y),ze(cv,F),ze(kp,z),ze(lv,I),ce(b))if(b.length){const Ie=t.exposed||(t.exposed={});b.forEach(me=>{Object.defineProperty(Ie,me,{get:()=>n[me],set:Nt=>n[me]=Nt,enumerable:!0})})}else t.exposed||(t.exposed={});ie&&t.render===fn&&(t.render=ie),A!=null&&(t.inheritAttrs=A),S&&(t.components=S),T&&(t.directives=T),I&&Sp(t)}function yv(t,e,n=fn){ce(t)&&(t=xc(t));for(const r in t){const s=t[r];let i;Pe(s)?"default"in s?i=dn(s.from||r,s.default,!0):i=dn(s.from||r):i=dn(s),ct(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Ph(t,e,n){Tn(ce(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Op(t,e,n,r){let s=r.includes(".")?Mp(n,r):()=>n[r];if(Qe(t)){const i=e[t];he(i)&&vo(s,i)}else if(he(t))vo(s,t.bind(n));else if(Pe(t))if(ce(t))t.forEach(i=>Op(i,e,n,r));else{const i=he(t.handler)?t.handler.bind(n):e[t.handler];he(i)&&vo(s,i,t)}}function Dp(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,c=i.get(e);let l;return c?l=c:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(h=>Uo(l,h,o,!0)),Uo(l,e,o)),Pe(e)&&i.set(e,l),l}function Uo(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Uo(t,i,n,!0),s&&s.forEach(o=>Uo(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const c=vv[o]||n&&n[o];t[o]=c?c(t[o],e[o]):e[o]}return t}const vv={data:Nh,props:kh,emits:kh,methods:ri,computed:ri,beforeCreate:At,created:At,beforeMount:At,mounted:At,beforeUpdate:At,updated:At,beforeDestroy:At,beforeUnmount:At,destroyed:At,unmounted:At,activated:At,deactivated:At,errorCaptured:At,serverPrefetch:At,components:ri,directives:ri,watch:Tv,provide:Nh,inject:Ev};function Nh(t,e){return e?t?function(){return Et(he(t)?t.call(this,this):t,he(e)?e.call(this,this):e)}:e:t}function Ev(t,e){return ri(xc(t),xc(e))}function xc(t){if(ce(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function At(t,e){return t?[...new Set([].concat(t,e))]:e}function ri(t,e){return t?Et(Object.create(null),t,e):e}function kh(t,e){return t?ce(t)&&ce(e)?[...new Set([...t,...e])]:Et(Object.create(null),Ch(t),Ch(e??{})):e}function Tv(t,e){if(!t)return e;if(!e)return t;const n=Et(Object.create(null),t);for(const r in e)n[r]=At(t[r],e[r]);return n}function Vp(){return{app:null,config:{isNativeTag:Jd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Iv=0;function wv(t,e){return function(r,s=null){he(r)||(r=Et({},r)),s!=null&&!Pe(s)&&(s=null);const i=Vp(),o=new WeakSet,c=[];let l=!1;const h=i.app={_uid:Iv++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:aE,get config(){return i.config},set config(f){},use(f,...p){return o.has(f)||(f&&he(f.install)?(o.add(f),f.install(h,...p)):he(f)&&(o.add(f),f(h,...p))),h},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),h},component(f,p){return p?(i.components[f]=p,h):i.components[f]},directive(f,p){return p?(i.directives[f]=p,h):i.directives[f]},mount(f,p,m){if(!l){const v=h._ceVNode||Fe(r,s);return v.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(v,f,m),l=!0,h._container=f,f.__vue_app__=h,Ea(v.component)}},onUnmount(f){c.push(f)},unmount(){l&&(Tn(c,h._instance,16),t(null,h._container),delete h._container.__vue_app__)},provide(f,p){return i.provides[f]=p,h},runWithContext(f){const p=ls;ls=h;try{return f()}finally{ls=p}}};return h}}let ls=null;function yo(t,e){if(_t){let n=_t.provides;const r=_t.parent&&_t.parent.provides;r===n&&(n=_t.provides=Object.create(r)),n[t]=e}}function dn(t,e,n=!1){const r=eE();if(r||ls){let s=ls?ls._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&he(e)?e.call(r&&r.proxy):e}}const Av=Symbol.for("v-scx"),bv=()=>dn(Av);function vo(t,e,n){return xp(t,e,n)}function xp(t,e,n=Ce){const{immediate:r,deep:s,flush:i,once:o}=n,c=Et({},n),l=e&&r||!e&&i!=="post";let h;if(Si){if(i==="sync"){const v=bv();h=v.__watcherHandles||(v.__watcherHandles=[])}else if(!l){const v=()=>{};return v.stop=fn,v.resume=fn,v.pause=fn,v}}const f=_t;c.call=(v,P,k)=>Tn(v,f,P,k);let p=!1;i==="post"?c.scheduler=v=>{Ft(v,f&&f.suspense)}:i!=="sync"&&(p=!0,c.scheduler=(v,P)=>{P?v():kl(v)}),c.augmentJob=v=>{e&&(v.flags|=4),p&&(v.flags|=2,f&&(v.id=f.uid,v.i=f))};const m=Qy(t,e,c);return Si&&(h?h.push(m):l&&m()),m}function Rv(t,e,n){const r=this.proxy,s=Qe(t)?t.includes(".")?Mp(r,t):()=>r[t]:t.bind(r,r);let i;he(e)?i=e:(i=e.handler,n=e);const o=Ui(this),c=xp(s,i.bind(r),n);return o(),c}function Mp(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const Sv=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Gt(e)}Modifiers`]||t[`${$r(e)}Modifiers`];function Cv(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Ce;let s=n;const i=e.startsWith("update:"),o=i&&Sv(r,e.slice(7));o&&(o.trim&&(s=n.map(f=>Qe(f)?f.trim():f)),o.number&&(s=n.map(ha)));let c,l=r[c=ec(e)]||r[c=ec(Gt(e))];!l&&i&&(l=r[c=ec($r(e))]),l&&Tn(l,t,6,s);const h=r[c+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,Tn(h,t,6,s)}}const Pv=new WeakMap;function Lp(t,e,n=!1){const r=n?Pv:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},c=!1;if(!he(t)){const l=h=>{const f=Lp(h,e,!0);f&&(c=!0,Et(o,f))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!c?(Pe(t)&&r.set(t,null),null):(ce(i)?i.forEach(l=>o[l]=null):Et(o,i),Pe(t)&&r.set(t,o),o)}function ya(t,e){return!t||!aa(e)?!1:(e=e.slice(2).replace(/Once$/,""),be(t,e[0].toLowerCase()+e.slice(1))||be(t,$r(e))||be(t,e))}function Oh(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:c,emit:l,render:h,renderCache:f,props:p,data:m,setupState:v,ctx:P,inheritAttrs:k}=t,O=Mo(t);let j,F;try{if(n.shapeFlag&4){const z=s||r,ie=z;j=cn(h.call(ie,z,f,p,v,m,P)),F=c}else{const z=e;j=cn(z.length>1?z(p,{attrs:c,slots:o,emit:l}):z(p,null)),F=e.props?c:Nv(c)}}catch(z){pi.length=0,ma(z,t,1),j=Fe(ur)}let q=j;if(F&&k!==!1){const z=Object.keys(F),{shapeFlag:ie}=q;z.length&&ie&7&&(i&&z.some(vl)&&(F=kv(F,i)),q=Es(q,F,!1,!0))}return n.dirs&&(q=Es(q,null,!1,!0),q.dirs=q.dirs?q.dirs.concat(n.dirs):n.dirs),n.transition&&Ol(q,n.transition),j=q,Mo(O),j}const Nv=t=>{let e;for(const n in t)(n==="class"||n==="style"||aa(n))&&((e||(e={}))[n]=t[n]);return e},kv=(t,e)=>{const n={};for(const r in t)(!vl(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Ov(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:c,patchFlag:l}=e,h=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Dh(r,o,h):!!o;if(l&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const m=f[p];if(o[m]!==r[m]&&!ya(h,m))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:r===o?!1:r?o?Dh(r,o,h):!0:!!o;return!1}function Dh(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!ya(n,i))return!0}return!1}function Dv({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Up={},Fp=()=>Object.create(Up),Bp=t=>Object.getPrototypeOf(t)===Up;function Vv(t,e,n,r=!1){const s={},i=Fp();t.propsDefaults=Object.create(null),jp(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:yp(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function xv(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,c=Ae(s),[l]=t.propsOptions;let h=!1;if((r||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let p=0;p<f.length;p++){let m=f[p];if(ya(t.emitsOptions,m))continue;const v=e[m];if(l)if(be(i,m))v!==i[m]&&(i[m]=v,h=!0);else{const P=Gt(m);s[P]=Mc(l,c,P,v,t,!1)}else v!==i[m]&&(i[m]=v,h=!0)}}}else{jp(t,e,s,i)&&(h=!0);let f;for(const p in c)(!e||!be(e,p)&&((f=$r(p))===p||!be(e,f)))&&(l?n&&(n[p]!==void 0||n[f]!==void 0)&&(s[p]=Mc(l,c,p,void 0,t,!0)):delete s[p]);if(i!==c)for(const p in i)(!e||!be(e,p))&&(delete i[p],h=!0)}h&&Cn(t.attrs,"set","")}function jp(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,c;if(e)for(let l in e){if(ci(l))continue;const h=e[l];let f;s&&be(s,f=Gt(l))?!i||!i.includes(f)?n[f]=h:(c||(c={}))[f]=h:ya(t.emitsOptions,l)||(!(l in r)||h!==r[l])&&(r[l]=h,o=!0)}if(i){const l=Ae(n),h=c||Ce;for(let f=0;f<i.length;f++){const p=i[f];n[p]=Mc(s,l,p,h[p],t,!be(h,p))}}return o}function Mc(t,e,n,r,s,i){const o=t[n];if(o!=null){const c=be(o,"default");if(c&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&he(l)){const{propsDefaults:h}=s;if(n in h)r=h[n];else{const f=Ui(s);r=h[n]=l.call(null,e),f()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!c?r=!1:o[1]&&(r===""||r===$r(n))&&(r=!0))}return r}const Mv=new WeakMap;function $p(t,e,n=!1){const r=n?Mv:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},c=[];let l=!1;if(!he(t)){const f=p=>{l=!0;const[m,v]=$p(p,e,!0);Et(o,m),v&&c.push(...v)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!i&&!l)return Pe(t)&&r.set(t,os),os;if(ce(i))for(let f=0;f<i.length;f++){const p=Gt(i[f]);Vh(p)&&(o[p]=Ce)}else if(i)for(const f in i){const p=Gt(f);if(Vh(p)){const m=i[f],v=o[p]=ce(m)||he(m)?{type:m}:Et({},m),P=v.type;let k=!1,O=!0;if(ce(P))for(let j=0;j<P.length;++j){const F=P[j],q=he(F)&&F.name;if(q==="Boolean"){k=!0;break}else q==="String"&&(O=!1)}else k=he(P)&&P.name==="Boolean";v[0]=k,v[1]=O,(k||be(v,"default"))&&c.push(p)}}const h=[o,c];return Pe(t)&&r.set(t,h),h}function Vh(t){return t[0]!=="$"&&!ci(t)}const Vl=t=>t==="_"||t==="_ctx"||t==="$stable",xl=t=>ce(t)?t.map(cn):[cn(t)],Lv=(t,e,n)=>{if(e._n)return e;const r=rs((...s)=>xl(e(...s)),n);return r._c=!1,r},qp=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Vl(s))continue;const i=t[s];if(he(i))e[s]=Lv(s,i,r);else if(i!=null){const o=xl(i);e[s]=()=>o}}},Hp=(t,e)=>{const n=xl(e);t.slots.default=()=>n},zp=(t,e,n)=>{for(const r in e)(n||!Vl(r))&&(t[r]=e[r])},Uv=(t,e,n)=>{const r=t.slots=Fp();if(t.vnode.shapeFlag&32){const s=e._;s?(zp(r,e,n),n&&ep(r,"_",s,!0)):qp(e,r)}else e&&Hp(t,e)},Fv=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Ce;if(r.shapeFlag&32){const c=e._;c?n&&c===1?i=!1:zp(s,e,n):(i=!e.$stable,qp(e,s)),o=e}else e&&(Hp(t,e),o={default:1});if(i)for(const c in s)!Vl(c)&&o[c]==null&&delete s[c]},Ft=Hv;function Bv(t){return jv(t)}function jv(t,e){const n=fa();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:c,createComment:l,setText:h,setElementText:f,parentNode:p,nextSibling:m,setScopeId:v=fn,insertStaticContent:P}=t,k=(E,w,R,x=null,L=null,D=null,W=void 0,$=null,B=!!w.dynamicChildren)=>{if(E===w)return;E&&!Zs(E,w)&&(x=V(E),it(E,L,D,!0),E=null),w.patchFlag===-2&&(B=!1,w.dynamicChildren=null);const{type:U,ref:ne,shapeFlag:J}=w;switch(U){case va:O(E,w,R,x);break;case ur:j(E,w,R,x);break;case Eo:E==null&&F(w,R,x,W);break;case St:S(E,w,R,x,L,D,W,$,B);break;default:J&1?ie(E,w,R,x,L,D,W,$,B):J&6?T(E,w,R,x,L,D,W,$,B):(J&64||J&128)&&U.process(E,w,R,x,L,D,W,$,B,ee)}ne!=null&&L?hi(ne,E&&E.ref,D,w||E,!w):ne==null&&E&&E.ref!=null&&hi(E.ref,null,D,E,!0)},O=(E,w,R,x)=>{if(E==null)r(w.el=c(w.children),R,x);else{const L=w.el=E.el;w.children!==E.children&&h(L,w.children)}},j=(E,w,R,x)=>{E==null?r(w.el=l(w.children||""),R,x):w.el=E.el},F=(E,w,R,x)=>{[E.el,E.anchor]=P(E.children,w,R,x,E.el,E.anchor)},q=({el:E,anchor:w},R,x)=>{let L;for(;E&&E!==w;)L=m(E),r(E,R,x),E=L;r(w,R,x)},z=({el:E,anchor:w})=>{let R;for(;E&&E!==w;)R=m(E),s(E),E=R;s(w)},ie=(E,w,R,x,L,D,W,$,B)=>{if(w.type==="svg"?W="svg":w.type==="math"&&(W="mathml"),E==null)oe(w,R,x,L,D,W,$,B);else{const U=E.el&&E.el._isVueCE?E.el:null;try{U&&U._beginPatch(),I(E,w,L,D,W,$,B)}finally{U&&U._endPatch()}}},oe=(E,w,R,x,L,D,W,$)=>{let B,U;const{props:ne,shapeFlag:J,transition:te,dirs:re}=E;if(B=E.el=o(E.type,D,ne&&ne.is,ne),J&8?f(B,E.children):J&16&&_(E.children,B,null,x,L,oc(E,D),W,$),re&&br(E,null,x,"created"),y(B,E,E.scopeId,W,x),ne){for(const Re in ne)Re!=="value"&&!ci(Re)&&i(B,Re,null,ne[Re],D,x);"value"in ne&&i(B,"value",null,ne.value,D),(U=ne.onVnodeBeforeMount)&&sn(U,x,E)}re&&br(E,null,x,"beforeMount");const de=$v(L,te);de&&te.beforeEnter(B),r(B,w,R),((U=ne&&ne.onVnodeMounted)||de||re)&&Ft(()=>{U&&sn(U,x,E),de&&te.enter(B),re&&br(E,null,x,"mounted")},L)},y=(E,w,R,x,L)=>{if(R&&v(E,R),x)for(let D=0;D<x.length;D++)v(E,x[D]);if(L){let D=L.subTree;if(w===D||Wp(D.type)&&(D.ssContent===w||D.ssFallback===w)){const W=L.vnode;y(E,W,W.scopeId,W.slotScopeIds,L.parent)}}},_=(E,w,R,x,L,D,W,$,B=0)=>{for(let U=B;U<E.length;U++){const ne=E[U]=$?Jn(E[U]):cn(E[U]);k(null,ne,w,R,x,L,D,W,$)}},I=(E,w,R,x,L,D,W)=>{const $=w.el=E.el;let{patchFlag:B,dynamicChildren:U,dirs:ne}=w;B|=E.patchFlag&16;const J=E.props||Ce,te=w.props||Ce;let re;if(R&&Rr(R,!1),(re=te.onVnodeBeforeUpdate)&&sn(re,R,w,E),ne&&br(w,E,R,"beforeUpdate"),R&&Rr(R,!0),(J.innerHTML&&te.innerHTML==null||J.textContent&&te.textContent==null)&&f($,""),U?b(E.dynamicChildren,U,$,R,x,oc(w,L),D):W||me(E,w,$,null,R,x,oc(w,L),D,!1),B>0){if(B&16)A($,J,te,R,L);else if(B&2&&J.class!==te.class&&i($,"class",null,te.class,L),B&4&&i($,"style",J.style,te.style,L),B&8){const de=w.dynamicProps;for(let Re=0;Re<de.length;Re++){const Ee=de[Re],ht=J[Ee],ft=te[Ee];(ft!==ht||Ee==="value")&&i($,Ee,ht,ft,L,R)}}B&1&&E.children!==w.children&&f($,w.children)}else!W&&U==null&&A($,J,te,R,L);((re=te.onVnodeUpdated)||ne)&&Ft(()=>{re&&sn(re,R,w,E),ne&&br(w,E,R,"updated")},x)},b=(E,w,R,x,L,D,W)=>{for(let $=0;$<w.length;$++){const B=E[$],U=w[$],ne=B.el&&(B.type===St||!Zs(B,U)||B.shapeFlag&198)?p(B.el):R;k(B,U,ne,null,x,L,D,W,!0)}},A=(E,w,R,x,L)=>{if(w!==R){if(w!==Ce)for(const D in w)!ci(D)&&!(D in R)&&i(E,D,w[D],null,L,x);for(const D in R){if(ci(D))continue;const W=R[D],$=w[D];W!==$&&D!=="value"&&i(E,D,$,W,L,x)}"value"in R&&i(E,"value",w.value,R.value,L)}},S=(E,w,R,x,L,D,W,$,B)=>{const U=w.el=E?E.el:c(""),ne=w.anchor=E?E.anchor:c("");let{patchFlag:J,dynamicChildren:te,slotScopeIds:re}=w;re&&($=$?$.concat(re):re),E==null?(r(U,R,x),r(ne,R,x),_(w.children||[],R,ne,L,D,W,$,B)):J>0&&J&64&&te&&E.dynamicChildren?(b(E.dynamicChildren,te,R,L,D,W,$),(w.key!=null||L&&w===L.subTree)&&Gp(E,w,!0)):me(E,w,R,ne,L,D,W,$,B)},T=(E,w,R,x,L,D,W,$,B)=>{w.slotScopeIds=$,E==null?w.shapeFlag&512?L.ctx.activate(w,R,x,W,B):He(w,R,x,L,D,W,B):Pt(E,w,B)},He=(E,w,R,x,L,D,W)=>{const $=E.component=Zv(E,x,L);if(Cp(E)&&($.ctx.renderer=ee),tE($,!1,W),$.asyncDep){if(L&&L.registerDep($,ze,W),!E.el){const B=$.subTree=Fe(ur);j(null,B,w,R),E.placeholder=B.el}}else ze($,E,w,R,L,D,W)},Pt=(E,w,R)=>{const x=w.component=E.component;if(Ov(E,w,R))if(x.asyncDep&&!x.asyncResolved){Ie(x,w,R);return}else x.next=w,x.update();else w.el=E.el,x.vnode=w},ze=(E,w,R,x,L,D,W)=>{const $=()=>{if(E.isMounted){let{next:J,bu:te,u:re,parent:de,vnode:Re}=E;{const Lt=Kp(E);if(Lt){J&&(J.el=Re.el,Ie(E,J,W)),Lt.asyncDep.then(()=>{E.isUnmounted||$()});return}}let Ee=J,ht;Rr(E,!1),J?(J.el=Re.el,Ie(E,J,W)):J=Re,te&&_o(te),(ht=J.props&&J.props.onVnodeBeforeUpdate)&&sn(ht,de,J,Re),Rr(E,!0);const ft=Oh(E),Mt=E.subTree;E.subTree=ft,k(Mt,ft,p(Mt.el),V(Mt),E,L,D),J.el=ft.el,Ee===null&&Dv(E,ft.el),re&&Ft(re,L),(ht=J.props&&J.props.onVnodeUpdated)&&Ft(()=>sn(ht,de,J,Re),L)}else{let J;const{el:te,props:re}=w,{bm:de,m:Re,parent:Ee,root:ht,type:ft}=E,Mt=fi(w);Rr(E,!1),de&&_o(de),!Mt&&(J=re&&re.onVnodeBeforeMount)&&sn(J,Ee,w),Rr(E,!0);{ht.ce&&ht.ce._def.shadowRoot!==!1&&ht.ce._injectChildStyle(ft);const Lt=E.subTree=Oh(E);k(null,Lt,R,x,E,L,D),w.el=Lt.el}if(Re&&Ft(Re,L),!Mt&&(J=re&&re.onVnodeMounted)){const Lt=w;Ft(()=>sn(J,Ee,Lt),L)}(w.shapeFlag&256||Ee&&fi(Ee.vnode)&&Ee.vnode.shapeFlag&256)&&E.a&&Ft(E.a,L),E.isMounted=!0,w=R=x=null}};E.scope.on();const B=E.effect=new sp($);E.scope.off();const U=E.update=B.run.bind(B),ne=E.job=B.runIfDirty.bind(B);ne.i=E,ne.id=E.uid,B.scheduler=()=>kl(ne),Rr(E,!0),U()},Ie=(E,w,R)=>{w.component=E;const x=E.vnode.props;E.vnode=w,E.next=null,xv(E,w.props,x,R),Fv(E,w.children,R),On(),bh(E),Dn()},me=(E,w,R,x,L,D,W,$,B=!1)=>{const U=E&&E.children,ne=E?E.shapeFlag:0,J=w.children,{patchFlag:te,shapeFlag:re}=w;if(te>0){if(te&128){tn(U,J,R,x,L,D,W,$,B);return}else if(te&256){Nt(U,J,R,x,L,D,W,$,B);return}}re&8?(ne&16&&ut(U,L,D),J!==U&&f(R,J)):ne&16?re&16?tn(U,J,R,x,L,D,W,$,B):ut(U,L,D,!0):(ne&8&&f(R,""),re&16&&_(J,R,x,L,D,W,$,B))},Nt=(E,w,R,x,L,D,W,$,B)=>{E=E||os,w=w||os;const U=E.length,ne=w.length,J=Math.min(U,ne);let te;for(te=0;te<J;te++){const re=w[te]=B?Jn(w[te]):cn(w[te]);k(E[te],re,R,null,L,D,W,$,B)}U>ne?ut(E,L,D,!0,!1,J):_(w,R,x,L,D,W,$,B,J)},tn=(E,w,R,x,L,D,W,$,B)=>{let U=0;const ne=w.length;let J=E.length-1,te=ne-1;for(;U<=J&&U<=te;){const re=E[U],de=w[U]=B?Jn(w[U]):cn(w[U]);if(Zs(re,de))k(re,de,R,null,L,D,W,$,B);else break;U++}for(;U<=J&&U<=te;){const re=E[J],de=w[te]=B?Jn(w[te]):cn(w[te]);if(Zs(re,de))k(re,de,R,null,L,D,W,$,B);else break;J--,te--}if(U>J){if(U<=te){const re=te+1,de=re<ne?w[re].el:x;for(;U<=te;)k(null,w[U]=B?Jn(w[U]):cn(w[U]),R,de,L,D,W,$,B),U++}}else if(U>te)for(;U<=J;)it(E[U],L,D,!0),U++;else{const re=U,de=U,Re=new Map;for(U=de;U<=te;U++){const ot=w[U]=B?Jn(w[U]):cn(w[U]);ot.key!=null&&Re.set(ot.key,U)}let Ee,ht=0;const ft=te-de+1;let Mt=!1,Lt=0;const Qt=new Array(ft);for(U=0;U<ft;U++)Qt[U]=0;for(U=re;U<=J;U++){const ot=E[U];if(ht>=ft){it(ot,L,D,!0);continue}let tt;if(ot.key!=null)tt=Re.get(ot.key);else for(Ee=de;Ee<=te;Ee++)if(Qt[Ee-de]===0&&Zs(ot,w[Ee])){tt=Ee;break}tt===void 0?it(ot,L,D,!0):(Qt[tt-de]=U+1,tt>=Lt?Lt=tt:Mt=!0,k(ot,w[tt],R,null,L,D,W,$,B),ht++)}const Gr=Mt?qv(Qt):os;for(Ee=Gr.length-1,U=ft-1;U>=0;U--){const ot=de+U,tt=w[ot],Ls=w[ot+1],Er=ot+1<ne?Ls.el||Ls.placeholder:x;Qt[U]===0?k(null,tt,R,Er,L,D,W,$,B):Mt&&(Ee<0||U!==Gr[Ee]?xt(tt,R,Er,2):Ee--)}}},xt=(E,w,R,x,L=null)=>{const{el:D,type:W,transition:$,children:B,shapeFlag:U}=E;if(U&6){xt(E.component.subTree,w,R,x);return}if(U&128){E.suspense.move(w,R,x);return}if(U&64){W.move(E,w,R,ee);return}if(W===St){r(D,w,R);for(let J=0;J<B.length;J++)xt(B[J],w,R,x);r(E.anchor,w,R);return}if(W===Eo){q(E,w,R);return}if(x!==2&&U&1&&$)if(x===0)$.beforeEnter(D),r(D,w,R),Ft(()=>$.enter(D),L);else{const{leave:J,delayLeave:te,afterLeave:re}=$,de=()=>{E.ctx.isUnmounted?s(D):r(D,w,R)},Re=()=>{D._isLeaving&&D[tv](!0),J(D,()=>{de(),re&&re()})};te?te(D,de,Re):Re()}else r(D,w,R)},it=(E,w,R,x=!1,L=!1)=>{const{type:D,props:W,ref:$,children:B,dynamicChildren:U,shapeFlag:ne,patchFlag:J,dirs:te,cacheIndex:re}=E;if(J===-2&&(L=!1),$!=null&&(On(),hi($,null,R,E,!0),Dn()),re!=null&&(w.renderCache[re]=void 0),ne&256){w.ctx.deactivate(E);return}const de=ne&1&&te,Re=!fi(E);let Ee;if(Re&&(Ee=W&&W.onVnodeBeforeUnmount)&&sn(Ee,w,E),ne&6)Wt(E.component,R,x);else{if(ne&128){E.suspense.unmount(R,x);return}de&&br(E,null,w,"beforeUnmount"),ne&64?E.type.remove(E,w,R,ee,x):U&&!U.hasOnce&&(D!==St||J>0&&J&64)?ut(U,w,R,!1,!0):(D===St&&J&384||!L&&ne&16)&&ut(B,w,R),x&&An(E)}(Re&&(Ee=W&&W.onVnodeUnmounted)||de)&&Ft(()=>{Ee&&sn(Ee,w,E),de&&br(E,null,w,"unmounted")},R)},An=E=>{const{type:w,el:R,anchor:x,transition:L}=E;if(w===St){Kt(R,x);return}if(w===Eo){z(E);return}const D=()=>{s(R),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(E.shapeFlag&1&&L&&!L.persisted){const{leave:W,delayLeave:$}=L,B=()=>W(R,D);$?$(E.el,D,B):B()}else D()},Kt=(E,w)=>{let R;for(;E!==w;)R=m(E),s(E),E=R;s(w)},Wt=(E,w,R)=>{const{bum:x,scope:L,job:D,subTree:W,um:$,m:B,a:U}=E;xh(B),xh(U),x&&_o(x),L.stop(),D&&(D.flags|=8,it(W,E,w,R)),$&&Ft($,w),Ft(()=>{E.isUnmounted=!0},w)},ut=(E,w,R,x=!1,L=!1,D=0)=>{for(let W=D;W<E.length;W++)it(E[W],w,R,x,L)},V=E=>{if(E.shapeFlag&6)return V(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const w=m(E.anchor||E.el),R=w&&w[Zy];return R?m(R):w};let X=!1;const Q=(E,w,R)=>{E==null?w._vnode&&it(w._vnode,null,null,!0):k(w._vnode||null,E,w,null,null,null,R),w._vnode=E,X||(X=!0,bh(),wp(),X=!1)},ee={p:k,um:it,m:xt,r:An,mt:He,mc:_,pc:me,pbc:b,n:V,o:t};return{render:Q,hydrate:void 0,createApp:wv(Q)}}function oc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Rr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function $v(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Gp(t,e,n=!1){const r=t.children,s=e.children;if(ce(r)&&ce(s))for(let i=0;i<r.length;i++){const o=r[i];let c=s[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[i]=Jn(s[i]),c.el=o.el),!n&&c.patchFlag!==-2&&Gp(o,c)),c.type===va&&c.patchFlag!==-1&&(c.el=o.el),c.type===ur&&!c.el&&(c.el=o.el)}}function qv(t){const e=t.slice(),n=[0];let r,s,i,o,c;const l=t.length;for(r=0;r<l;r++){const h=t[r];if(h!==0){if(s=n[n.length-1],t[s]<h){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)c=i+o>>1,t[n[c]]<h?i=c+1:o=c;h<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Kp(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Kp(e)}function xh(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Wp=t=>t.__isSuspense;function Hv(t,e){e&&e.pendingBranch?ce(t)?e.effects.push(...t):e.effects.push(t):Yy(t)}const St=Symbol.for("v-fgt"),va=Symbol.for("v-txt"),ur=Symbol.for("v-cmt"),Eo=Symbol.for("v-stc"),pi=[];let jt=null;function ke(t=!1){pi.push(jt=t?null:[])}function zv(){pi.pop(),jt=pi[pi.length-1]||null}let Ri=1;function Fo(t,e=!1){Ri+=t,t<0&&jt&&e&&(jt.hasOnce=!0)}function Qp(t){return t.dynamicChildren=Ri>0?jt||os:null,zv(),Ri>0&&jt&&jt.push(t),t}function De(t,e,n,r,s,i){return Qp(K(t,e,n,r,s,i,!0))}function Gv(t,e,n,r,s){return Qp(Fe(t,e,n,r,s,!0))}function Bo(t){return t?t.__v_isVNode===!0:!1}function Zs(t,e){return t.type===e.type&&t.key===e.key}const Jp=({key:t})=>t??null,To=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Qe(t)||ct(t)||he(t)?{i:Bt,r:t,k:e,f:!!n}:t:null);function K(t,e=null,n=null,r=0,s=null,i=t===St?0:1,o=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Jp(e),ref:e&&To(e),scopeId:bp,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Bt};return c?(Ml(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=Qe(n)?8:16),Ri>0&&!o&&jt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&jt.push(l),l}const Fe=Kv;function Kv(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===pv)&&(t=ur),Bo(t)){const c=Es(t,e,!0);return n&&Ml(c,n),Ri>0&&!i&&jt&&(c.shapeFlag&6?jt[jt.indexOf(t)]=c:jt.push(c)),c.patchFlag=-2,c}if(oE(t)&&(t=t.__vccOpts),e){e=Wv(e);let{class:c,style:l}=e;c&&!Qe(c)&&(e.class=ln(c)),Pe(l)&&(Pl(l)&&!ce(l)&&(l=Et({},l)),e.style=Il(l))}const o=Qe(t)?1:Wp(t)?128:ev(t)?64:Pe(t)?4:he(t)?2:0;return K(t,e,n,r,s,o,i,!0)}function Wv(t){return t?Pl(t)||Bp(t)?Et({},t):t:null}function Es(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:c,transition:l}=t,h=e?Jv(s||{},e):s,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:h,key:h&&Jp(h),ref:e&&e.ref?n&&i?ce(i)?i.concat(To(e)):[i,To(e)]:To(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==St?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Es(t.ssContent),ssFallback:t.ssFallback&&Es(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Ol(f,l.clone(f)),f}function Dt(t=" ",e=0){return Fe(va,null,t,e)}function Qv(t,e){const n=Fe(Eo,null,t);return n.staticCount=e,n}function Io(t="",e=!1){return e?(ke(),Gv(ur,null,t)):Fe(ur,null,t)}function cn(t){return t==null||typeof t=="boolean"?Fe(ur):ce(t)?Fe(St,null,t.slice()):Bo(t)?Jn(t):Fe(va,null,String(t))}function Jn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Es(t)}function Ml(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ce(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Ml(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!Bp(e)?e._ctx=Bt:s===3&&Bt&&(Bt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else he(e)?(e={default:e,_ctx:Bt},n=32):(e=String(e),r&64?(n=16,e=[Dt(e)]):n=8);t.children=e,t.shapeFlag|=n}function Jv(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=ln([e.class,r.class]));else if(s==="style")e.style=Il([e.style,r.style]);else if(aa(s)){const i=e[s],o=r[s];o&&i!==o&&!(ce(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function sn(t,e,n,r=null){Tn(t,e,7,[n,r])}const Xv=Vp();let Yv=0;function Zv(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||Xv,i={uid:Yv++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Iy(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$p(r,s),emitsOptions:Lp(r,s),emit:null,emitted:null,propsDefaults:Ce,inheritAttrs:r.inheritAttrs,ctx:Ce,data:Ce,props:Ce,attrs:Ce,slots:Ce,refs:Ce,setupState:Ce,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Cv.bind(null,i),t.ce&&t.ce(i),i}let _t=null;const eE=()=>_t||Bt;let jo,Lc;{const t=fa(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};jo=e("__VUE_INSTANCE_SETTERS__",n=>_t=n),Lc=e("__VUE_SSR_SETTERS__",n=>Si=n)}const Ui=t=>{const e=_t;return jo(t),t.scope.on(),()=>{t.scope.off(),jo(e)}},Mh=()=>{_t&&_t.scope.off(),jo(null)};function Xp(t){return t.vnode.shapeFlag&4}let Si=!1;function tE(t,e=!1,n=!1){e&&Lc(e);const{props:r,children:s}=t.vnode,i=Xp(t);Vv(t,r,i,e),Uv(t,s,n||e);const o=i?nE(t,e):void 0;return e&&Lc(!1),o}function nE(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,mv);const{setup:r}=n;if(r){On();const s=t.setupContext=r.length>1?sE(t):null,i=Ui(t),o=Li(r,t,0,[t.props,s]),c=Xd(o);if(Dn(),i(),(c||t.sp)&&!fi(t)&&Sp(t),c){if(o.then(Mh,Mh),e)return o.then(l=>{Lh(t,l)}).catch(l=>{ma(l,t,0)});t.asyncDep=o}else Lh(t,o)}else Yp(t)}function Lh(t,e,n){he(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Pe(e)&&(t.setupState=Ep(e)),Yp(t)}function Yp(t,e,n){const r=t.type;t.render||(t.render=r.render||fn);{const s=Ui(t);On();try{_v(t)}finally{Dn(),s()}}}const rE={get(t,e){return gt(t,"get",""),t[e]}};function sE(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,rE),slots:t.slots,emit:t.emit,expose:e}}function Ea(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Ep($y(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in di)return di[n](t)},has(e,n){return n in e||n in di}})):t.proxy}function iE(t,e=!0){return he(t)?t.displayName||t.name:t.name||e&&t.__name}function oE(t){return he(t)&&"__vccOpts"in t}const Vt=(t,e)=>Ky(t,e,Si);function Zp(t,e,n){try{Fo(-1);const r=arguments.length;return r===2?Pe(e)&&!ce(e)?Bo(e)?Fe(t,null,[e]):Fe(t,e):Fe(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Bo(n)&&(n=[n]),Fe(t,e,n))}finally{Fo(1)}}const aE="3.5.25";let Uc;const Uh=typeof window<"u"&&window.trustedTypes;if(Uh)try{Uc=Uh.createPolicy("vue",{createHTML:t=>t})}catch{}const eg=Uc?t=>Uc.createHTML(t):t=>t,cE="http://www.w3.org/2000/svg",lE="http://www.w3.org/1998/Math/MathML",Sn=typeof document<"u"?document:null,Fh=Sn&&Sn.createElement("template"),uE={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Sn.createElementNS(cE,t):e==="mathml"?Sn.createElementNS(lE,t):n?Sn.createElement(t,{is:n}):Sn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Sn.createTextNode(t),createComment:t=>Sn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Sn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Fh.innerHTML=eg(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const c=Fh.content;if(r==="svg"||r==="mathml"){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}e.insertBefore(c,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},hE=Symbol("_vtc");function fE(t,e,n){const r=t[hE];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const $o=Symbol("_vod"),tg=Symbol("_vsh"),dE={name:"show",beforeMount(t,{value:e},{transition:n}){t[$o]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):ei(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),ei(t,!0),r.enter(t)):r.leave(t,()=>{ei(t,!1)}):ei(t,e))},beforeUnmount(t,{value:e}){ei(t,e)}};function ei(t,e){t.style.display=e?t[$o]:"none",t[tg]=!e}const pE=Symbol(""),gE=/(?:^|;)\s*display\s*:/;function mE(t,e,n){const r=t.style,s=Qe(n);let i=!1;if(n&&!s){if(e)if(Qe(e))for(const o of e.split(";")){const c=o.slice(0,o.indexOf(":")).trim();n[c]==null&&wo(r,c,"")}else for(const o in e)n[o]==null&&wo(r,o,"");for(const o in n)o==="display"&&(i=!0),wo(r,o,n[o])}else if(s){if(e!==n){const o=r[pE];o&&(n+=";"+o),r.cssText=n,i=gE.test(n)}}else e&&t.removeAttribute("style");$o in t&&(t[$o]=i?r.display:"",t[tg]&&(r.display="none"))}const Bh=/\s*!important$/;function wo(t,e,n){if(ce(n))n.forEach(r=>wo(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=_E(t,e);Bh.test(n)?t.setProperty($r(r),n.replace(Bh,""),"important"):t[r]=n}}const jh=["Webkit","Moz","ms"],ac={};function _E(t,e){const n=ac[e];if(n)return n;let r=Gt(e);if(r!=="filter"&&r in t)return ac[e]=r;r=ua(r);for(let s=0;s<jh.length;s++){const i=jh[s]+r;if(i in t)return ac[e]=i}return e}const $h="http://www.w3.org/1999/xlink";function qh(t,e,n,r,s,i=vy(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS($h,e.slice(6,e.length)):t.setAttributeNS($h,e,n):n==null||i&&!tp(n)?t.removeAttribute(e):t.setAttribute(e,i?"":En(n)?String(n):n)}function Hh(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?eg(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const c=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(c!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=tp(n):n==null&&c==="string"?(n="",o=!0):c==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Pr(t,e,n,r){t.addEventListener(e,n,r)}function yE(t,e,n,r){t.removeEventListener(e,n,r)}const zh=Symbol("_vei");function vE(t,e,n,r,s=null){const i=t[zh]||(t[zh]={}),o=i[e];if(r&&o)o.value=r;else{const[c,l]=EE(e);if(r){const h=i[e]=wE(r,s);Pr(t,c,h,l)}else o&&(yE(t,c,o,l),i[e]=void 0)}}const Gh=/(?:Once|Passive|Capture)$/;function EE(t){let e;if(Gh.test(t)){e={};let r;for(;r=t.match(Gh);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):$r(t.slice(2)),e]}let cc=0;const TE=Promise.resolve(),IE=()=>cc||(TE.then(()=>cc=0),cc=Date.now());function wE(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Tn(AE(r,n.value),e,5,[r])};return n.value=t,n.attached=IE(),n}function AE(t,e){if(ce(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Kh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,bE=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?fE(t,r,o):e==="style"?mE(t,n,r):aa(e)?vl(e)||vE(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):RE(t,e,r,o))?(Hh(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&qh(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Qe(r))?Hh(t,Gt(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),qh(t,e,r,o))};function RE(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Kh(e)&&he(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Kh(e)&&Qe(n)?!1:e in t}const qo=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ce(e)?n=>_o(e,n):e};function SE(t){t.target.composing=!0}function Wh(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const us=Symbol("_assign");function Qh(t,e,n){return e&&(t=t.trim()),n&&(t=ha(t)),t}const CE={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[us]=qo(s);const i=r||s.props&&s.props.type==="number";Pr(t,e?"change":"input",o=>{o.target.composing||t[us](Qh(t.value,n,i))}),(n||i)&&Pr(t,"change",()=>{t.value=Qh(t.value,n,i)}),e||(Pr(t,"compositionstart",SE),Pr(t,"compositionend",Wh),Pr(t,"change",Wh))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[us]=qo(o),t.composing)return;const c=(i||t.type==="number")&&!/^0\d/.test(t.value)?ha(t.value):t.value,l=e??"";c!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},Jh={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=ca(e);Pr(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?ha(Ho(o)):Ho(o));t[us](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Nl(()=>{t._assigning=!1})}),t[us]=qo(r)},mounted(t,{value:e}){Xh(t,e)},beforeUpdate(t,e,n){t[us]=qo(n)},updated(t,{value:e}){t._assigning||Xh(t,e)}};function Xh(t,e){const n=t.multiple,r=ce(e);if(!(n&&!r&&!ca(e))){for(let s=0,i=t.options.length;s<i;s++){const o=t.options[s],c=Ho(o);if(n)if(r){const l=typeof c;l==="string"||l==="number"?o.selected=e.some(h=>String(h)===String(c)):o.selected=Ty(e,c)>-1}else o.selected=e.has(c);else if(da(Ho(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Ho(t){return"_value"in t?t._value:t.value}const PE=Et({patchProp:bE},uE);let Yh;function NE(){return Yh||(Yh=Bv(PE))}const kE=((...t)=>{const e=NE().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=DE(r);if(!s)return;const i=e._component;!he(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,OE(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function OE(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function DE(t){return Qe(t)?document.querySelector(t):t}const VE="/assets/logo-BpAMZkpB.png";const Yr=typeof document<"u";function ng(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function xE(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&ng(t.default)}const we=Object.assign;function lc(t,e){const n={};for(const r in e){const s=e[r];n[r]=Zt(s)?s.map(t):t(s)}return n}const gi=()=>{},Zt=Array.isArray;function Zh(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const rg=/#/g,ME=/&/g,LE=/\//g,UE=/=/g,FE=/\?/g,sg=/\+/g,BE=/%5B/g,jE=/%5D/g,ig=/%5E/g,$E=/%60/g,og=/%7B/g,qE=/%7C/g,ag=/%7D/g,HE=/%20/g;function Ll(t){return t==null?"":encodeURI(""+t).replace(qE,"|").replace(BE,"[").replace(jE,"]")}function zE(t){return Ll(t).replace(og,"{").replace(ag,"}").replace(ig,"^")}function Fc(t){return Ll(t).replace(sg,"%2B").replace(HE,"+").replace(rg,"%23").replace(ME,"%26").replace($E,"`").replace(og,"{").replace(ag,"}").replace(ig,"^")}function GE(t){return Fc(t).replace(UE,"%3D")}function KE(t){return Ll(t).replace(rg,"%23").replace(FE,"%3F")}function WE(t){return KE(t).replace(LE,"%2F")}function Ci(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const QE=/\/$/,JE=t=>t.replace(QE,"");function uc(t,e,n="/"){let r,s={},i="",o="";const c=e.indexOf("#");let l=e.indexOf("?");return l=c>=0&&l>c?-1:l,l>=0&&(r=e.slice(0,l),i=e.slice(l,c>0?c:e.length),s=t(i.slice(1))),c>=0&&(r=r||e.slice(0,c),o=e.slice(c,e.length)),r=eT(r??e,n),{fullPath:r+i+o,path:r,query:s,hash:Ci(o)}}function XE(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function ef(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function YE(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Ts(e.matched[r],n.matched[s])&&cg(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ts(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function cg(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!ZE(t[n],e[n]))return!1;return!0}function ZE(t,e){return Zt(t)?tf(t,e):Zt(e)?tf(e,t):t===e}function tf(t,e){return Zt(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function eT(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,c;for(o=0;o<r.length;o++)if(c=r[o],c!==".")if(c==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Gn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Bc=(function(t){return t.pop="pop",t.push="push",t})({}),hc=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function tT(t){if(!t)if(Yr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),JE(t)}const nT=/^[^#]+#/;function rT(t,e){return t.replace(nT,"#")+e}function sT(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Ta=()=>({left:window.scrollX,top:window.scrollY});function iT(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=sT(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function nf(t,e){return(history.state?history.state.position-e:-1)+t}const jc=new Map;function oT(t,e){jc.set(t,e)}function aT(t){const e=jc.get(t);return jc.delete(t),e}function cT(t){return typeof t=="string"||t&&typeof t=="object"}function lg(t){return typeof t=="string"||typeof t=="symbol"}let Ue=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const ug=Symbol("");Ue.MATCHER_NOT_FOUND+"",Ue.NAVIGATION_GUARD_REDIRECT+"",Ue.NAVIGATION_ABORTED+"",Ue.NAVIGATION_CANCELLED+"",Ue.NAVIGATION_DUPLICATED+"";function Is(t,e){return we(new Error,{type:t,[ug]:!0},e)}function Rn(t,e){return t instanceof Error&&ug in t&&(e==null||!!(t.type&e))}const lT=["params","query","hash"];function uT(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of lT)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function hT(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(sg," "),i=s.indexOf("="),o=Ci(i<0?s:s.slice(0,i)),c=i<0?null:Ci(s.slice(i+1));if(o in e){let l=e[o];Zt(l)||(l=e[o]=[l]),l.push(c)}else e[o]=c}return e}function rf(t){let e="";for(let n in t){const r=t[n];if(n=GE(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Zt(r)?r.map(s=>s&&Fc(s)):[r&&Fc(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function fT(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Zt(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const dT=Symbol(""),sf=Symbol(""),Ul=Symbol(""),Fl=Symbol(""),$c=Symbol("");function ti(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Xn(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((c,l)=>{const h=m=>{m===!1?l(Is(Ue.NAVIGATION_ABORTED,{from:n,to:e})):m instanceof Error?l(m):cT(m)?l(Is(Ue.NAVIGATION_GUARD_REDIRECT,{from:e,to:m})):(o&&r.enterCallbacks[s]===o&&typeof m=="function"&&o.push(m),c())},f=i(()=>t.call(r&&r.instances[s],e,n,h));let p=Promise.resolve(f);t.length<3&&(p=p.then(h)),p.catch(m=>l(m))})}function fc(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const c in o.components){let l=o.components[c];if(!(e!=="beforeRouteEnter"&&!o.instances[c]))if(ng(l)){const h=(l.__vccOpts||l)[e];h&&i.push(Xn(h,n,r,o,c,s))}else{let h=l();i.push(()=>h.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${c}" at "${o.path}"`);const p=xE(f)?f.default:f;o.mods[c]=f,o.components[c]=p;const m=(p.__vccOpts||p)[e];return m&&Xn(m,n,r,o,c,s)()}))}}return i}function pT(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const c=e.matched[o];c&&(t.matched.find(h=>Ts(h,c))?r.push(c):n.push(c));const l=t.matched[o];l&&(e.matched.find(h=>Ts(h,l))||s.push(l))}return[n,r,s]}let gT=()=>location.protocol+"//"+location.host;function hg(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(o);return c[0]!=="/"&&(c="/"+c),ef(c,"")}return ef(n,t)+r+s}function mT(t,e,n,r){let s=[],i=[],o=null;const c=({state:m})=>{const v=hg(t,location),P=n.value,k=e.value;let O=0;if(m){if(n.value=v,e.value=m,o&&o===P){o=null;return}O=k?m.position-k.position:0}else r(v);s.forEach(j=>{j(n.value,P,{delta:O,type:Bc.pop,direction:O?O>0?hc.forward:hc.back:hc.unknown})})};function l(){o=n.value}function h(m){s.push(m);const v=()=>{const P=s.indexOf(m);P>-1&&s.splice(P,1)};return i.push(v),v}function f(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(we({},m.state,{scroll:Ta()}),"")}}function p(){for(const m of i)m();i=[],window.removeEventListener("popstate",c),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",c),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:l,listen:h,destroy:p}}function of(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Ta():null}}function _T(t){const{history:e,location:n}=window,r={value:hg(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,h,f){const p=t.indexOf("#"),m=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:gT()+t+l;try{e[f?"replaceState":"pushState"](h,"",m),s.value=h}catch(v){console.error(v),n[f?"replace":"assign"](m)}}function o(l,h){i(l,we({},e.state,of(s.value.back,l,s.value.forward,!0),h,{position:s.value.position}),!0),r.value=l}function c(l,h){const f=we({},s.value,e.state,{forward:l,scroll:Ta()});i(f.current,f,!0),i(l,we({},of(r.value,l,null),{position:f.position+1},h),!1),r.value=l}return{location:r,state:s,push:c,replace:o}}function yT(t){t=tT(t);const e=_T(t),n=mT(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=we({location:"",base:t,go:r,createHref:rT.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let Nr=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var Xe=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(Xe||{});const vT={type:Nr.Static,value:""},ET=/[a-zA-Z0-9_]/;function TT(t){if(!t)return[[]];if(t==="/")return[[vT]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(v){throw new Error(`ERR (${n})/"${h}": ${v}`)}let n=Xe.Static,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let c=0,l,h="",f="";function p(){h&&(n===Xe.Static?i.push({type:Nr.Static,value:h}):n===Xe.Param||n===Xe.ParamRegExp||n===Xe.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Nr.Param,value:h,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),h="")}function m(){h+=l}for(;c<t.length;){if(l=t[c++],l==="\\"&&n!==Xe.ParamRegExp){r=n,n=Xe.EscapeNext;continue}switch(n){case Xe.Static:l==="/"?(h&&p(),o()):l===":"?(p(),n=Xe.Param):m();break;case Xe.EscapeNext:m(),n=r;break;case Xe.Param:l==="("?n=Xe.ParamRegExp:ET.test(l)?m():(p(),n=Xe.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case Xe.ParamRegExp:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:n=Xe.ParamRegExpEnd:f+=l;break;case Xe.ParamRegExpEnd:p(),n=Xe.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--,f="";break;default:e("Unknown state");break}}return n===Xe.ParamRegExp&&e(`Unfinished custom RegExp for param "${h}"`),p(),o(),s}const af="[^/]+?",IT={sensitive:!1,strict:!1,start:!0,end:!0};var bt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(bt||{});const wT=/[.+*?^${}()[\]/\\]/g;function AT(t,e){const n=we({},IT,e),r=[];let s=n.start?"^":"";const i=[];for(const h of t){const f=h.length?[]:[bt.Root];n.strict&&!h.length&&(s+="/");for(let p=0;p<h.length;p++){const m=h[p];let v=bt.Segment+(n.sensitive?bt.BonusCaseSensitive:0);if(m.type===Nr.Static)p||(s+="/"),s+=m.value.replace(wT,"\\$&"),v+=bt.Static;else if(m.type===Nr.Param){const{value:P,repeatable:k,optional:O,regexp:j}=m;i.push({name:P,repeatable:k,optional:O});const F=j||af;if(F!==af){v+=bt.BonusCustomRegExp;try{`${F}`}catch(z){throw new Error(`Invalid custom RegExp for param "${P}" (${F}): `+z.message)}}let q=k?`((?:${F})(?:/(?:${F}))*)`:`(${F})`;p||(q=O&&h.length<2?`(?:/${q})`:"/"+q),O&&(q+="?"),s+=q,v+=bt.Dynamic,O&&(v+=bt.BonusOptional),k&&(v+=bt.BonusRepeatable),F===".*"&&(v+=bt.BonusWildcard)}f.push(v)}r.push(f)}if(n.strict&&n.end){const h=r.length-1;r[h][r[h].length-1]+=bt.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function c(h){const f=h.match(o),p={};if(!f)return null;for(let m=1;m<f.length;m++){const v=f[m]||"",P=i[m-1];p[P.name]=v&&P.repeatable?v.split("/"):v}return p}function l(h){let f="",p=!1;for(const m of t){(!p||!f.endsWith("/"))&&(f+="/"),p=!1;for(const v of m)if(v.type===Nr.Static)f+=v.value;else if(v.type===Nr.Param){const{value:P,repeatable:k,optional:O}=v,j=P in h?h[P]:"";if(Zt(j)&&!k)throw new Error(`Provided param "${P}" is an array but it is not repeatable (* or + modifiers)`);const F=Zt(j)?j.join("/"):j;if(!F)if(O)m.length<2&&(f.endsWith("/")?f=f.slice(0,-1):p=!0);else throw new Error(`Missing required param "${P}"`);f+=F}}return f||"/"}return{re:o,score:r,keys:i,parse:c,stringify:l}}function bT(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===bt.Static+bt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===bt.Static+bt.Segment?1:-1:0}function fg(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=bT(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(cf(r))return 1;if(cf(s))return-1}return s.length-r.length}function cf(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const RT={strict:!1,end:!0,sensitive:!1};function ST(t,e,n){const r=AT(TT(t.path),n),s=we(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function CT(t,e){const n=[],r=new Map;e=Zh(RT,e);function s(p){return r.get(p)}function i(p,m,v){const P=!v,k=uf(p);k.aliasOf=v&&v.record;const O=Zh(e,p),j=[k];if("alias"in p){const z=typeof p.alias=="string"?[p.alias]:p.alias;for(const ie of z)j.push(uf(we({},k,{components:v?v.record.components:k.components,path:ie,aliasOf:v?v.record:k})))}let F,q;for(const z of j){const{path:ie}=z;if(m&&ie[0]!=="/"){const oe=m.record.path,y=oe[oe.length-1]==="/"?"":"/";z.path=m.record.path+(ie&&y+ie)}if(F=ST(z,m,O),v?v.alias.push(F):(q=q||F,q!==F&&q.alias.push(F),P&&p.name&&!hf(F)&&o(p.name)),dg(F)&&l(F),k.children){const oe=k.children;for(let y=0;y<oe.length;y++)i(oe[y],F,v&&v.children[y])}v=v||F}return q?()=>{o(q)}:gi}function o(p){if(lg(p)){const m=r.get(p);m&&(r.delete(p),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(p);m>-1&&(n.splice(m,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function c(){return n}function l(p){const m=kT(p,n);n.splice(m,0,p),p.record.name&&!hf(p)&&r.set(p.record.name,p)}function h(p,m){let v,P={},k,O;if("name"in p&&p.name){if(v=r.get(p.name),!v)throw Is(Ue.MATCHER_NOT_FOUND,{location:p});O=v.record.name,P=we(lf(m.params,v.keys.filter(q=>!q.optional).concat(v.parent?v.parent.keys.filter(q=>q.optional):[]).map(q=>q.name)),p.params&&lf(p.params,v.keys.map(q=>q.name))),k=v.stringify(P)}else if(p.path!=null)k=p.path,v=n.find(q=>q.re.test(k)),v&&(P=v.parse(k),O=v.record.name);else{if(v=m.name?r.get(m.name):n.find(q=>q.re.test(m.path)),!v)throw Is(Ue.MATCHER_NOT_FOUND,{location:p,currentLocation:m});O=v.record.name,P=we({},m.params,p.params),k=v.stringify(P)}const j=[];let F=v;for(;F;)j.unshift(F.record),F=F.parent;return{name:O,path:k,params:P,matched:j,meta:NT(j)}}t.forEach(p=>i(p));function f(){n.length=0,r.clear()}return{addRoute:i,resolve:h,removeRoute:o,clearRoutes:f,getRoutes:c,getRecordMatcher:s}}function lf(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function uf(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:PT(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function PT(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function hf(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function NT(t){return t.reduce((e,n)=>we(e,n.meta),{})}function kT(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;fg(t,e[i])<0?r=i:n=i+1}const s=OT(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function OT(t){let e=t;for(;e=e.parent;)if(dg(e)&&fg(t,e)===0)return e}function dg({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function ff(t){const e=dn(Ul),n=dn(Fl),r=Vt(()=>{const l=Ye(t.to);return e.resolve(l)}),s=Vt(()=>{const{matched:l}=r.value,{length:h}=l,f=l[h-1],p=n.matched;if(!f||!p.length)return-1;const m=p.findIndex(Ts.bind(null,f));if(m>-1)return m;const v=df(l[h-2]);return h>1&&df(f)===v&&p[p.length-1].path!==v?p.findIndex(Ts.bind(null,l[h-2])):m}),i=Vt(()=>s.value>-1&&LT(n.params,r.value.params)),o=Vt(()=>s.value>-1&&s.value===n.matched.length-1&&cg(n.params,r.value.params));function c(l={}){if(MT(l)){const h=e[Ye(t.replace)?"replace":"push"](Ye(t.to)).catch(gi);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:r,href:Vt(()=>r.value.href),isActive:i,isExactActive:o,navigate:c}}function DT(t){return t.length===1?t[0]:t}const VT=Rp({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:ff,setup(t,{slots:e}){const n=ga(ff(t)),{options:r}=dn(Ul),s=Vt(()=>({[pf(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[pf(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&DT(e.default(n));return t.custom?i:Zp("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),xT=VT;function MT(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function LT(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Zt(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function df(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const pf=(t,e,n)=>t??e??n,UT=Rp({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=dn($c),s=Vt(()=>t.route||r.value),i=dn(sf,0),o=Vt(()=>{let h=Ye(i);const{matched:f}=s.value;let p;for(;(p=f[h])&&!p.components;)h++;return h}),c=Vt(()=>s.value.matched[o.value]);yo(sf,Vt(()=>o.value+1)),yo(dT,c),yo($c,s);const l=rt();return vo(()=>[l.value,c.value,t.name],([h,f,p],[m,v,P])=>{f&&(f.instances[p]=h,v&&v!==f&&h&&h===m&&(f.leaveGuards.size||(f.leaveGuards=v.leaveGuards),f.updateGuards.size||(f.updateGuards=v.updateGuards))),h&&f&&(!v||!Ts(f,v)||!m)&&(f.enterCallbacks[p]||[]).forEach(k=>k(h))},{flush:"post"}),()=>{const h=s.value,f=t.name,p=c.value,m=p&&p.components[f];if(!m)return gf(n.default,{Component:m,route:h});const v=p.props[f],P=v?v===!0?h.params:typeof v=="function"?v(h):v:null,O=Zp(m,we({},P,e,{onVnodeUnmounted:j=>{j.component.isUnmounted&&(p.instances[f]=null)},ref:l}));return gf(n.default,{Component:O,route:h})||O}}});function gf(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const FT=UT;function BT(t){const e=CT(t.routes,t),n=t.parseQuery||hT,r=t.stringifyQuery||rf,s=t.history,i=ti(),o=ti(),c=ti(),l=qy(Gn);let h=Gn;Yr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=lc.bind(null,V=>""+V),p=lc.bind(null,WE),m=lc.bind(null,Ci);function v(V,X){let Q,ee;return lg(V)?(Q=e.getRecordMatcher(V),ee=X):ee=V,e.addRoute(ee,Q)}function P(V){const X=e.getRecordMatcher(V);X&&e.removeRoute(X)}function k(){return e.getRoutes().map(V=>V.record)}function O(V){return!!e.getRecordMatcher(V)}function j(V,X){if(X=we({},X||l.value),typeof V=="string"){const R=uc(n,V,X.path),x=e.resolve({path:R.path},X),L=s.createHref(R.fullPath);return we(R,x,{params:m(x.params),hash:Ci(R.hash),redirectedFrom:void 0,href:L})}let Q;if(V.path!=null)Q=we({},V,{path:uc(n,V.path,X.path).path});else{const R=we({},V.params);for(const x in R)R[x]==null&&delete R[x];Q=we({},V,{params:p(R)}),X.params=p(X.params)}const ee=e.resolve(Q,X),pe=V.hash||"";ee.params=f(m(ee.params));const E=XE(r,we({},V,{hash:zE(pe),path:ee.path})),w=s.createHref(E);return we({fullPath:E,hash:pe,query:r===rf?fT(V.query):V.query||{}},ee,{redirectedFrom:void 0,href:w})}function F(V){return typeof V=="string"?uc(n,V,l.value.path):we({},V)}function q(V,X){if(h!==V)return Is(Ue.NAVIGATION_CANCELLED,{from:X,to:V})}function z(V){return y(V)}function ie(V){return z(we(F(V),{replace:!0}))}function oe(V,X){const Q=V.matched[V.matched.length-1];if(Q&&Q.redirect){const{redirect:ee}=Q;let pe=typeof ee=="function"?ee(V,X):ee;return typeof pe=="string"&&(pe=pe.includes("?")||pe.includes("#")?pe=F(pe):{path:pe},pe.params={}),we({query:V.query,hash:V.hash,params:pe.path!=null?{}:V.params},pe)}}function y(V,X){const Q=h=j(V),ee=l.value,pe=V.state,E=V.force,w=V.replace===!0,R=oe(Q,ee);if(R)return y(we(F(R),{state:typeof R=="object"?we({},pe,R.state):pe,force:E,replace:w}),X||Q);const x=Q;x.redirectedFrom=X;let L;return!E&&YE(r,ee,Q)&&(L=Is(Ue.NAVIGATION_DUPLICATED,{to:x,from:ee}),xt(ee,ee,!0,!1)),(L?Promise.resolve(L):b(x,ee)).catch(D=>Rn(D)?Rn(D,Ue.NAVIGATION_GUARD_REDIRECT)?D:tn(D):me(D,x,ee)).then(D=>{if(D){if(Rn(D,Ue.NAVIGATION_GUARD_REDIRECT))return y(we({replace:w},F(D.to),{state:typeof D.to=="object"?we({},pe,D.to.state):pe,force:E}),X||x)}else D=S(x,ee,!0,w,pe);return A(x,ee,D),D})}function _(V,X){const Q=q(V,X);return Q?Promise.reject(Q):Promise.resolve()}function I(V){const X=Kt.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(V):V()}function b(V,X){let Q;const[ee,pe,E]=pT(V,X);Q=fc(ee.reverse(),"beforeRouteLeave",V,X);for(const R of ee)R.leaveGuards.forEach(x=>{Q.push(Xn(x,V,X))});const w=_.bind(null,V,X);return Q.push(w),ut(Q).then(()=>{Q=[];for(const R of i.list())Q.push(Xn(R,V,X));return Q.push(w),ut(Q)}).then(()=>{Q=fc(pe,"beforeRouteUpdate",V,X);for(const R of pe)R.updateGuards.forEach(x=>{Q.push(Xn(x,V,X))});return Q.push(w),ut(Q)}).then(()=>{Q=[];for(const R of E)if(R.beforeEnter)if(Zt(R.beforeEnter))for(const x of R.beforeEnter)Q.push(Xn(x,V,X));else Q.push(Xn(R.beforeEnter,V,X));return Q.push(w),ut(Q)}).then(()=>(V.matched.forEach(R=>R.enterCallbacks={}),Q=fc(E,"beforeRouteEnter",V,X,I),Q.push(w),ut(Q))).then(()=>{Q=[];for(const R of o.list())Q.push(Xn(R,V,X));return Q.push(w),ut(Q)}).catch(R=>Rn(R,Ue.NAVIGATION_CANCELLED)?R:Promise.reject(R))}function A(V,X,Q){c.list().forEach(ee=>I(()=>ee(V,X,Q)))}function S(V,X,Q,ee,pe){const E=q(V,X);if(E)return E;const w=X===Gn,R=Yr?history.state:{};Q&&(ee||w?s.replace(V.fullPath,we({scroll:w&&R&&R.scroll},pe)):s.push(V.fullPath,pe)),l.value=V,xt(V,X,Q,w),tn()}let T;function He(){T||(T=s.listen((V,X,Q)=>{if(!Wt.listening)return;const ee=j(V),pe=oe(ee,Wt.currentRoute.value);if(pe){y(we(pe,{replace:!0,force:!0}),ee).catch(gi);return}h=ee;const E=l.value;Yr&&oT(nf(E.fullPath,Q.delta),Ta()),b(ee,E).catch(w=>Rn(w,Ue.NAVIGATION_ABORTED|Ue.NAVIGATION_CANCELLED)?w:Rn(w,Ue.NAVIGATION_GUARD_REDIRECT)?(y(we(F(w.to),{force:!0}),ee).then(R=>{Rn(R,Ue.NAVIGATION_ABORTED|Ue.NAVIGATION_DUPLICATED)&&!Q.delta&&Q.type===Bc.pop&&s.go(-1,!1)}).catch(gi),Promise.reject()):(Q.delta&&s.go(-Q.delta,!1),me(w,ee,E))).then(w=>{w=w||S(ee,E,!1),w&&(Q.delta&&!Rn(w,Ue.NAVIGATION_CANCELLED)?s.go(-Q.delta,!1):Q.type===Bc.pop&&Rn(w,Ue.NAVIGATION_ABORTED|Ue.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),A(ee,E,w)}).catch(gi)}))}let Pt=ti(),ze=ti(),Ie;function me(V,X,Q){tn(V);const ee=ze.list();return ee.length?ee.forEach(pe=>pe(V,X,Q)):console.error(V),Promise.reject(V)}function Nt(){return Ie&&l.value!==Gn?Promise.resolve():new Promise((V,X)=>{Pt.add([V,X])})}function tn(V){return Ie||(Ie=!V,He(),Pt.list().forEach(([X,Q])=>V?Q(V):X()),Pt.reset()),V}function xt(V,X,Q,ee){const{scrollBehavior:pe}=t;if(!Yr||!pe)return Promise.resolve();const E=!Q&&aT(nf(V.fullPath,0))||(ee||!Q)&&history.state&&history.state.scroll||null;return Nl().then(()=>pe(V,X,E)).then(w=>w&&iT(w)).catch(w=>me(w,V,X))}const it=V=>s.go(V);let An;const Kt=new Set,Wt={currentRoute:l,listening:!0,addRoute:v,removeRoute:P,clearRoutes:e.clearRoutes,hasRoute:O,getRoutes:k,resolve:j,options:t,push:z,replace:ie,go:it,back:()=>it(-1),forward:()=>it(1),beforeEach:i.add,beforeResolve:o.add,afterEach:c.add,onError:ze.add,isReady:Nt,install(V){V.component("RouterLink",xT),V.component("RouterView",FT),V.config.globalProperties.$router=Wt,Object.defineProperty(V.config.globalProperties,"$route",{enumerable:!0,get:()=>Ye(l)}),Yr&&!An&&l.value===Gn&&(An=!0,z(s.location).catch(ee=>{}));const X={};for(const ee in Gn)Object.defineProperty(X,ee,{get:()=>l.value[ee],enumerable:!0});V.provide(Ul,Wt),V.provide(Fl,yp(X)),V.provide($c,l);const Q=V.unmount;Kt.add(V),V.unmount=function(){Kt.delete(V),Kt.size<1&&(h=Gn,T&&T(),T=null,l.value=Gn,An=!1,Ie=!1),Q()}}};function ut(V){return V.reduce((X,Q)=>X.then(()=>I(Q)),Promise.resolve())}return Wt}function jT(t){return dn(Fl)}const Ns=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},$T={class:"navbar-nav",role:"menu"},qT={class:"nav-item",role:"none"},HT={class:"nav-item",role:"none"},zT={class:"nav-item",role:"none"},GT={class:"nav-item",role:"none"},KT={__name:"Sidebar",setup(t){const e=jT(),n=rt(!1),r=s=>{const i=e.path;return i===s||i.startsWith(s+"/")||i.startsWith(s)};return(s,i)=>{const o=Dl("router-link");return ke(),De("nav",{class:ln(["sidenav",{collapsed:n.value}]),role:"navigation"},[i[7]||(i[7]=K("div",{class:"sidenav-header"},[K("img",{src:VE,alt:"Logo",class:"w-40"})],-1)),K("ul",$T,[K("li",qT,[Fe(o,{to:"/home",class:ln(["nav-link",{active:r("/home")}]),role:"menuitem"},{default:rs(()=>[...i[0]||(i[0]=[Dt(" Home ",-1)])]),_:1},8,["class"])]),K("li",HT,[Fe(o,{to:"/bondades",class:ln(["nav-link",{active:r("/bondades")}]),role:"menuitem"},{default:rs(()=>[...i[1]||(i[1]=[Dt(" Bondades de Vue ",-1)])]),_:1},8,["class"])]),i[4]||(i[4]=K("li",{class:"divider"},null,-1)),K("li",zT,[Fe(o,{to:"/upload",class:ln(["nav-link",{active:r("/upload")}]),role:"menuitem"},{default:rs(()=>[...i[2]||(i[2]=[Dt(" Gestin de archivos ",-1)])]),_:1},8,["class"])]),i[5]||(i[5]=K("li",{class:"divider"},null,-1)),K("li",GT,[Fe(o,{to:"/about",class:ln(["nav-link",{active:r("/about")}]),role:"menuitem"},{default:rs(()=>[...i[3]||(i[3]=[Dt(" Acerca ",-1)])]),_:1},8,["class"])]),i[6]||(i[6]=K("li",{class:"nav-item",role:"none"},[K("a",{class:"nav-link",href:"https://github.com/mpaulina24/technical-test-DyD",target:"_blank",rel:"noopener noreferrer",role:"menuitem"}," GitHub ")],-1))]),i[8]||(i[8]=K("div",{class:"sidebar-footer"},[Dt(" Programado por "),K("a",{href:"https://github.com/mpaulina24",target:"_blank",rel:"noopener noreferrer"}," MariaPaulinaArias "),Dt(", ")],-1))],2)}}},WT=Ns(KT,[["__scopeId","data-v-9633282d"]]),QT={class:"layout"},JT={class:"main-content"},XT={class:"content-wrapper"},YT={__name:"App",setup(t){return(e,n)=>{const r=Dl("router-view");return ke(),De("div",QT,[Fe(WT),K("main",JT,[K("div",XT,[Fe(r)])])])}}},ZT={class:"home"},eI={class:"cards"},tI={class:"card-desc"},nI={__name:"HomeView",setup(t){const e=[{title:"Bondades de Vue 3",desc:"Vista interactiva con ejemplos reales de reactividad, composicin, componentes y bindings declarativos.",route:"/bondades"},{title:"Procesamiento de ZIP",desc:"Carga un archivo ZIP, descomprime desde backend, registra los archivos en Firestore y permite descargas con clave.",route:"/upload"}];return(n,r)=>{const s=Dl("router-link");return ke(),De("section",ZT,[r[1]||(r[1]=K("h1",{class:"title"},"Bienvenido a la Demo Tcnica",-1)),r[2]||(r[2]=K("p",{class:"subtitle"}," Proyecto desarrollado en Vue 3 + Vite, con despliegue e integracin completa con Firebase. Incluye una demostracin de las principales bondades del framework y un mdulo para carga, procesamiento y descarga segura de archivos ZIP. ",-1)),K("div",eI,[(ke(),De(St,null,ss(e,i=>K("div",{class:"card",key:i.title},[K("h3",null,Ze(i.title),1),K("p",tI,Ze(i.desc),1),Fe(s,{to:i.route,class:"btn"},{default:rs(()=>[...r[0]||(r[0]=[Dt(" Ir  ",-1)])]),_:1},8,["to"])])),64))])])}}},rI=Ns(nI,[["__scopeId","data-v-0f81609c"]]),sI={key:0,class:"icon"},iI={__name:"ReusableButton",props:{text:{type:String,required:!0},icon:{type:String,default:""}},setup(t){return(e,n)=>(ke(),De("button",{class:"btn",onClick:n[0]||(n[0]=r=>e.$emit("on-press"))},[t.icon?(ke(),De("span",sI,Ze(t.icon),1)):Io("",!0),K("span",null,Ze(t.text),1)]))}},oI=Ns(iI,[["__scopeId","data-v-ac9b6f3f"]]);function aI(t,e=5){const n=rt(1),r=rt(e),s=Vt(()=>Math.ceil(t.value.length/r.value)),i=Vt(()=>{const h=(n.value-1)*r.value;return t.value.slice(h,h+r.value)});function o(){n.value<s.value&&n.value++}function c(){n.value>1&&n.value--}function l(h){r.value=h,n.value=1}return{currentPage:n,totalPages:s,paginatedItems:i,next:o,prev:c,size:r,setPageSize:l}}const cI={class:"features"},lI={class:"grid"},uI={class:"card"},hI={class:"demo-box",style:{"margin-top":"12px"}},fI={class:"result",style:{"margin-top":"12px"}},dI={class:"card"},pI={class:"controls"},gI=["value"],mI={class:"paginated-list"},_I={class:"pagination-buttons"},yI=["disabled"],vI=["disabled"],EI={class:"card"},TI={class:"filters"},II={key:0,class:"empty"},wI={key:1,class:"user-list"},AI={class:"user-info"},bI={class:"card"},RI={style:{display:"flex",gap:"10px","align-items":"center"}},SI={key:0,class:"loading"},CI={key:0,class:"api-msg",style:{"margin-top":"12px"}},PI={key:1,class:"api-error",style:{"margin-top":"12px"}},NI={class:"card"},kI={class:"notif-panel",style:{"margin-top":"12px"}},OI={key:0,class:"empty"},DI={key:1,class:"notif-list"},VI={__name:"Bondades",setup(t){const e=rt(0),n=rt([{id:1,name:"Usuario 1"},{id:2,name:"Usuario 2"},{id:3,name:"Usuario 3"},{id:4,name:"Usuario 4"},{id:5,name:"Usuario 5"},{id:6,name:"Usuario 6"},{id:7,name:"Usuario 7"}]),{currentPage:r,totalPages:s,paginatedItems:i,next:o,prev:c,size:l,setPageSize:h}=aI(n),f=rt(""),p=rt(""),m=rt([{id:1,name:"Ana Ruiz",role:"admin",active:!0},{id:2,name:"Carlos Prez",role:"editor",active:!1},{id:3,name:"Luisa Gmez",role:"viewer",active:!0},{id:4,name:"Marcos Daz",role:"viewer",active:!0},{id:5,name:"Sofa Herrera",role:"editor",active:!1}]),v=Vt(()=>{const oe=f.value.trim().toLowerCase();return m.value.filter(y=>{const _=y.name.toLowerCase().includes(oe),I=p.value?y.role===p.value:!0;return _&&I})}),P=rt(""),k=rt(""),O=rt(!1);async function j(){O.value=!0,P.value="",k.value="";try{if(await new Promise(oe=>setTimeout(oe,1e3)),Math.random()<.1)throw new Error("Fallo simulado de la API");P.value="Mensaje recibido desde el servidor - "+new Date().toLocaleTimeString()}catch(oe){k.value=oe.message||"Error desconocido"}finally{O.value=!1}}const F=rt(!0),q=rt([{id:1,text:"Tienes una nueva tarea asignada"},{id:2,text:"El sistema fue actualizado correctamente"}]);function z(){F.value=!F.value}function ie(){const oe=Date.now();q.value.push({id:oe,text:"Nueva notificacin  "+new Date().toLocaleTimeString()})}return(oe,y)=>(ke(),De("section",cI,[y[20]||(y[20]=K("h1",{class:"title"},"Bondades de Vue 3",-1)),y[21]||(y[21]=K("p",{class:"subtitle"}," Ejemplos aplicados al desarrollo de productos escalables e interactivos ",-1)),K("div",lI,[K("div",uI,[y[8]||(y[8]=K("h2",null,"1. Componentes reutilizables",-1)),y[9]||(y[9]=K("p",null," Vue permite construir interfaces a partir de componentes independientes, reutilizables y fciles de mantener. Este enfoque reduce duplicacin de cdigo y facilita la creacin de sistemas de diseo consistentes en productos reales. ",-1)),K("div",hI,[Fe(oI,{text:"Haz click",onOnPress:y[0]||(y[0]=_=>e.value++)})]),K("p",fI,[y[7]||(y[7]=Dt(" Nmero de clics: ",-1)),K("strong",null,Ze(e.value),1)])]),K("div",dI,[y[11]||(y[11]=K("h2",null,"2. Lgica Reutilizable (Composables)",-1)),y[12]||(y[12]=K("p",{class:"desc"}," Este ejemplo muestra un composable para paginacin, muy usado en dashboards, listados de usuarios, logs y mdulos administrativos. ",-1)),K("div",pI,[K("label",null,[y[10]||(y[10]=Dt(" Items por pgina: ",-1)),ao(K("select",{"onUpdate:modelValue":y[1]||(y[1]=_=>ct(l)?l.value=_:null),onChange:y[2]||(y[2]=_=>Ye(h)(Ye(l)))},[(ke(),De(St,null,ss([3,5,10],_=>K("option",{key:_,value:_},Ze(_),9,gI)),64))],544),[[Jh,Ye(l)]])])]),K("ul",mI,[(ke(!0),De(St,null,ss(Ye(i),_=>(ke(),De("li",{key:_.id},Ze(_.name),1))),128))]),K("div",_I,[K("button",{onClick:y[3]||(y[3]=(..._)=>Ye(c)&&Ye(c)(..._)),disabled:Ye(r)===1},"Anterior",8,yI),K("span",null,"Pgina "+Ze(Ye(r))+" de "+Ze(Ye(s)),1),K("button",{onClick:y[4]||(y[4]=(..._)=>Ye(o)&&Ye(o)(..._)),disabled:Ye(r)===Ye(s)},"Siguiente",8,vI)])]),K("div",EI,[y[14]||(y[14]=K("h2",null,"3. Listas dinmicas + UI reactiva",-1)),y[15]||(y[15]=K("p",{class:"desc"},[Dt(" Vue actualiza la UI automticamente segn los cambios en los datos. Combinando "),K("strong",null,"v-for"),Dt(", "),K("strong",null,"v-if"),Dt(" y filtros reactivos es posible crear interfaces que responden al estado (dashboards, gestin de usuarios, tablas inteligentes). ")],-1)),K("div",TI,[ao(K("input",{"onUpdate:modelValue":y[5]||(y[5]=_=>f.value=_),type:"text",placeholder:"Buscar usuario...",class:"input"},null,512),[[CE,f.value]]),ao(K("select",{"onUpdate:modelValue":y[6]||(y[6]=_=>p.value=_),class:"input"},[...y[13]||(y[13]=[K("option",{value:""},"Todos los roles",-1),K("option",{value:"admin"},"Admin",-1),K("option",{value:"editor"},"Editor",-1),K("option",{value:"viewer"},"Viewer",-1)])],512),[[Jh,p.value]])]),v.value.length===0?(ke(),De("p",II," No se encontraron usuarios para esta bsqueda. ")):(ke(),De("ul",wI,[(ke(!0),De(St,null,ss(v.value,_=>(ke(),De("li",{key:_.id,class:"user-item"},[K("div",AI,[K("strong",null,Ze(_.name),1),K("span",{class:ln(["role",_.role])},Ze(_.role),3)]),K("span",{class:ln(["status",_.active?"on":"off"])},Ze(_.active?"Activo":"Inactivo"),3)]))),128))]))]),K("div",bI,[y[16]||(y[16]=K("h2",null,"4. Consumo de API simulado",-1)),y[17]||(y[17]=K("p",{class:"desc"}," Vue permite manejar solicitudes a APIs de forma reactiva, controlando estados como carga, xito o error. ",-1)),K("div",RI,[K("button",{onClick:j,class:"btn"}," Cargar mensaje remoto "),O.value?(ke(),De("div",SI,"Cargando...")):Io("",!0)]),P.value?(ke(),De("p",CI,Ze(P.value),1)):Io("",!0),k.value?(ke(),De("p",PI,Ze(k.value),1)):Io("",!0)]),K("div",NI,[y[18]||(y[18]=K("h2",null,"5. Enfoque Declarativo",-1)),y[19]||(y[19]=K("p",{class:"desc"}," En Vue solo definimos el estado y cmo debe verse la interfaz. A partir de eso, el framework actualiza el DOM automticamente segn los cambios, sin necesidad de manipularlo manualmente. ",-1)),K("button",{class:"btn",onClick:z},Ze(F.value?"Ocultar notificaciones":"Mostrar notificaciones"),1),ao(K("div",kI,[q.value.length===0?(ke(),De("p",OI," No tienes notificaciones pendientes. ")):(ke(),De("ul",DI,[(ke(!0),De(St,null,ss(q.value,_=>(ke(),De("li",{key:_.id,class:"notif-item"}," * "+Ze(_.text),1))),128))])),K("button",{class:"btn small",onClick:ie,style:{"margin-top":"14px"}}," Generar notificacin ")],512),[[dE,F.value]])])])]))}},xI=Ns(VI,[["__scopeId","data-v-acfaf4a0"]]),MI=()=>{};var mf={};const pg=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},LI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},gg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,l=s+2<t.length,h=l?t[s+2]:0,f=i>>2,p=(i&3)<<4|c>>4;let m=(c&15)<<2|h>>6,v=h&63;l||(v=64,o||(m=64)),r.push(n[f],n[p],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):LI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||h==null||p==null)throw new UI;const m=i<<2|c>>4;if(r.push(m),h!==64){const v=c<<4&240|h>>2;if(r.push(v),p!==64){const P=h<<6&192|p;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class UI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FI=function(t){const e=pg(t);return gg.encodeByteArray(e,!0)},zo=function(t){return FI(t).replace(/\./g,"")},mg=function(t){try{return gg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function BI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const jI=()=>BI().__FIREBASE_DEFAULTS__,$I=()=>{if(typeof process>"u"||typeof mf>"u")return;const t=mf.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mg(t[1]);return e&&JSON.parse(e)},Ia=()=>{try{return MI()||jI()||$I()||qI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_g=t=>Ia()?.emulatorHosts?.[t],yg=t=>{const e=_g(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},vg=()=>Ia()?.config,Eg=t=>Ia()?.[`_${t}`];class HI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function vr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Bl(t){return(await fetch(t,{credentials:"include"})).ok}function Tg(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[zo(JSON.stringify(n)),zo(JSON.stringify(o)),""].join(".")}const mi={};function zI(){const t={prod:[],emulator:[]};for(const e of Object.keys(mi))mi[e]?t.emulator.push(e):t.prod.push(e);return t}function GI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let _f=!1;function jl(t,e){if(typeof window>"u"||typeof document>"u"||!vr(window.location.host)||mi[t]===e||mi[t]||_f)return;mi[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=zI().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function h(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{_f=!0,o()},m}function f(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=GI(r),v=n("text"),P=document.getElementById(v)||document.createElement("span"),k=n("learnmore"),O=document.getElementById(k)||document.createElement("a"),j=n("preprendIcon"),F=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const q=m.element;c(q),f(O,k);const z=h();l(F,j),q.append(F,P,O,z),document.body.appendChild(q)}i?(P.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function WI(){const t=Ia()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function XI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YI(){const t=Tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ZI(){return!WI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ew(){try{return typeof indexedDB=="object"}catch{return!1}}function tw(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const nw="FirebaseError";class wn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=nw,Object.setPrototypeOf(this,wn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fi.prototype.create)}}class Fi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?rw(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new wn(s,c,r)}}function rw(t,e){return t.replace(sw,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const sw=/\{\$([^}]+)}/g;function iw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Lr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(yf(i)&&yf(o)){if(!Lr(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function yf(t){return t!==null&&typeof t=="object"}function Bi(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ow(t,e){const n=new aw(t,e);return n.subscribe.bind(n)}class aw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");cw(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=dc),s.error===void 0&&(s.error=dc),s.complete===void 0&&(s.complete=dc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cw(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dc(){}function Ct(t){return t&&t._delegate?t._delegate:t}class hr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Cr="[DEFAULT]";class lw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new HI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hw(e))try{this.getOrInitializeService({instanceIdentifier:Cr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Cr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cr){return this.instances.has(e)}getOptions(e=Cr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cr){return this.component?this.component.multipleInstances?e:Cr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uw(t){return t===Cr?void 0:t}function hw(t){return t.instantiationMode==="EAGER"}class fw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new lw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const dw={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},pw=ge.INFO,gw={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},mw=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=gw[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $l{constructor(e){this.name=e,this._logLevel=pw,this._logHandler=mw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const _w=(t,e)=>e.some(n=>t instanceof n);let vf,Ef;function yw(){return vf||(vf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vw(){return Ef||(Ef=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ig=new WeakMap,qc=new WeakMap,wg=new WeakMap,pc=new WeakMap,ql=new WeakMap;function Ew(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(or(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ig.set(n,t)}).catch(()=>{}),ql.set(e,t),e}function Tw(t){if(qc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});qc.set(t,e)}let Hc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return or(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Iw(t){Hc=t(Hc)}function ww(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(gc(this),e,...n);return wg.set(r,e.sort?e.sort():[e]),or(r)}:vw().includes(t)?function(...e){return t.apply(gc(this),e),or(Ig.get(this))}:function(...e){return or(t.apply(gc(this),e))}}function Aw(t){return typeof t=="function"?ww(t):(t instanceof IDBTransaction&&Tw(t),_w(t,yw())?new Proxy(t,Hc):t)}function or(t){if(t instanceof IDBRequest)return Ew(t);if(pc.has(t))return pc.get(t);const e=Aw(t);return e!==t&&(pc.set(t,e),ql.set(e,t)),e}const gc=t=>ql.get(t);function bw(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=or(o);return r&&o.addEventListener("upgradeneeded",l=>{r(or(o.result),l.oldVersion,l.newVersion,or(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),c.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const Rw=["get","getKey","getAll","getAllKeys","count"],Sw=["put","add","delete","clear"],mc=new Map;function Tf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(mc.get(e))return mc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Sw.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Rw.includes(n)))return;const i=async function(o,...c){const l=this.transaction(o,s?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&l.done]))[0]};return mc.set(e,i),i}Iw(t=>({...t,get:(e,n,r)=>Tf(e,n)||t.get(e,n,r),has:(e,n)=>!!Tf(e,n)||t.has(e,n)}));class Cw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Pw(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Pw(t){return t.getComponent()?.type==="VERSION"}const zc="@firebase/app",If="0.14.6";const xn=new $l("@firebase/app"),Nw="@firebase/app-compat",kw="@firebase/analytics-compat",Ow="@firebase/analytics",Dw="@firebase/app-check-compat",Vw="@firebase/app-check",xw="@firebase/auth",Mw="@firebase/auth-compat",Lw="@firebase/database",Uw="@firebase/data-connect",Fw="@firebase/database-compat",Bw="@firebase/functions",jw="@firebase/functions-compat",$w="@firebase/installations",qw="@firebase/installations-compat",Hw="@firebase/messaging",zw="@firebase/messaging-compat",Gw="@firebase/performance",Kw="@firebase/performance-compat",Ww="@firebase/remote-config",Qw="@firebase/remote-config-compat",Jw="@firebase/storage",Xw="@firebase/storage-compat",Yw="@firebase/firestore",Zw="@firebase/ai",eA="@firebase/firestore-compat",tA="firebase",nA="12.6.0";const Gc="[DEFAULT]",rA={[zc]:"fire-core",[Nw]:"fire-core-compat",[Ow]:"fire-analytics",[kw]:"fire-analytics-compat",[Vw]:"fire-app-check",[Dw]:"fire-app-check-compat",[xw]:"fire-auth",[Mw]:"fire-auth-compat",[Lw]:"fire-rtdb",[Uw]:"fire-data-connect",[Fw]:"fire-rtdb-compat",[Bw]:"fire-fn",[jw]:"fire-fn-compat",[$w]:"fire-iid",[qw]:"fire-iid-compat",[Hw]:"fire-fcm",[zw]:"fire-fcm-compat",[Gw]:"fire-perf",[Kw]:"fire-perf-compat",[Ww]:"fire-rc",[Qw]:"fire-rc-compat",[Jw]:"fire-gcs",[Xw]:"fire-gcs-compat",[Yw]:"fire-fst",[eA]:"fire-fst-compat",[Zw]:"fire-vertex","fire-js":"fire-js",[tA]:"fire-js-all"};const Go=new Map,sA=new Map,Kc=new Map;function wf(t,e){try{t.container.addComponent(e)}catch(n){xn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ur(t){const e=t.name;if(Kc.has(e))return xn.debug(`There were multiple attempts to register component ${e}.`),!1;Kc.set(e,t);for(const n of Go.values())wf(n,t);for(const n of sA.values())wf(n,t);return!0}function wa(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qt(t){return t==null?!1:t.settings!==void 0}const iA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ar=new Fi("app","Firebase",iA);class oA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ar.create("app-deleted",{appName:this._name})}}const qr=nA;function Ag(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Gc,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ar.create("bad-app-name",{appName:String(s)});if(n||(n=vg()),!n)throw ar.create("no-options");const i=Go.get(s);if(i){if(Lr(n,i.options)&&Lr(r,i.config))return i;throw ar.create("duplicate-app",{appName:s})}const o=new fw(s);for(const l of Kc.values())o.addComponent(l);const c=new oA(n,r,o);return Go.set(s,c),c}function Hl(t=Gc){const e=Go.get(t);if(!e&&t===Gc&&vg())return Ag();if(!e)throw ar.create("no-app",{appName:t});return e}function pn(t,e,n){let r=rA[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xn.warn(o.join(" "));return}Ur(new hr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const aA="firebase-heartbeat-database",cA=1,Pi="firebase-heartbeat-store";let _c=null;function bg(){return _c||(_c=bw(aA,cA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Pi)}catch(n){console.warn(n)}}}}).catch(t=>{throw ar.create("idb-open",{originalErrorMessage:t.message})})),_c}async function lA(t){try{const n=(await bg()).transaction(Pi),r=await n.objectStore(Pi).get(Rg(t));return await n.done,r}catch(e){if(e instanceof wn)xn.warn(e.message);else{const n=ar.create("idb-get",{originalErrorMessage:e?.message});xn.warn(n.message)}}}async function Af(t,e){try{const r=(await bg()).transaction(Pi,"readwrite");await r.objectStore(Pi).put(e,Rg(t)),await r.done}catch(n){if(n instanceof wn)xn.warn(n.message);else{const r=ar.create("idb-set",{originalErrorMessage:n?.message});xn.warn(r.message)}}}function Rg(t){return`${t.name}!${t.options.appId}`}const uA=1024,hA=30;class fA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=bf();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>hA){const s=gA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){xn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=bf(),{heartbeatsToSend:n,unsentEntries:r}=dA(this._heartbeatsCache.heartbeats),s=zo(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return xn.warn(e),""}}}function bf(){return new Date().toISOString().substring(0,10)}function dA(t,e=uA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Rf(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Rf(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class pA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ew()?tw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await lA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Af(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Af(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Rf(t){return zo(JSON.stringify({version:2,heartbeats:t})).length}function gA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function mA(t){Ur(new hr("platform-logger",e=>new Cw(e),"PRIVATE")),Ur(new hr("heartbeat",e=>new fA(e),"PRIVATE")),pn(zc,If,t),pn(zc,If,"esm2020"),pn("fire-js","")}mA("");var _A="firebase",yA="12.6.0";pn(_A,yA,"app");const Sg="firebasestorage.googleapis.com",Cg="storageBucket",vA=120*1e3,EA=600*1e3;class je extends wn{constructor(e,n,r=0){super(yc(e),`Firebase Storage: ${n} (${yc(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,je.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return yc(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Be;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Be||(Be={}));function yc(t){return"storage/"+t}function zl(){const t="An unknown error occurred, please check the error payload for server response.";return new je(Be.UNKNOWN,t)}function TA(t){return new je(Be.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function IA(t){return new je(Be.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function wA(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new je(Be.UNAUTHENTICATED,t)}function AA(){return new je(Be.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function bA(t){return new je(Be.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function RA(){return new je(Be.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function SA(){return new je(Be.CANCELED,"User canceled the upload/download.")}function CA(t){return new je(Be.INVALID_URL,"Invalid URL '"+t+"'.")}function PA(t){return new je(Be.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function NA(){return new je(Be.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Cg+"' property when initializing the app?")}function kA(){return new je(Be.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function OA(){return new je(Be.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function DA(t){return new je(Be.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Wc(t){return new je(Be.INVALID_ARGUMENT,t)}function Pg(){return new je(Be.APP_DELETED,"The Firebase app was deleted.")}function VA(t){return new je(Be.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _i(t,e){return new je(Be.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ni(t){throw new je(Be.INTERNAL_ERROR,"Internal error: "+t)}class $t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=$t.makeFromUrl(e,n)}catch{return new $t(e,"")}if(r.path==="")return r;throw PA(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(z){z.path.charAt(z.path.length-1)==="/"&&(z.path_=z.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function h(z){z.path_=decodeURIComponent(z.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${p}/${f}/b/${s}/o${m}`,"i"),P={bucket:1,path:3},k=n===Sg?"(?:storage.googleapis.com|storage.cloud.google.com)":n,O="([^?#]*)",j=new RegExp(`^https?://${k}/${s}/${O}`,"i"),q=[{regex:c,indices:l,postModify:i},{regex:v,indices:P,postModify:h},{regex:j,indices:{bucket:1,path:2},postModify:h}];for(let z=0;z<q.length;z++){const ie=q[z],oe=ie.regex.exec(e);if(oe){const y=oe[ie.indices.bucket];let _=oe[ie.indices.path];_||(_=""),r=new $t(y,_),ie.postModify(r);break}}if(r==null)throw CA(e);return r}}class xA{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function MA(t,e,n){let r=1,s=null,i=null,o=!1,c=0;function l(){return c===2}let h=!1;function f(...O){h||(h=!0,e.apply(null,O))}function p(O){s=setTimeout(()=>{s=null,t(v,l())},O)}function m(){i&&clearTimeout(i)}function v(O,...j){if(h){m();return}if(O){m(),f.call(null,O,...j);return}if(l()||o){m(),f.call(null,O,...j);return}r<64&&(r*=2);let q;c===1?(c=2,q=0):q=(r+Math.random())*1e3,p(q)}let P=!1;function k(O){P||(P=!0,m(),!h&&(s!==null?(O||(c=2),clearTimeout(s),p(0)):O||(c=1)))}return p(0),i=setTimeout(()=>{o=!0,k(!0)},n),k}function LA(t){t(!1)}function UA(t){return t!==void 0}function FA(t){return typeof t=="object"&&!Array.isArray(t)}function Gl(t){return typeof t=="string"||t instanceof String}function Sf(t){return Kl()&&t instanceof Blob}function Kl(){return typeof Blob<"u"}function Cf(t,e,n,r){if(r<e)throw Wc(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Wc(`Invalid value for '${t}'. Expected ${n} or less.`)}function Wl(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Ng(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Vr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Vr||(Vr={}));function BA(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}class jA{constructor(e,n,r,s,i,o,c,l,h,f,p,m=!0,v=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=l,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=p,this.retry=m,this.isUsingEmulator=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,k)=>{this.resolve_=P,this.reject_=k,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new co(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=c=>{const l=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,h)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const c=i.getErrorCode()===Vr.NO_ERROR,l=i.getStatus();if(!c||BA(l,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Vr.ABORT;r(!1,new co(!1,null,f));return}const h=this.successCodes_.indexOf(l)!==-1;r(!0,new co(h,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(c,c.getResponse());UA(l)?i(l):i()}catch(l){o(l)}else if(c!==null){const l=zl();l.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,l)):o(l)}else if(s.canceled){const l=this.appDelete_?Pg():SA();o(l)}else{const l=RA();o(l)}};this.canceled_?n(!1,new co(!1,null,!0)):this.backoffId_=MA(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&LA(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class co{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function $A(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function qA(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function HA(t,e){e&&(t["X-Firebase-GMPID"]=e)}function zA(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function GA(t,e,n,r,s,i,o=!0,c=!1){const l=Ng(t.urlParams),h=t.url+l,f=Object.assign({},t.headers);return HA(f,e),$A(f,n),qA(f,i),zA(f,r),new jA(h,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,c)}function KA(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function WA(...t){const e=KA();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Kl())return new Blob(t);throw new je(Be.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function QA(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function JA(t){if(typeof atob>"u")throw DA("base-64");return atob(t)}const hn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class vc{constructor(e,n){this.data=e,this.contentType=n||null}}function XA(t,e){switch(t){case hn.RAW:return new vc(kg(e));case hn.BASE64:case hn.BASE64URL:return new vc(Og(t,e));case hn.DATA_URL:return new vc(ZA(e),eb(e))}throw zl()}function kg(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function YA(t){let e;try{e=decodeURIComponent(t)}catch{throw _i(hn.DATA_URL,"Malformed data URL.")}return kg(e)}function Og(t,e){switch(t){case hn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw _i(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case hn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw _i(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=JA(e)}catch(s){throw s.message.includes("polyfill")?s:_i(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Dg{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw _i(hn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=tb(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function ZA(t){const e=new Dg(t);return e.base64?Og(hn.BASE64,e.rest):YA(e.rest)}function eb(t){return new Dg(t).contentType}function tb(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}class Yn{constructor(e,n){let r=0,s="";Sf(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Sf(this.data_)){const r=this.data_,s=QA(r,e,n);return s===null?null:new Yn(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Yn(r,!0)}}static getBlob(...e){if(Kl()){const n=e.map(r=>r instanceof Yn?r.data_:r);return new Yn(WA.apply(null,n))}else{const n=e.map(o=>Gl(o)?XA(hn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)s[i++]=o[c]}),new Yn(s,!0)}}uploadData(){return this.data_}}function Vg(t){let e;try{e=JSON.parse(t)}catch{return null}return FA(e)?e:null}function nb(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function rb(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function xg(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function sb(t,e){return e}class wt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||sb}}let lo=null;function ib(t){return!Gl(t)||t.length<2?t:xg(t)}function Mg(){if(lo)return lo;const t=[];t.push(new wt("bucket")),t.push(new wt("generation")),t.push(new wt("metageneration")),t.push(new wt("name","fullPath",!0));function e(i,o){return ib(o)}const n=new wt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new wt("size");return s.xform=r,t.push(s),t.push(new wt("timeCreated")),t.push(new wt("updated")),t.push(new wt("md5Hash",null,!0)),t.push(new wt("cacheControl",null,!0)),t.push(new wt("contentDisposition",null,!0)),t.push(new wt("contentEncoding",null,!0)),t.push(new wt("contentLanguage",null,!0)),t.push(new wt("contentType",null,!0)),t.push(new wt("metadata","customMetadata",!0)),lo=t,lo}function ob(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new $t(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function ab(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return ob(r,t),r}function Lg(t,e,n){const r=Vg(e);return r===null?null:ab(t,r,n)}function cb(t,e,n,r){const s=Vg(e);if(s===null||!Gl(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(h=>{const f=t.bucket,p=t.fullPath,m="/b/"+o(f)+"/o/"+o(p),v=Wl(m,n,r),P=Ng({alt:"media",token:h});return v+P})[0]}function lb(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Ug{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Fg(t){if(!t)throw zl()}function ub(t,e){function n(r,s){const i=Lg(t,s,e);return Fg(i!==null),i}return n}function hb(t,e){function n(r,s){const i=Lg(t,s,e);return Fg(i!==null),cb(i,s,t.host,t._protocol)}return n}function Bg(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=AA():s=wA():n.getStatus()===402?s=IA(t.bucket):n.getStatus()===403?s=bA(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function fb(t){const e=Bg(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=TA(t.path)),i.serverResponse=s.serverResponse,i}return n}function db(t,e,n){const r=e.fullServerUrl(),s=Wl(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,c=new Ug(s,i,hb(t,n),o);return c.errorHandler=fb(e),c}function pb(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function gb(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=pb(null,e)),r}function mb(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let q="";for(let z=0;z<2;z++)q=q+Math.random().toString().slice(2);return q}const l=c();o["Content-Type"]="multipart/related; boundary="+l;const h=gb(e,r,s),f=lb(h,n),p="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+l+`\r
Content-Type: `+h.contentType+`\r
\r
`,m=`\r
--`+l+"--",v=Yn.getBlob(p,r,m);if(v===null)throw kA();const P={name:h.fullPath},k=Wl(i,t.host,t._protocol),O="POST",j=t.maxUploadRetryTime,F=new Ug(k,O,ub(t,n),j);return F.urlParams=P,F.headers=o,F.body=v.uploadData(),F.errorHandler=Bg(e),F}class _b{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Vr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Vr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Vr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw ni("cannot .send() more than once");if(vr(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ni("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ni("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ni("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ni("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class yb extends _b{initXhr(){this.xhr_.responseType="text"}}function jg(){return new yb}class Fr{constructor(e,n){this._service=e,n instanceof $t?this._location=n:this._location=$t.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Fr(e,n)}get root(){const e=new $t(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xg(this._location.path)}get storage(){return this._service}get parent(){const e=nb(this._location.path);if(e===null)return null;const n=new $t(this._location.bucket,e);return new Fr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw VA(e)}}function vb(t,e,n){t._throwIfRoot("uploadBytes");const r=mb(t.storage,t._location,Mg(),new Yn(e,!0),n);return t.storage.makeRequestWithTokens(r,jg).then(s=>({metadata:s,ref:t}))}function Eb(t){t._throwIfRoot("getDownloadURL");const e=db(t.storage,t._location,Mg());return t.storage.makeRequestWithTokens(e,jg).then(n=>{if(n===null)throw OA();return n})}function Tb(t,e){const n=rb(t._location.path,e),r=new $t(t._location.bucket,n);return new Fr(t.storage,r)}function Ib(t){return/^[A-Za-z]+:\/\//.test(t)}function wb(t,e){return new Fr(t,e)}function $g(t,e){if(t instanceof Ql){const n=t;if(n._bucket==null)throw NA();const r=new Fr(n,n._bucket);return e!=null?$g(r,e):r}else return e!==void 0?Tb(t,e):t}function Ab(t,e){if(e&&Ib(e)){if(t instanceof Ql)return wb(t,e);throw Wc("To use ref(service, url), the first argument must be a Storage instance.")}else return $g(t,e)}function Pf(t,e){const n=e?.[Cg];return n==null?null:$t.makeFromBucketSpec(n,t)}function bb(t,e,n,r={}){t.host=`${e}:${n}`;const s=vr(e);s&&(Bl(`https://${t.host}/b`),jl("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Tg(i,t.app.options.projectId))}class Ql{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=Sg,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vA,this._maxUploadRetryTime=EA,this._requests=new Set,s!=null?this._bucket=$t.makeFromBucketSpec(s,this._host):this._bucket=Pf(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=$t.makeFromBucketSpec(this._url,e):this._bucket=Pf(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Cf("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Cf("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fr(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new xA(Pg());{const o=GA(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Nf="@firebase/storage",kf="0.14.0";const qg="storage";function Rb(t,e,n){return t=Ct(t),vb(t,e,n)}function Sb(t){return t=Ct(t),Eb(t)}function Cb(t,e){return t=Ct(t),Ab(t,e)}function Pb(t=Hl(),e){t=Ct(t);const r=wa(t,qg).getImmediate({identifier:e}),s=yg("storage");return s&&Nb(r,...s),r}function Nb(t,e,n,r={}){bb(t,e,n,r)}function kb(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Ql(n,r,s,e,qr)}function Ob(){Ur(new hr(qg,kb,"PUBLIC").setMultipleInstances(!0)),pn(Nf,kf,""),pn(Nf,kf,"esm2020")}Ob();var Of=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var cr,Hg;(function(){var t;function e(y,_){function I(){}I.prototype=_.prototype,y.F=_.prototype,y.prototype=new I,y.prototype.constructor=y,y.D=function(b,A,S){for(var T=Array(arguments.length-2),He=2;He<arguments.length;He++)T[He-2]=arguments[He];return _.prototype[A].apply(b,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(y,_,I){I||(I=0);const b=Array(16);if(typeof _=="string")for(var A=0;A<16;++A)b[A]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(A=0;A<16;++A)b[A]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=y.g[0],I=y.g[1],A=y.g[2];let S=y.g[3],T;T=_+(S^I&(A^S))+b[0]+3614090360&4294967295,_=I+(T<<7&4294967295|T>>>25),T=S+(A^_&(I^A))+b[1]+3905402710&4294967295,S=_+(T<<12&4294967295|T>>>20),T=A+(I^S&(_^I))+b[2]+606105819&4294967295,A=S+(T<<17&4294967295|T>>>15),T=I+(_^A&(S^_))+b[3]+3250441966&4294967295,I=A+(T<<22&4294967295|T>>>10),T=_+(S^I&(A^S))+b[4]+4118548399&4294967295,_=I+(T<<7&4294967295|T>>>25),T=S+(A^_&(I^A))+b[5]+1200080426&4294967295,S=_+(T<<12&4294967295|T>>>20),T=A+(I^S&(_^I))+b[6]+2821735955&4294967295,A=S+(T<<17&4294967295|T>>>15),T=I+(_^A&(S^_))+b[7]+4249261313&4294967295,I=A+(T<<22&4294967295|T>>>10),T=_+(S^I&(A^S))+b[8]+1770035416&4294967295,_=I+(T<<7&4294967295|T>>>25),T=S+(A^_&(I^A))+b[9]+2336552879&4294967295,S=_+(T<<12&4294967295|T>>>20),T=A+(I^S&(_^I))+b[10]+4294925233&4294967295,A=S+(T<<17&4294967295|T>>>15),T=I+(_^A&(S^_))+b[11]+2304563134&4294967295,I=A+(T<<22&4294967295|T>>>10),T=_+(S^I&(A^S))+b[12]+1804603682&4294967295,_=I+(T<<7&4294967295|T>>>25),T=S+(A^_&(I^A))+b[13]+4254626195&4294967295,S=_+(T<<12&4294967295|T>>>20),T=A+(I^S&(_^I))+b[14]+2792965006&4294967295,A=S+(T<<17&4294967295|T>>>15),T=I+(_^A&(S^_))+b[15]+1236535329&4294967295,I=A+(T<<22&4294967295|T>>>10),T=_+(A^S&(I^A))+b[1]+4129170786&4294967295,_=I+(T<<5&4294967295|T>>>27),T=S+(I^A&(_^I))+b[6]+3225465664&4294967295,S=_+(T<<9&4294967295|T>>>23),T=A+(_^I&(S^_))+b[11]+643717713&4294967295,A=S+(T<<14&4294967295|T>>>18),T=I+(S^_&(A^S))+b[0]+3921069994&4294967295,I=A+(T<<20&4294967295|T>>>12),T=_+(A^S&(I^A))+b[5]+3593408605&4294967295,_=I+(T<<5&4294967295|T>>>27),T=S+(I^A&(_^I))+b[10]+38016083&4294967295,S=_+(T<<9&4294967295|T>>>23),T=A+(_^I&(S^_))+b[15]+3634488961&4294967295,A=S+(T<<14&4294967295|T>>>18),T=I+(S^_&(A^S))+b[4]+3889429448&4294967295,I=A+(T<<20&4294967295|T>>>12),T=_+(A^S&(I^A))+b[9]+568446438&4294967295,_=I+(T<<5&4294967295|T>>>27),T=S+(I^A&(_^I))+b[14]+3275163606&4294967295,S=_+(T<<9&4294967295|T>>>23),T=A+(_^I&(S^_))+b[3]+4107603335&4294967295,A=S+(T<<14&4294967295|T>>>18),T=I+(S^_&(A^S))+b[8]+1163531501&4294967295,I=A+(T<<20&4294967295|T>>>12),T=_+(A^S&(I^A))+b[13]+2850285829&4294967295,_=I+(T<<5&4294967295|T>>>27),T=S+(I^A&(_^I))+b[2]+4243563512&4294967295,S=_+(T<<9&4294967295|T>>>23),T=A+(_^I&(S^_))+b[7]+1735328473&4294967295,A=S+(T<<14&4294967295|T>>>18),T=I+(S^_&(A^S))+b[12]+2368359562&4294967295,I=A+(T<<20&4294967295|T>>>12),T=_+(I^A^S)+b[5]+4294588738&4294967295,_=I+(T<<4&4294967295|T>>>28),T=S+(_^I^A)+b[8]+2272392833&4294967295,S=_+(T<<11&4294967295|T>>>21),T=A+(S^_^I)+b[11]+1839030562&4294967295,A=S+(T<<16&4294967295|T>>>16),T=I+(A^S^_)+b[14]+4259657740&4294967295,I=A+(T<<23&4294967295|T>>>9),T=_+(I^A^S)+b[1]+2763975236&4294967295,_=I+(T<<4&4294967295|T>>>28),T=S+(_^I^A)+b[4]+1272893353&4294967295,S=_+(T<<11&4294967295|T>>>21),T=A+(S^_^I)+b[7]+4139469664&4294967295,A=S+(T<<16&4294967295|T>>>16),T=I+(A^S^_)+b[10]+3200236656&4294967295,I=A+(T<<23&4294967295|T>>>9),T=_+(I^A^S)+b[13]+681279174&4294967295,_=I+(T<<4&4294967295|T>>>28),T=S+(_^I^A)+b[0]+3936430074&4294967295,S=_+(T<<11&4294967295|T>>>21),T=A+(S^_^I)+b[3]+3572445317&4294967295,A=S+(T<<16&4294967295|T>>>16),T=I+(A^S^_)+b[6]+76029189&4294967295,I=A+(T<<23&4294967295|T>>>9),T=_+(I^A^S)+b[9]+3654602809&4294967295,_=I+(T<<4&4294967295|T>>>28),T=S+(_^I^A)+b[12]+3873151461&4294967295,S=_+(T<<11&4294967295|T>>>21),T=A+(S^_^I)+b[15]+530742520&4294967295,A=S+(T<<16&4294967295|T>>>16),T=I+(A^S^_)+b[2]+3299628645&4294967295,I=A+(T<<23&4294967295|T>>>9),T=_+(A^(I|~S))+b[0]+4096336452&4294967295,_=I+(T<<6&4294967295|T>>>26),T=S+(I^(_|~A))+b[7]+1126891415&4294967295,S=_+(T<<10&4294967295|T>>>22),T=A+(_^(S|~I))+b[14]+2878612391&4294967295,A=S+(T<<15&4294967295|T>>>17),T=I+(S^(A|~_))+b[5]+4237533241&4294967295,I=A+(T<<21&4294967295|T>>>11),T=_+(A^(I|~S))+b[12]+1700485571&4294967295,_=I+(T<<6&4294967295|T>>>26),T=S+(I^(_|~A))+b[3]+2399980690&4294967295,S=_+(T<<10&4294967295|T>>>22),T=A+(_^(S|~I))+b[10]+4293915773&4294967295,A=S+(T<<15&4294967295|T>>>17),T=I+(S^(A|~_))+b[1]+2240044497&4294967295,I=A+(T<<21&4294967295|T>>>11),T=_+(A^(I|~S))+b[8]+1873313359&4294967295,_=I+(T<<6&4294967295|T>>>26),T=S+(I^(_|~A))+b[15]+4264355552&4294967295,S=_+(T<<10&4294967295|T>>>22),T=A+(_^(S|~I))+b[6]+2734768916&4294967295,A=S+(T<<15&4294967295|T>>>17),T=I+(S^(A|~_))+b[13]+1309151649&4294967295,I=A+(T<<21&4294967295|T>>>11),T=_+(A^(I|~S))+b[4]+4149444226&4294967295,_=I+(T<<6&4294967295|T>>>26),T=S+(I^(_|~A))+b[11]+3174756917&4294967295,S=_+(T<<10&4294967295|T>>>22),T=A+(_^(S|~I))+b[2]+718787259&4294967295,A=S+(T<<15&4294967295|T>>>17),T=I+(S^(A|~_))+b[9]+3951481745&4294967295,y.g[0]=y.g[0]+_&4294967295,y.g[1]=y.g[1]+(A+(T<<21&4294967295|T>>>11))&4294967295,y.g[2]=y.g[2]+A&4294967295,y.g[3]=y.g[3]+S&4294967295}r.prototype.v=function(y,_){_===void 0&&(_=y.length);const I=_-this.blockSize,b=this.C;let A=this.h,S=0;for(;S<_;){if(A==0)for(;S<=I;)s(this,y,S),S+=this.blockSize;if(typeof y=="string"){for(;S<_;)if(b[A++]=y.charCodeAt(S++),A==this.blockSize){s(this,b),A=0;break}}else for(;S<_;)if(b[A++]=y[S++],A==this.blockSize){s(this,b),A=0;break}}this.h=A,this.o+=_},r.prototype.A=function(){var y=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);y[0]=128;for(var _=1;_<y.length-8;++_)y[_]=0;_=this.o*8;for(var I=y.length-8;I<y.length;++I)y[I]=_&255,_/=256;for(this.v(y),y=Array(16),_=0,I=0;I<4;++I)for(let b=0;b<32;b+=8)y[_++]=this.g[I]>>>b&255;return y};function i(y,_){var I=c;return Object.prototype.hasOwnProperty.call(I,y)?I[y]:I[y]=_(y)}function o(y,_){this.h=_;const I=[];let b=!0;for(let A=y.length-1;A>=0;A--){const S=y[A]|0;b&&S==_||(I[A]=S,b=!1)}this.g=I}var c={};function l(y){return-128<=y&&y<128?i(y,function(_){return new o([_|0],_<0?-1:0)}):new o([y|0],y<0?-1:0)}function h(y){if(isNaN(y)||!isFinite(y))return p;if(y<0)return O(h(-y));const _=[];let I=1;for(let b=0;y>=I;b++)_[b]=y/I|0,I*=4294967296;return new o(_,0)}function f(y,_){if(y.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(y.charAt(0)=="-")return O(f(y.substring(1),_));if(y.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=h(Math.pow(_,8));let b=p;for(let S=0;S<y.length;S+=8){var A=Math.min(8,y.length-S);const T=parseInt(y.substring(S,S+A),_);A<8?(A=h(Math.pow(_,A)),b=b.j(A).add(h(T))):(b=b.j(I),b=b.add(h(T)))}return b}var p=l(0),m=l(1),v=l(16777216);t=o.prototype,t.m=function(){if(k(this))return-O(this).m();let y=0,_=1;for(let I=0;I<this.g.length;I++){const b=this.i(I);y+=(b>=0?b:4294967296+b)*_,_*=4294967296}return y},t.toString=function(y){if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(P(this))return"0";if(k(this))return"-"+O(this).toString(y);const _=h(Math.pow(y,6));var I=this;let b="";for(;;){const A=z(I,_).g;I=j(I,A.j(_));let S=((I.g.length>0?I.g[0]:I.h)>>>0).toString(y);if(I=A,P(I))return S+b;for(;S.length<6;)S="0"+S;b=S+b}},t.i=function(y){return y<0?0:y<this.g.length?this.g[y]:this.h};function P(y){if(y.h!=0)return!1;for(let _=0;_<y.g.length;_++)if(y.g[_]!=0)return!1;return!0}function k(y){return y.h==-1}t.l=function(y){return y=j(this,y),k(y)?-1:P(y)?0:1};function O(y){const _=y.g.length,I=[];for(let b=0;b<_;b++)I[b]=~y.g[b];return new o(I,~y.h).add(m)}t.abs=function(){return k(this)?O(this):this},t.add=function(y){const _=Math.max(this.g.length,y.g.length),I=[];let b=0;for(let A=0;A<=_;A++){let S=b+(this.i(A)&65535)+(y.i(A)&65535),T=(S>>>16)+(this.i(A)>>>16)+(y.i(A)>>>16);b=T>>>16,S&=65535,T&=65535,I[A]=T<<16|S}return new o(I,I[I.length-1]&-2147483648?-1:0)};function j(y,_){return y.add(O(_))}t.j=function(y){if(P(this)||P(y))return p;if(k(this))return k(y)?O(this).j(O(y)):O(O(this).j(y));if(k(y))return O(this.j(O(y)));if(this.l(v)<0&&y.l(v)<0)return h(this.m()*y.m());const _=this.g.length+y.g.length,I=[];for(var b=0;b<2*_;b++)I[b]=0;for(b=0;b<this.g.length;b++)for(let A=0;A<y.g.length;A++){const S=this.i(b)>>>16,T=this.i(b)&65535,He=y.i(A)>>>16,Pt=y.i(A)&65535;I[2*b+2*A]+=T*Pt,F(I,2*b+2*A),I[2*b+2*A+1]+=S*Pt,F(I,2*b+2*A+1),I[2*b+2*A+1]+=T*He,F(I,2*b+2*A+1),I[2*b+2*A+2]+=S*He,F(I,2*b+2*A+2)}for(y=0;y<_;y++)I[y]=I[2*y+1]<<16|I[2*y];for(y=_;y<2*_;y++)I[y]=0;return new o(I,0)};function F(y,_){for(;(y[_]&65535)!=y[_];)y[_+1]+=y[_]>>>16,y[_]&=65535,_++}function q(y,_){this.g=y,this.h=_}function z(y,_){if(P(_))throw Error("division by zero");if(P(y))return new q(p,p);if(k(y))return _=z(O(y),_),new q(O(_.g),O(_.h));if(k(_))return _=z(y,O(_)),new q(O(_.g),_.h);if(y.g.length>30){if(k(y)||k(_))throw Error("slowDivide_ only works with positive integers.");for(var I=m,b=_;b.l(y)<=0;)I=ie(I),b=ie(b);var A=oe(I,1),S=oe(b,1);for(b=oe(b,2),I=oe(I,2);!P(b);){var T=S.add(b);T.l(y)<=0&&(A=A.add(I),S=T),b=oe(b,1),I=oe(I,1)}return _=j(y,A.j(_)),new q(A,_)}for(A=p;y.l(_)>=0;){for(I=Math.max(1,Math.floor(y.m()/_.m())),b=Math.ceil(Math.log(I)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),S=h(I),T=S.j(_);k(T)||T.l(y)>0;)I-=b,S=h(I),T=S.j(_);P(S)&&(S=m),A=A.add(S),y=j(y,T)}return new q(A,y)}t.B=function(y){return z(this,y).h},t.and=function(y){const _=Math.max(this.g.length,y.g.length),I=[];for(let b=0;b<_;b++)I[b]=this.i(b)&y.i(b);return new o(I,this.h&y.h)},t.or=function(y){const _=Math.max(this.g.length,y.g.length),I=[];for(let b=0;b<_;b++)I[b]=this.i(b)|y.i(b);return new o(I,this.h|y.h)},t.xor=function(y){const _=Math.max(this.g.length,y.g.length),I=[];for(let b=0;b<_;b++)I[b]=this.i(b)^y.i(b);return new o(I,this.h^y.h)};function ie(y){const _=y.g.length+1,I=[];for(let b=0;b<_;b++)I[b]=y.i(b)<<1|y.i(b-1)>>>31;return new o(I,y.h)}function oe(y,_){const I=_>>5;_%=32;const b=y.g.length-I,A=[];for(let S=0;S<b;S++)A[S]=_>0?y.i(S+I)>>>_|y.i(S+I+1)<<32-_:y.i(S+I);return new o(A,y.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Hg=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,cr=o}).apply(typeof Of<"u"?Of:typeof self<"u"?self:typeof window<"u"?window:{});var uo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var zg,si,Gg,Ao,Qc,Kg,Wg,Qg;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof uo=="object"&&uo];for(var u=0;u<a.length;++u){var d=a[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function s(a,u){if(u)e:{var d=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var C=a[g];if(!(C in d))break e;d=d[C]}a=a[a.length-1],g=d[a],u=u(g),u!=g&&u!=null&&e(d,a,{configurable:!0,writable:!0,value:u})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(u){var d=[],g;for(g in u)Object.prototype.hasOwnProperty.call(u,g)&&d.push([g,u[g]]);return d}});var i=i||{},o=this||self;function c(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function l(a,u,d){return a.call.apply(a.bind,arguments)}function h(a,u,d){return h=l,h.apply(null,arguments)}function f(a,u){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function p(a,u){function d(){}d.prototype=u.prototype,a.Z=u.prototype,a.prototype=new d,a.prototype.constructor=a,a.Ob=function(g,C,N){for(var G=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)G[fe-2]=arguments[fe];return u.prototype[C].apply(g,G)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function v(a){const u=a.length;if(u>0){const d=Array(u);for(let g=0;g<u;g++)d[g]=a[g];return d}return[]}function P(a,u){for(let g=1;g<arguments.length;g++){const C=arguments[g];var d=typeof C;if(d=d!="object"?d:C?Array.isArray(C)?"array":d:"null",d=="array"||d=="object"&&typeof C.length=="number"){d=a.length||0;const N=C.length||0;a.length=d+N;for(let G=0;G<N;G++)a[d+G]=C[G]}else a.push(C)}}class k{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return this.h>0?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function O(a){o.setTimeout(()=>{throw a},0)}function j(){var a=y;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class F{constructor(){this.h=this.g=null}add(u,d){const g=q.get();g.set(u,d),this.h?this.h.next=g:this.g=g,this.h=g}}var q=new k(()=>new z,a=>a.reset());class z{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,oe=!1,y=new F,_=()=>{const a=Promise.resolve(void 0);ie=()=>{a.then(I)}};function I(){for(var a;a=j();){try{a.h.call(a.g)}catch(d){O(d)}var u=q;u.j(a),u.h<100&&(u.h++,a.next=u.g,u.g=a)}oe=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};o.addEventListener("test",d,u),o.removeEventListener("test",d,u)}catch{}return a})();function T(a){return/^[\s\xa0]*$/.test(a)}function He(a,u){A.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,u)}p(He,A),He.prototype.init=function(a,u){const d=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget,u||(d=="mouseover"?u=a.fromElement:d=="mouseout"&&(u=a.toElement)),this.relatedTarget=u,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&He.Z.h.call(this)},He.prototype.h=function(){He.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Pt="closure_listenable_"+(Math.random()*1e6|0),ze=0;function Ie(a,u,d,g,C){this.listener=a,this.proxy=null,this.src=u,this.type=d,this.capture=!!g,this.ha=C,this.key=++ze,this.da=this.fa=!1}function me(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Nt(a,u,d){for(const g in a)u.call(d,a[g],g,a)}function tn(a,u){for(const d in a)u.call(void 0,a[d],d,a)}function xt(a){const u={};for(const d in a)u[d]=a[d];return u}const it="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function An(a,u){let d,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(d in g)a[d]=g[d];for(let N=0;N<it.length;N++)d=it[N],Object.prototype.hasOwnProperty.call(g,d)&&(a[d]=g[d])}}function Kt(a){this.src=a,this.g={},this.h=0}Kt.prototype.add=function(a,u,d,g,C){const N=a.toString();a=this.g[N],a||(a=this.g[N]=[],this.h++);const G=ut(a,u,g,C);return G>-1?(u=a[G],d||(u.fa=!1)):(u=new Ie(u,this.src,N,!!g,C),u.fa=d,a.push(u)),u};function Wt(a,u){const d=u.type;if(d in a.g){var g=a.g[d],C=Array.prototype.indexOf.call(g,u,void 0),N;(N=C>=0)&&Array.prototype.splice.call(g,C,1),N&&(me(u),a.g[d].length==0&&(delete a.g[d],a.h--))}}function ut(a,u,d,g){for(let C=0;C<a.length;++C){const N=a[C];if(!N.da&&N.listener==u&&N.capture==!!d&&N.ha==g)return C}return-1}var V="closure_lm_"+(Math.random()*1e6|0),X={};function Q(a,u,d,g,C){if(Array.isArray(u)){for(let N=0;N<u.length;N++)Q(a,u[N],d,g,C);return null}return d=W(d),a&&a[Pt]?a.J(u,d,c(g)?!!g.capture:!1,C):ee(a,u,d,!1,g,C)}function ee(a,u,d,g,C,N){if(!u)throw Error("Invalid event type");const G=c(C)?!!C.capture:!!C;let fe=L(a);if(fe||(a[V]=fe=new Kt(a)),d=fe.add(u,d,g,G,N),d.proxy)return d;if(g=pe(),d.proxy=g,g.src=a,g.listener=d,a.addEventListener)S||(C=G),C===void 0&&(C=!1),a.addEventListener(u.toString(),g,C);else if(a.attachEvent)a.attachEvent(R(u.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function pe(){function a(d){return u.call(a.src,a.listener,d)}const u=x;return a}function E(a,u,d,g,C){if(Array.isArray(u))for(var N=0;N<u.length;N++)E(a,u[N],d,g,C);else g=c(g)?!!g.capture:!!g,d=W(d),a&&a[Pt]?(a=a.i,N=String(u).toString(),N in a.g&&(u=a.g[N],d=ut(u,d,g,C),d>-1&&(me(u[d]),Array.prototype.splice.call(u,d,1),u.length==0&&(delete a.g[N],a.h--)))):a&&(a=L(a))&&(u=a.g[u.toString()],a=-1,u&&(a=ut(u,d,g,C)),(d=a>-1?u[a]:null)&&w(d))}function w(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[Pt])Wt(u.i,a);else{var d=a.type,g=a.proxy;u.removeEventListener?u.removeEventListener(d,g,a.capture):u.detachEvent?u.detachEvent(R(d),g):u.addListener&&u.removeListener&&u.removeListener(g),(d=L(u))?(Wt(d,a),d.h==0&&(d.src=null,u[V]=null)):me(a)}}}function R(a){return a in X?X[a]:X[a]="on"+a}function x(a,u){if(a.da)a=!0;else{u=new He(u,this);const d=a.listener,g=a.ha||a.src;a.fa&&w(a),a=d.call(g,u)}return a}function L(a){return a=a[V],a instanceof Kt?a:null}var D="__closure_events_fn_"+(Math.random()*1e9>>>0);function W(a){return typeof a=="function"?a:(a[D]||(a[D]=function(u){return a.handleEvent(u)}),a[D])}function $(){b.call(this),this.i=new Kt(this),this.M=this,this.G=null}p($,b),$.prototype[Pt]=!0,$.prototype.removeEventListener=function(a,u,d,g){E(this,a,u,d,g)};function B(a,u){var d,g=a.G;if(g)for(d=[];g;g=g.G)d.push(g);if(a=a.M,g=u.type||u,typeof u=="string")u=new A(u,a);else if(u instanceof A)u.target=u.target||a;else{var C=u;u=new A(g,a),An(u,C)}C=!0;let N,G;if(d)for(G=d.length-1;G>=0;G--)N=u.g=d[G],C=U(N,g,!0,u)&&C;if(N=u.g=a,C=U(N,g,!0,u)&&C,C=U(N,g,!1,u)&&C,d)for(G=0;G<d.length;G++)N=u.g=d[G],C=U(N,g,!1,u)&&C}$.prototype.N=function(){if($.Z.N.call(this),this.i){var a=this.i;for(const u in a.g){const d=a.g[u];for(let g=0;g<d.length;g++)me(d[g]);delete a.g[u],a.h--}}this.G=null},$.prototype.J=function(a,u,d,g){return this.i.add(String(a),u,!1,d,g)},$.prototype.K=function(a,u,d,g){return this.i.add(String(a),u,!0,d,g)};function U(a,u,d,g){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();let C=!0;for(let N=0;N<u.length;++N){const G=u[N];if(G&&!G.da&&G.capture==d){const fe=G.listener,Je=G.ha||G.src;G.fa&&Wt(a.i,G),C=fe.call(Je,g)!==!1&&C}}return C&&!g.defaultPrevented}function ne(a,u){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(u)>2147483647?-1:o.setTimeout(a,u||0)}function J(a){a.g=ne(()=>{a.g=null,a.i&&(a.i=!1,J(a))},a.l);const u=a.h;a.h=null,a.m.apply(null,u)}class te extends b{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:J(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function re(a){b.call(this),this.h=a,this.g={}}p(re,b);var de=[];function Re(a){Nt(a.g,function(u,d){this.g.hasOwnProperty(d)&&w(u)},a),a.g={}}re.prototype.N=function(){re.Z.N.call(this),Re(this)},re.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ee=o.JSON.stringify,ht=o.JSON.parse,ft=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Mt(){}function Lt(){}var Qt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gr(){A.call(this,"d")}p(Gr,A);function ot(){A.call(this,"c")}p(ot,A);var tt={},Ls=null;function Er(){return Ls=Ls||new $}tt.Ia="serverreachability";function Du(a){A.call(this,tt.Ia,a)}p(Du,A);function Us(a){const u=Er();B(u,new Du(u))}tt.STAT_EVENT="statevent";function Vu(a,u){A.call(this,tt.STAT_EVENT,a),this.stat=u}p(Vu,A);function It(a){const u=Er();B(u,new Vu(u,a))}tt.Ja="timingevent";function xu(a,u){A.call(this,tt.Ja,a),this.size=u}p(xu,A);function Fs(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},u)}function Bs(){this.g=!0}Bs.prototype.ua=function(){this.g=!1};function $_(a,u,d,g,C,N){a.info(function(){if(a.g)if(N){var G="",fe=N.split("&");for(let Se=0;Se<fe.length;Se++){var Je=fe[Se].split("=");if(Je.length>1){const nt=Je[0];Je=Je[1];const rn=nt.split("_");G=rn.length>=2&&rn[1]=="type"?G+(nt+"="+Je+"&"):G+(nt+"=redacted&")}}}else G=null;else G=N;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+u+`
`+d+`
`+G})}function q_(a,u,d,g,C,N,G){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+u+`
`+d+`
`+N+" "+G})}function Kr(a,u,d,g){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+z_(a,d)+(g?" "+g:"")})}function H_(a,u){a.info(function(){return"TIMEOUT: "+u})}Bs.prototype.info=function(){};function z_(a,u){if(!a.g)return u;if(!u)return null;try{const N=JSON.parse(u);if(N){for(a=0;a<N.length;a++)if(Array.isArray(N[a])){var d=N[a];if(!(d.length<2)){var g=d[1];if(Array.isArray(g)&&!(g.length<1)){var C=g[0];if(C!="noop"&&C!="stop"&&C!="close")for(let G=1;G<g.length;G++)g[G]=""}}}}return Ee(N)}catch{return u}}var Wi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Mu={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Lu;function Ba(){}p(Ba,Mt),Ba.prototype.g=function(){return new XMLHttpRequest},Lu=new Ba;function js(a){return encodeURIComponent(String(a))}function G_(a){var u=1;a=a.split(":");const d=[];for(;u>0&&a.length;)d.push(a.shift()),u--;return a.length&&d.push(a.join(":")),d}function Bn(a,u,d,g){this.j=a,this.i=u,this.l=d,this.S=g||1,this.V=new re(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Uu}function Uu(){this.i=null,this.g="",this.h=!1}var Fu={},ja={};function $a(a,u,d){a.M=1,a.A=Ji(nn(u)),a.u=d,a.R=!0,Bu(a,null)}function Bu(a,u){a.F=Date.now(),Qi(a),a.B=nn(a.A);var d=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),Zu(d.i,"t",g),a.C=0,d=a.j.L,a.h=new Uu,a.g=_h(a.j,d?u:null,!a.u),a.P>0&&(a.O=new te(h(a.Y,a,a.g),a.P)),u=a.V,d=a.g,g=a.ba;var C="readystatechange";Array.isArray(C)||(C&&(de[0]=C.toString()),C=de);for(let N=0;N<C.length;N++){const G=Q(d,C[N],g||u.handleEvent,!1,u.h||u);if(!G)break;u.g[G.key]=G}u=a.J?xt(a.J):{},a.u?(a.v||(a.v="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,u)):(a.v="GET",a.g.ea(a.B,a.v,null,u)),Us(),$_(a.i,a.v,a.B,a.l,a.S,a.u)}Bn.prototype.ba=function(a){a=a.target;const u=this.O;u&&qn(a)==3?u.j():this.Y(a)},Bn.prototype.Y=function(a){try{if(a==this.g)e:{const fe=qn(this.g),Je=this.g.ya(),Se=this.g.ca();if(!(fe<3)&&(fe!=3||this.g&&(this.h.h||this.g.la()||oh(this.g)))){this.K||fe!=4||Je==7||(Je==8||Se<=0?Us(3):Us(2)),qa(this);var u=this.g.ca();this.X=u;var d=K_(this);if(this.o=u==200,q_(this.i,this.v,this.B,this.l,this.S,fe,u),this.o){if(this.U&&!this.L){t:{if(this.g){var g,C=this.g;if((g=C.g?C.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(g)){var N=g;break t}}N=null}if(a=N)Kr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ha(this,a);else{this.o=!1,this.m=3,It(12),Tr(this),$s(this);break e}}if(this.R){a=!0;let nt;for(;!this.K&&this.C<d.length;)if(nt=W_(this,d),nt==ja){fe==4&&(this.m=4,It(14),a=!1),Kr(this.i,this.l,null,"[Incomplete Response]");break}else if(nt==Fu){this.m=4,It(15),Kr(this.i,this.l,d,"[Invalid Chunk]"),a=!1;break}else Kr(this.i,this.l,nt,null),Ha(this,nt);if(ju(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),fe!=4||d.length!=0||this.h.h||(this.m=1,It(16),a=!1),this.o=this.o&&a,!a)Kr(this.i,this.l,d,"[Invalid Chunked Response]"),Tr(this),$s(this);else if(d.length>0&&!this.W){this.W=!0;var G=this.j;G.g==this&&G.aa&&!G.P&&(G.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),Ya(G),G.P=!0,It(11))}}else Kr(this.i,this.l,d,null),Ha(this,d);fe==4&&Tr(this),this.o&&!this.K&&(fe==4?dh(this.j,this):(this.o=!1,Qi(this)))}else cy(this.g),u==400&&d.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),Tr(this),$s(this)}}}catch{}finally{}};function K_(a){if(!ju(a))return a.g.la();const u=oh(a.g);if(u==="")return"";let d="";const g=u.length,C=qn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Tr(a),$s(a),"";a.h.i=new o.TextDecoder}for(let N=0;N<g;N++)a.h.h=!0,d+=a.h.i.decode(u[N],{stream:!(C&&N==g-1)});return u.length=0,a.h.g+=d,a.C=0,a.h.g}function ju(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function W_(a,u){var d=a.C,g=u.indexOf(`
`,d);return g==-1?ja:(d=Number(u.substring(d,g)),isNaN(d)?Fu:(g+=1,g+d>u.length?ja:(u=u.slice(g,g+d),a.C=g+d,u)))}Bn.prototype.cancel=function(){this.K=!0,Tr(this)};function Qi(a){a.T=Date.now()+a.H,$u(a,a.H)}function $u(a,u){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Fs(h(a.aa,a),u)}function qa(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Bn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(H_(this.i,this.B),this.M!=2&&(Us(),It(17)),Tr(this),this.m=2,$s(this)):$u(this,this.T-a)};function $s(a){a.j.I==0||a.K||dh(a.j,a)}function Tr(a){qa(a);var u=a.O;u&&typeof u.dispose=="function"&&u.dispose(),a.O=null,Re(a.V),a.g&&(u=a.g,a.g=null,u.abort(),u.dispose())}function Ha(a,u){try{var d=a.j;if(d.I!=0&&(d.g==a||za(d.h,a))){if(!a.L&&za(d.h,a)&&d.I==3){try{var g=d.Ba.g.parse(u)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<a.F)to(d),Zi(d);else break e;Xa(d),It(18)}}else d.xa=C[1],0<d.xa-d.K&&C[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=Fs(h(d.Va,d),6e3));zu(d.h)<=1&&d.ta&&(d.ta=void 0)}else wr(d,11)}else if((a.L||d.g==a)&&to(d),!T(u))for(C=d.Ba.g.parse(u),u=0;u<C.length;u++){let Se=C[u];const nt=Se[0];if(!(nt<=d.K))if(d.K=nt,Se=Se[1],d.I==2)if(Se[0]=="c"){d.M=Se[1],d.ba=Se[2];const rn=Se[3];rn!=null&&(d.ka=rn,d.j.info("VER="+d.ka));const Ar=Se[4];Ar!=null&&(d.za=Ar,d.j.info("SVER="+d.za));const Hn=Se[5];Hn!=null&&typeof Hn=="number"&&Hn>0&&(g=1.5*Hn,d.O=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;const zn=a.g;if(zn){const ro=zn.g?zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ro){var N=g.h;N.g||ro.indexOf("spdy")==-1&&ro.indexOf("quic")==-1&&ro.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Ga(N,N.h),N.h=null))}if(g.G){const Za=zn.g?zn.g.getResponseHeader("X-HTTP-Session-Id"):null;Za&&(g.wa=Za,Oe(g.J,g.G,Za))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-a.F,d.j.info("Handshake RTT: "+d.T+"ms")),g=d;var G=a;if(g.na=mh(g,g.L?g.ba:null,g.W),G.L){Gu(g.h,G);var fe=G,Je=g.O;Je&&(fe.H=Je),fe.D&&(qa(fe),Qi(fe)),g.g=G}else hh(g);d.i.length>0&&eo(d)}else Se[0]!="stop"&&Se[0]!="close"||wr(d,7);else d.I==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?wr(d,7):Ja(d):Se[0]!="noop"&&d.l&&d.l.qa(Se),d.A=0)}}Us(4)}catch{}}var Q_=class{constructor(a,u){this.g=a,this.map=u}};function qu(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Hu(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function zu(a){return a.h?1:a.g?a.g.size:0}function za(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function Ga(a,u){a.g?a.g.add(u):a.h=u}function Gu(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}qu.prototype.cancel=function(){if(this.i=Ku(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Ku(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let u=a.i;for(const d of a.g.values())u=u.concat(d.G);return u}return v(a.i)}var Wu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function J_(a,u){if(a){a=a.split("&");for(let d=0;d<a.length;d++){const g=a[d].indexOf("=");let C,N=null;g>=0?(C=a[d].substring(0,g),N=a[d].substring(g+1)):C=a[d],u(C,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function jn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let u;a instanceof jn?(this.l=a.l,qs(this,a.j),this.o=a.o,this.g=a.g,Hs(this,a.u),this.h=a.h,Ka(this,eh(a.i)),this.m=a.m):a&&(u=String(a).match(Wu))?(this.l=!1,qs(this,u[1]||"",!0),this.o=zs(u[2]||""),this.g=zs(u[3]||"",!0),Hs(this,u[4]),this.h=zs(u[5]||"",!0),Ka(this,u[6]||"",!0),this.m=zs(u[7]||"")):(this.l=!1,this.i=new Ks(null,this.l))}jn.prototype.toString=function(){const a=[];var u=this.j;u&&a.push(Gs(u,Qu,!0),":");var d=this.g;return(d||u=="file")&&(a.push("//"),(u=this.o)&&a.push(Gs(u,Qu,!0),"@"),a.push(js(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&a.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(Gs(d,d.charAt(0)=="/"?Z_:Y_,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",Gs(d,ty)),a.join("")},jn.prototype.resolve=function(a){const u=nn(this);let d=!!a.j;d?qs(u,a.j):d=!!a.o,d?u.o=a.o:d=!!a.g,d?u.g=a.g:d=a.u!=null;var g=a.h;if(d)Hs(u,a.u);else if(d=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var C=u.h.lastIndexOf("/");C!=-1&&(g=u.h.slice(0,C+1)+g)}if(C=g,C==".."||C==".")g="";else if(C.indexOf("./")!=-1||C.indexOf("/.")!=-1){g=C.lastIndexOf("/",0)==0,C=C.split("/");const N=[];for(let G=0;G<C.length;){const fe=C[G++];fe=="."?g&&G==C.length&&N.push(""):fe==".."?((N.length>1||N.length==1&&N[0]!="")&&N.pop(),g&&G==C.length&&N.push("")):(N.push(fe),g=!0)}g=N.join("/")}else g=C}return d?u.h=g:d=a.i.toString()!=="",d?Ka(u,eh(a.i)):d=!!a.m,d&&(u.m=a.m),u};function nn(a){return new jn(a)}function qs(a,u,d){a.j=d?zs(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function Hs(a,u){if(u){if(u=Number(u),isNaN(u)||u<0)throw Error("Bad port number "+u);a.u=u}else a.u=null}function Ka(a,u,d){u instanceof Ks?(a.i=u,ny(a.i,a.l)):(d||(u=Gs(u,ey)),a.i=new Ks(u,a.l))}function Oe(a,u,d){a.i.set(u,d)}function Ji(a){return Oe(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function zs(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Gs(a,u,d){return typeof a=="string"?(a=encodeURI(a).replace(u,X_),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function X_(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Qu=/[#\/\?@]/g,Y_=/[#\?:]/g,Z_=/[#\?]/g,ey=/[#\?@]/g,ty=/#/g;function Ks(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function Ir(a){a.g||(a.g=new Map,a.h=0,a.i&&J_(a.i,function(u,d){a.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}t=Ks.prototype,t.add=function(a,u){Ir(this),this.i=null,a=Wr(this,a);let d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(u),this.h+=1,this};function Ju(a,u){Ir(a),u=Wr(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function Xu(a,u){return Ir(a),u=Wr(a,u),a.g.has(u)}t.forEach=function(a,u){Ir(this),this.g.forEach(function(d,g){d.forEach(function(C){a.call(u,C,g,this)},this)},this)};function Yu(a,u){Ir(a);let d=[];if(typeof u=="string")Xu(a,u)&&(d=d.concat(a.g.get(Wr(a,u))));else for(a=Array.from(a.g.values()),u=0;u<a.length;u++)d=d.concat(a[u]);return d}t.set=function(a,u){return Ir(this),this.i=null,a=Wr(this,a),Xu(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},t.get=function(a,u){return a?(a=Yu(this,a),a.length>0?String(a[0]):u):u};function Zu(a,u,d){Ju(a,u),d.length>0&&(a.i=null,a.g.set(Wr(a,u),v(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],u=Array.from(this.g.keys());for(let g=0;g<u.length;g++){var d=u[g];const C=js(d);d=Yu(this,d);for(let N=0;N<d.length;N++){let G=C;d[N]!==""&&(G+="="+js(d[N])),a.push(G)}}return this.i=a.join("&")};function eh(a){const u=new Ks;return u.i=a.i,a.g&&(u.g=new Map(a.g),u.h=a.h),u}function Wr(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function ny(a,u){u&&!a.j&&(Ir(a),a.i=null,a.g.forEach(function(d,g){const C=g.toLowerCase();g!=C&&(Ju(this,g),Zu(this,C,d))},a)),a.j=u}function ry(a,u){const d=new Bs;if(o.Image){const g=new Image;g.onload=f($n,d,"TestLoadImage: loaded",!0,u,g),g.onerror=f($n,d,"TestLoadImage: error",!1,u,g),g.onabort=f($n,d,"TestLoadImage: abort",!1,u,g),g.ontimeout=f($n,d,"TestLoadImage: timeout",!1,u,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else u(!1)}function sy(a,u){const d=new Bs,g=new AbortController,C=setTimeout(()=>{g.abort(),$n(d,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:g.signal}).then(N=>{clearTimeout(C),N.ok?$n(d,"TestPingServer: ok",!0,u):$n(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(C),$n(d,"TestPingServer: error",!1,u)})}function $n(a,u,d,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(d)}catch{}}function iy(){this.g=new ft}function Wa(a){this.i=a.Sb||null,this.h=a.ab||!1}p(Wa,Mt),Wa.prototype.g=function(){return new Xi(this.i,this.h)};function Xi(a,u){$.call(this),this.H=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Xi,$),t=Xi.prototype,t.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=u,this.readyState=1,Qs(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const u={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(u.body=a),(this.H||o).fetch(new Request(this.D,u)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ws(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Qs(this)),this.g&&(this.readyState=3,Qs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;th(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function th(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.B.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?Ws(this):Qs(this),this.readyState==3&&th(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Ws(this))},t.Na=function(a){this.g&&(this.response=a,Ws(this))},t.ga=function(){this.g&&Ws(this)};function Ws(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Qs(a)}t.setRequestHeader=function(a,u){this.A.append(a,u)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=u.next();return a.join(`\r
`)};function Qs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function nh(a){let u="";return Nt(a,function(d,g){u+=g,u+=":",u+=d,u+=`\r
`}),u}function Qa(a,u,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=nh(d),typeof a=="string"?d!=null&&js(d):Oe(a,u,d))}function Le(a){$.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Le,$);var oy=/^https?$/i,ay=["POST","PUT"];t=Le.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,u,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Lu.g(),this.g.onreadystatechange=m(h(this.Ca,this));try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(N){rh(this,N);return}if(a=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)d.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const N of g.keys())d.set(N,g.get(N));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(N=>N.toLowerCase()=="content-type"),C=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(ay,u,void 0)>=0)||g||C||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,G]of d)this.g.setRequestHeader(N,G);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(N){rh(this,N)}};function rh(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.o=5,sh(a),Yi(a)}function sh(a){a.A||(a.A=!0,B(a,"complete"),B(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,B(this,"complete"),B(this,"abort"),Yi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yi(this,!0)),Le.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ih(this):this.Xa())},t.Xa=function(){ih(this)};function ih(a){if(a.h&&typeof i<"u"){if(a.v&&qn(a)==4)setTimeout(a.Ca.bind(a),0);else if(B(a,"readystatechange"),qn(a)==4){a.h=!1;try{const N=a.ca();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var g;if(g=N===0){let G=String(a.D).match(Wu)[1]||null;!G&&o.self&&o.self.location&&(G=o.self.location.protocol.slice(0,-1)),g=!oy.test(G?G.toLowerCase():"")}d=g}if(d)B(a,"complete"),B(a,"success");else{a.o=6;try{var C=qn(a)>2?a.g.statusText:""}catch{C=""}a.l=C+" ["+a.ca()+"]",sh(a)}}finally{Yi(a)}}}}function Yi(a,u){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const d=a.g;a.g=null,u||B(a,"ready");try{d.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function qn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return qn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),ht(u)}};function oh(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function cy(a){const u={};a=(a.g&&qn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(T(a[g]))continue;var d=G_(a[g]);const C=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const N=u[C]||[];u[C]=N,N.push(d)}tn(u,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Js(a,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||u}function ah(a){this.za=0,this.i=[],this.j=new Bs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Js("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Js("baseRetryDelayMs",5e3,a),this.Za=Js("retryDelaySeedMs",1e4,a),this.Ta=Js("forwardChannelMaxRetries",2,a),this.va=Js("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new qu(a&&a.concurrentRequestLimit),this.Ba=new iy,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ah.prototype,t.ka=8,t.I=1,t.connect=function(a,u,d,g){It(0),this.W=a,this.H=u||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.J=mh(this,null,this.W),eo(this)};function Ja(a){if(ch(a),a.I==3){var u=a.V++,d=nn(a.J);if(Oe(d,"SID",a.M),Oe(d,"RID",u),Oe(d,"TYPE","terminate"),Xs(a,d),u=new Bn(a,a.j,u),u.M=2,u.A=Ji(nn(d)),d=!1,o.navigator&&o.navigator.sendBeacon)try{d=o.navigator.sendBeacon(u.A.toString(),"")}catch{}!d&&o.Image&&(new Image().src=u.A,d=!0),d||(u.g=_h(u.j,null),u.g.ea(u.A)),u.F=Date.now(),Qi(u)}gh(a)}function Zi(a){a.g&&(Ya(a),a.g.cancel(),a.g=null)}function ch(a){Zi(a),a.v&&(o.clearTimeout(a.v),a.v=null),to(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function eo(a){if(!Hu(a.h)&&!a.m){a.m=!0;var u=a.Ea;ie||_(),oe||(ie(),oe=!0),y.add(u,a),a.D=0}}function ly(a,u){return zu(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=u.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Fs(h(a.Ea,a,u),ph(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const C=new Bn(this,this.j,a);let N=this.o;if(this.U&&(N?(N=xt(N),An(N,this.U)):N=this.U),this.u!==null||this.R||(C.J=N,N=null),this.S)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(u+=g,u>4096){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=uh(this,C,u),d=nn(this.J),Oe(d,"RID",a),Oe(d,"CVER",22),this.G&&Oe(d,"X-HTTP-Session-Id",this.G),Xs(this,d),N&&(this.R?u="headers="+js(nh(N))+"&"+u:this.u&&Qa(d,this.u,N)),Ga(this.h,C),this.Ra&&Oe(d,"TYPE","init"),this.S?(Oe(d,"$req",u),Oe(d,"SID","null"),C.U=!0,$a(C,d,null)):$a(C,d,u),this.I=2}}else this.I==3&&(a?lh(this,a):this.i.length==0||Hu(this.h)||lh(this))};function lh(a,u){var d;u?d=u.l:d=a.V++;const g=nn(a.J);Oe(g,"SID",a.M),Oe(g,"RID",d),Oe(g,"AID",a.K),Xs(a,g),a.u&&a.o&&Qa(g,a.u,a.o),d=new Bn(a,a.j,d,a.D+1),a.u===null&&(d.J=a.o),u&&(a.i=u.G.concat(a.i)),u=uh(a,d,1e3),d.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Ga(a.h,d),$a(d,g,u)}function Xs(a,u){a.H&&Nt(a.H,function(d,g){Oe(u,g,d)}),a.l&&Nt({},function(d,g){Oe(u,g,d)})}function uh(a,u,d){d=Math.min(a.i.length,d);const g=a.l?h(a.l.Ka,a.l,a):null;e:{var C=a.i;let fe=-1;for(;;){const Je=["count="+d];fe==-1?d>0?(fe=C[0].g,Je.push("ofs="+fe)):fe=0:Je.push("ofs="+fe);let Se=!0;for(let nt=0;nt<d;nt++){var N=C[nt].g;const rn=C[nt].map;if(N-=fe,N<0)fe=Math.max(0,C[nt].g-100),Se=!1;else try{N="req"+N+"_"||"";try{var G=rn instanceof Map?rn:Object.entries(rn);for(const[Ar,Hn]of G){let zn=Hn;c(Hn)&&(zn=Ee(Hn)),Je.push(N+Ar+"="+encodeURIComponent(zn))}}catch(Ar){throw Je.push(N+"type="+encodeURIComponent("_badmap")),Ar}}catch{g&&g(rn)}}if(Se){G=Je.join("&");break e}}G=void 0}return a=a.i.splice(0,d),u.G=a,G}function hh(a){if(!a.g&&!a.v){a.Y=1;var u=a.Da;ie||_(),oe||(ie(),oe=!0),y.add(u,a),a.A=0}}function Xa(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Fs(h(a.Da,a),ph(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,fh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Fs(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),Zi(this),fh(this))};function Ya(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function fh(a){a.g=new Bn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var u=nn(a.na);Oe(u,"RID","rpc"),Oe(u,"SID",a.M),Oe(u,"AID",a.K),Oe(u,"CI",a.F?"0":"1"),!a.F&&a.ia&&Oe(u,"TO",a.ia),Oe(u,"TYPE","xmlhttp"),Xs(a,u),a.u&&a.o&&Qa(u,a.u,a.o),a.O&&(a.g.H=a.O);var d=a.g;a=a.ba,d.M=1,d.A=Ji(nn(u)),d.u=null,d.R=!0,Bu(d,a)}t.Va=function(){this.C!=null&&(this.C=null,Zi(this),Xa(this),It(19))};function to(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function dh(a,u){var d=null;if(a.g==u){to(a),Ya(a),a.g=null;var g=2}else if(za(a.h,u))d=u.G,Gu(a.h,u),g=1;else return;if(a.I!=0){if(u.o)if(g==1){d=u.u?u.u.length:0,u=Date.now()-u.F;var C=a.D;g=Er(),B(g,new xu(g,d)),eo(a)}else hh(a);else if(C=u.m,C==3||C==0&&u.X>0||!(g==1&&ly(a,u)||g==2&&Xa(a)))switch(d&&d.length>0&&(u=a.h,u.i=u.i.concat(d)),C){case 1:wr(a,5);break;case 4:wr(a,10);break;case 3:wr(a,6);break;default:wr(a,2)}}}function ph(a,u){let d=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(d*=2),d*u}function wr(a,u){if(a.j.info("Error code "+u),u==2){var d=h(a.bb,a),g=a.Ua;const C=!g;g=new jn(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||qs(g,"https"),Ji(g),C?ry(g.toString(),d):sy(g.toString(),d)}else It(2);a.I=0,a.l&&a.l.pa(u),gh(a),ch(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function gh(a){if(a.I=0,a.ja=[],a.l){const u=Ku(a.h);(u.length!=0||a.i.length!=0)&&(P(a.ja,u),P(a.ja,a.i),a.h.i.length=0,v(a.i),a.i.length=0),a.l.oa()}}function mh(a,u,d){var g=d instanceof jn?nn(d):new jn(d);if(g.g!="")u&&(g.g=u+"."+g.g),Hs(g,g.u);else{var C=o.location;g=C.protocol,u=u?u+"."+C.hostname:C.hostname,C=+C.port;const N=new jn(null);g&&qs(N,g),u&&(N.g=u),C&&Hs(N,C),d&&(N.h=d),g=N}return d=a.G,u=a.wa,d&&u&&Oe(g,d,u),Oe(g,"VER",a.ka),Xs(a,g),g}function _h(a,u,d){if(u&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Aa&&!a.ma?new Le(new Wa({ab:d})):new Le(a.ma),u.Fa(a.L),u}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function yh(){}t=yh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function no(){}no.prototype.g=function(a,u){return new Ut(a,u)};function Ut(a,u){$.call(this),this.g=new ah(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.sa&&(a?a["X-WebChannel-Client-Profile"]=u.sa:a={"X-WebChannel-Client-Profile":u.sa}),this.g.U=a,(a=u&&u.Qb)&&!T(a)&&(this.g.u=a),this.A=u&&u.supportsCrossDomainXhr||!1,this.v=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!T(u)&&(this.g.G=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new Qr(this)}p(Ut,$),Ut.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){Ja(this.g)},Ut.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.v&&(d={},d.__data__=Ee(a),a=d);u.i.push(new Q_(u.Ya++,a)),u.I==3&&eo(u)},Ut.prototype.N=function(){this.g.l=null,delete this.j,Ja(this.g),delete this.g,Ut.Z.N.call(this)};function vh(a){Gr.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(const d in u){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}p(vh,Gr);function Eh(){ot.call(this),this.status=1}p(Eh,ot);function Qr(a){this.g=a}p(Qr,yh),Qr.prototype.ra=function(){B(this.g,"a")},Qr.prototype.qa=function(a){B(this.g,new vh(a))},Qr.prototype.pa=function(a){B(this.g,new Eh)},Qr.prototype.oa=function(){B(this.g,"b")},no.prototype.createWebChannel=no.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,Qg=function(){return new no},Wg=function(){return Er()},Kg=tt,Qc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Wi.NO_ERROR=0,Wi.TIMEOUT=8,Wi.HTTP_ERROR=6,Ao=Wi,Mu.COMPLETE="complete",Gg=Mu,Lt.EventType=Qt,Qt.OPEN="a",Qt.CLOSE="b",Qt.ERROR="c",Qt.MESSAGE="d",$.prototype.listen=$.prototype.J,si=Lt,Le.prototype.listenOnce=Le.prototype.K,Le.prototype.getLastError=Le.prototype.Ha,Le.prototype.getLastErrorCode=Le.prototype.ya,Le.prototype.getStatus=Le.prototype.ca,Le.prototype.getResponseJson=Le.prototype.La,Le.prototype.getResponseText=Le.prototype.la,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Fa,zg=Le}).apply(typeof uo<"u"?uo:typeof self<"u"?self:typeof window<"u"?window:{});const Df="@firebase/firestore",Vf="4.9.2";class pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");let ks="12.3.0";const Br=new $l("@firebase/firestore");function Zr(){return Br.logLevel}function Y(t,...e){if(Br.logLevel<=ge.DEBUG){const n=e.map(Jl);Br.debug(`Firestore (${ks}): ${t}`,...n)}}function Mn(t,...e){if(Br.logLevel<=ge.ERROR){const n=e.map(Jl);Br.error(`Firestore (${ks}): ${t}`,...n)}}function ws(t,...e){if(Br.logLevel<=ge.WARN){const n=e.map(Jl);Br.warn(`Firestore (${ks}): ${t}`,...n)}}function Jl(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ue(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Jg(t,r,n)}function Jg(t,e,n){let r=`FIRESTORE (${ks}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Mn(r),new Error(r)}function Me(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Jg(e,s,r)}function ve(t,e){return t}const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends wn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class hs{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Xg{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Db{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(pt.UNAUTHENTICATED)))}shutdown(){}}class Vb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class xb{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Me(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new hs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new hs,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},c=l=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>c(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new hs)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Me(typeof r.accessToken=="string",31837,{l:r}),new Xg(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Me(e===null||typeof e=="string",2055,{h:e}),new pt(e)}}class Mb{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Lb{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Mb(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(pt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class xf{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ub{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Me(this.o===void 0,3512);const r=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new xf(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Me(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new xf(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Fb(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Yg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Fb(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function Jc(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Ec(s)===Ec(i)?_e(s,i):Ec(s)?1:-1}return _e(t.length,e.length)}const Bb=55296,jb=57343;function Ec(t){const e=t.charCodeAt(0);return e>=Bb&&e<=jb}function As(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}const Mf="__name__";class an{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ue(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return an.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof an?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=an.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return _e(e.length,n.length)}static compareSegments(e,n){const r=an.isNumericId(e),s=an.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?an.extractNumericId(e).compare(an.extractNumericId(n)):Jc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cr.fromString(e.substring(4,e.length-2))}}class Ve extends an{construct(e,n,r){return new Ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Ve(n)}static emptyPath(){return new Ve([])}}const $b=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends an{construct(e,n,r){return new yt(e,n,r)}static isValidIdentifier(e){return $b.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Mf}static keyField(){return new yt([Mf])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Z(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Z(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Z(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new Z(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yt(n)}static emptyPath(){return new yt([])}}class se{constructor(e){this.path=e}static fromPath(e){return new se(Ve.fromString(e))}static fromName(e){return new se(Ve.fromString(e).popFirst(5))}static empty(){return new se(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new Ve(e.slice()))}}function qb(t,e,n,r){if(e===!0&&r===!0)throw new Z(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Lf(t){if(se.isDocumentKey(t))throw new Z(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Zg(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Aa(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue(12329,{type:typeof t})}function bo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Aa(t);throw new Z(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function We(t,e){const n={typeString:t};return e&&(n.value=e),n}function ji(t,e){if(!Zg(t))throw new Z(H.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Z(H.INVALID_ARGUMENT,n);return!0}const Uf=-62135596800,Ff=1e6;class xe{static now(){return xe.fromMillis(Date.now())}static fromDate(e){return xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ff);return new xe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Uf)throw new Z(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ff}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ji(e,xe._jsonSchema))return new xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Uf;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xe._jsonSchemaVersion="firestore/timestamp/1.0",xe._jsonSchema={type:We("string",xe._jsonSchemaVersion),seconds:We("number"),nanoseconds:We("number")};class le{static fromTimestamp(e){return new le(e)}static min(){return new le(new xe(0,0))}static max(){return new le(new xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ni=-1;function Hb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=le.fromTimestamp(r===1e9?new xe(n+1,0):new xe(n,r));return new fr(s,se.empty(),e)}function zb(t){return new fr(t.readTime,t.key,Ni)}class fr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new fr(le.min(),se.empty(),Ni)}static max(){return new fr(le.max(),se.empty(),Ni)}}function Gb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}const Kb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Wb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ba(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==Kb)throw t;Y("LocalStore","Unexpectedly lost primary lease")}class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):M.reject(n)}static resolve(e){return new M(((n,r)=>{n(e)}))}static reject(e){return new M(((n,r)=>{r(e)}))}static waitFor(e){return new M(((n,r)=>{let s=0,i=0,o=!1;e.forEach((c=>{++s,c.next((()=>{++i,o&&i===s&&n()}),(l=>r(l)))})),o=!0,i===s&&n()}))}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next((s=>s?M.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new M(((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let l=0;l<i;l++){const h=l;n(e[h]).next((f=>{o[h]=f,++c,c===i&&r(o)}),(f=>s(f)))}}))}static doWhile(e,n){return new M(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}function Qb(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Os(t){return t.name==="IndexedDbTransactionError"}class Ra{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ra.ce=-1;const Jb=-1;function Sa(t){return t==null}function Ko(t){return t===0&&1/t==-1/0}function Xb(t){return typeof t=="number"&&Number.isInteger(t)&&!Ko(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const em="";function Yb(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Bf(e)),e=Zb(t.get(n),e);return Bf(e)}function Zb(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case em:n+="";break;default:n+=i}}return n}function Bf(t){return t+em+""}function jf(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ds(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tm(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class qe{constructor(e,n){this.comparator=e,this.root=n||at.EMPTY}insert(e,n){return new qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,at.BLACK,null,null))}remove(e){return new qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,at.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ho(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ho(this.root,e,this.comparator,!1)}getReverseIterator(){return new ho(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ho(this.root,e,this.comparator,!0)}}class ho{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class at{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??at.RED,this.left=s??at.EMPTY,this.right=i??at.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new at(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return at.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return at.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,at.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,at.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}}at.EMPTY=null,at.RED=!0,at.BLACK=!1;at.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new at(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class et{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $f(this.data.getIterator())}getIteratorFrom(e){return new $f(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new et(this.comparator);return n.data=e,n}}class $f{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class rr{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new rr([])}unionWith(e){let n=new et(yt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new rr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return As(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class nm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new nm("Invalid base64 string: "+i):i}})(e);return new lt(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lt.EMPTY_BYTE_STRING=new lt("");const eR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dr(t){if(Me(!!t,39018),typeof t=="string"){let e=0;const n=eR.exec(t);if(Me(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$e(t.seconds),nanos:$e(t.nanos)}}function $e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function pr(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}const rm="server_timestamp",sm="__type__",im="__previous_value__",om="__local_write_time__";function Xl(t){return(t?.mapValue?.fields||{})[sm]?.stringValue===rm}function Ca(t){const e=t.mapValue.fields[im];return Xl(e)?Ca(e):e}function ki(t){const e=dr(t.mapValue.fields[om].timestampValue);return new xe(e.seconds,e.nanos)}class tR{constructor(e,n,r,s,i,o,c,l,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=h,this.isUsingEmulator=f}}const Wo="(default)";class Oi{constructor(e,n){this.projectId=e,this.database=n||Wo}static empty(){return new Oi("","")}get isDefaultDatabase(){return this.database===Wo}isEqual(e){return e instanceof Oi&&e.projectId===this.projectId&&e.database===this.database}}const am="__type__",nR="__max__",fo={mapValue:{}},cm="__vector__",Qo="value";function gr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xl(t)?4:sR(t)?9007199254740991:rR(t)?10:11:ue(28295,{value:t})}function In(t,e){if(t===e)return!0;const n=gr(t);if(n!==gr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ki(t).isEqual(ki(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=dr(s.timestampValue),c=dr(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return pr(s.bytesValue).isEqual(pr(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return $e(s.geoPointValue.latitude)===$e(i.geoPointValue.latitude)&&$e(s.geoPointValue.longitude)===$e(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return $e(s.integerValue)===$e(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=$e(s.doubleValue),c=$e(i.doubleValue);return o===c?Ko(o)===Ko(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return As(t.arrayValue.values||[],e.arrayValue.values||[],In);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(jf(o)!==jf(c))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!In(o[l],c[l])))return!1;return!0})(t,e);default:return ue(52216,{left:t})}}function Di(t,e){return(t.values||[]).find((n=>In(n,e)))!==void 0}function bs(t,e){if(t===e)return 0;const n=gr(t),r=gr(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const c=$e(i.integerValue||i.doubleValue),l=$e(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(t,e);case 3:return qf(t.timestampValue,e.timestampValue);case 4:return qf(ki(t),ki(e));case 5:return Jc(t.stringValue,e.stringValue);case 6:return(function(i,o){const c=pr(i),l=pr(o);return c.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const c=i.split("/"),l=o.split("/");for(let h=0;h<c.length&&h<l.length;h++){const f=_e(c[h],l[h]);if(f!==0)return f}return _e(c.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const c=_e($e(i.latitude),$e(o.latitude));return c!==0?c:_e($e(i.longitude),$e(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Hf(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const c=i.fields||{},l=o.fields||{},h=c[Qo]?.arrayValue,f=l[Qo]?.arrayValue,p=_e(h?.values?.length||0,f?.values?.length||0);return p!==0?p:Hf(h,f)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===fo.mapValue&&o===fo.mapValue)return 0;if(i===fo.mapValue)return 1;if(o===fo.mapValue)return-1;const c=i.fields||{},l=Object.keys(c),h=o.fields||{},f=Object.keys(h);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){const m=Jc(l[p],f[p]);if(m!==0)return m;const v=bs(c[l[p]],h[f[p]]);if(v!==0)return v}return _e(l.length,f.length)})(t.mapValue,e.mapValue);default:throw ue(23264,{he:n})}}function qf(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=dr(t),r=dr(e),s=_e(n.seconds,r.seconds);return s!==0?s:_e(n.nanos,r.nanos)}function Hf(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=bs(n[s],r[s]);if(i)return i}return _e(n.length,r.length)}function Rs(t){return Xc(t)}function Xc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=dr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return pr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return se.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Xc(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Xc(n.fields[o])}`;return s+"}"})(t.mapValue):ue(61005,{value:t})}function Ro(t){switch(gr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ca(t);return e?16+Ro(e):16;case 5:return 2*t.stringValue.length;case 6:return pr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+Ro(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Ds(r.fields,((i,o)=>{s+=i.length+Ro(o)})),s})(t.mapValue);default:throw ue(13486,{value:t})}}function zf(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Yc(t){return!!t&&"integerValue"in t}function Yl(t){return!!t&&"arrayValue"in t}function Gf(t){return!!t&&"nullValue"in t}function Kf(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tc(t){return!!t&&"mapValue"in t}function rR(t){return(t?.mapValue?.fields||{})[am]?.stringValue===cm}function yi(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ds(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=yi(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yi(t.arrayValue.values[n]);return e}return{...t}}function sR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===nR}class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Tc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yi(n)}setAll(e){let n=yt.emptyPath(),r={},s=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=yi(o):s.push(c.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Tc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return In(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Tc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ds(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new un(yi(this.value))}}class mt{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new mt(e,0,le.min(),le.min(),le.min(),un.empty(),0)}static newFoundDocument(e,n,r,s){return new mt(e,1,n,le.min(),r,s,0)}static newNoDocument(e,n){return new mt(e,2,n,le.min(),le.min(),un.empty(),0)}static newUnknownDocument(e,n){return new mt(e,3,n,le.min(),le.min(),un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Jo{constructor(e,n){this.position=e,this.inclusive=n}}function Wf(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=se.comparator(se.fromName(o.referenceValue),n.key):r=bs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Qf(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!In(t.position[n],e.position[n]))return!1;return!0}class Vi{constructor(e,n="asc"){this.field=e,this.dir=n}}function iR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class lm{}class Ke extends lm{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new aR(e,n,r):n==="array-contains"?new uR(e,r):n==="in"?new hR(e,r):n==="not-in"?new fR(e,r):n==="array-contains-any"?new dR(e,r):new Ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cR(e,r):new lR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(bs(n,this.value)):n!==null&&gr(this.value)===gr(n)&&this.matchesComparison(bs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class en extends lm{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new en(e,n)}matches(e){return um(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function um(t){return t.op==="and"}function hm(t){return oR(t)&&um(t)}function oR(t){for(const e of t.filters)if(e instanceof en)return!1;return!0}function Zc(t){if(t instanceof Ke)return t.field.canonicalString()+t.op.toString()+Rs(t.value);if(hm(t))return t.filters.map((e=>Zc(e))).join(",");{const e=t.filters.map((n=>Zc(n))).join(",");return`${t.op}(${e})`}}function fm(t,e){return t instanceof Ke?(function(r,s){return s instanceof Ke&&r.op===s.op&&r.field.isEqual(s.field)&&In(r.value,s.value)})(t,e):t instanceof en?(function(r,s){return s instanceof en&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,c)=>i&&fm(o,s.filters[c])),!0):!1})(t,e):void ue(19439)}function dm(t){return t instanceof Ke?(function(n){return`${n.field.canonicalString()} ${n.op} ${Rs(n.value)}`})(t):t instanceof en?(function(n){return n.op.toString()+" {"+n.getFilters().map(dm).join(" ,")+"}"})(t):"Filter"}class aR extends Ke{constructor(e,n,r){super(e,n,r),this.key=se.fromName(r.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class cR extends Ke{constructor(e,n){super(e,"in",n),this.keys=pm("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class lR extends Ke{constructor(e,n){super(e,"not-in",n),this.keys=pm("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function pm(t,e){return(e.arrayValue?.values||[]).map((n=>se.fromName(n.referenceValue)))}class uR extends Ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yl(n)&&Di(n.arrayValue,this.value)}}class hR extends Ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Di(this.value.arrayValue,n)}}class fR extends Ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(Di(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Di(this.value.arrayValue,n)}}class dR extends Ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yl(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Di(this.value.arrayValue,r)))}}class pR{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function Jf(t,e=null,n=[],r=[],s=null,i=null,o=null){return new pR(t,e,n,r,s,i,o)}function Zl(t){const e=ve(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Zc(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),Sa(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Rs(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Rs(r))).join(",")),e.Te=n}return e.Te}function eu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!iR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!fm(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Qf(t.startAt,e.startAt)&&Qf(t.endAt,e.endAt)}function el(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Vs{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function gR(t,e,n,r,s,i,o,c){return new Vs(t,e,n,r,s,i,o,c)}function tu(t){return new Vs(t)}function Xf(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gm(t){return t.collectionGroup!==null}function vi(t){const e=ve(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new et(yt.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Vi(i,r))})),n.has(yt.keyField().canonicalString())||e.Ie.push(new Vi(yt.keyField(),r))}return e.Ie}function gn(t){const e=ve(t);return e.Ee||(e.Ee=mR(e,vi(t))),e.Ee}function mR(t,e){if(t.limitType==="F")return Jf(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Vi(s.field,i)}));const n=t.endAt?new Jo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Jo(t.startAt.position,t.startAt.inclusive):null;return Jf(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function tl(t,e){const n=t.filters.concat([e]);return new Vs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function nl(t,e,n){return new Vs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pa(t,e){return eu(gn(t),gn(e))&&t.limitType===e.limitType}function mm(t){return`${Zl(gn(t))}|lt:${t.limitType}`}function es(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>dm(s))).join(", ")}]`),Sa(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Rs(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Rs(s))).join(",")),`Target(${r})`})(gn(t))}; limitType=${t.limitType})`}function Na(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):se.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of vi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,c,l){const h=Wf(o,c,l);return o.inclusive?h<=0:h<0})(r.startAt,vi(r),s)||r.endAt&&!(function(o,c,l){const h=Wf(o,c,l);return o.inclusive?h>=0:h>0})(r.endAt,vi(r),s))})(t,e)}function _R(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _m(t){return(e,n)=>{let r=!1;for(const s of vi(t)){const i=yR(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function yR(t,e,n){const r=t.field.isKeyField()?se.comparator(e.key,n.key):(function(i,o,c){const l=o.data.field(i),h=c.data.field(i);return l!==null&&h!==null?bs(l,h):ue(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue(19790,{direction:t.dir})}}class Hr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ds(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return tm(this.inner)}size(){return this.innerSize}}const vR=new qe(se.comparator);function mr(){return vR}const ym=new qe(se.comparator);function ii(...t){let e=ym;for(const n of t)e=e.insert(n.key,n);return e}function ER(t){let e=ym;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function kr(){return Ei()}function vm(){return Ei()}function Ei(){return new Hr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const TR=new et(se.comparator);function Te(...t){let e=TR;for(const n of t)e=e.add(n);return e}const IR=new et(_e);function wR(){return IR}function nu(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ko(e)?"-0":e}}function Em(t){return{integerValue:""+t}}function AR(t,e){return Xb(e)?Em(e):nu(t,e)}class ka{constructor(){this._=void 0}}function bR(t,e,n){return t instanceof rl?(function(s,i){const o={fields:{[sm]:{stringValue:rm},[om]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Xl(i)&&(i=Ca(i)),i&&(o.fields[im]=i),{mapValue:o}})(n,e):t instanceof Xo?Tm(t,e):t instanceof Yo?Im(t,e):(function(s,i){const o=SR(s,i),c=Yf(o)+Yf(s.Ae);return Yc(o)&&Yc(s.Ae)?Em(c):nu(s.serializer,c)})(t,e)}function RR(t,e,n){return t instanceof Xo?Tm(t,e):t instanceof Yo?Im(t,e):n}function SR(t,e){return t instanceof sl?(function(r){return Yc(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class rl extends ka{}class Xo extends ka{constructor(e){super(),this.elements=e}}function Tm(t,e){const n=wm(e);for(const r of t.elements)n.some((s=>In(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Yo extends ka{constructor(e){super(),this.elements=e}}function Im(t,e){let n=wm(e);for(const r of t.elements)n=n.filter((s=>!In(s,r)));return{arrayValue:{values:n}}}class sl extends ka{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Yf(t){return $e(t.integerValue||t.doubleValue)}function wm(t){return Yl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function CR(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Xo&&s instanceof Xo||r instanceof Yo&&s instanceof Yo?As(r.elements,s.elements,In):r instanceof sl&&s instanceof sl?In(r.Ae,s.Ae):r instanceof rl&&s instanceof rl})(t.transform,e.transform)}class xr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xr}static exists(e){return new xr(void 0,e)}static updateTime(e){return new xr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function So(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ru{}function Am(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new NR(t.key,xr.none()):new su(t.key,t.data,xr.none());{const n=t.data,r=un.empty();let s=new et(yt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Oa(t.key,r,new rr(s.toArray()),xr.none())}}function PR(t,e,n){t instanceof su?(function(s,i,o){const c=s.value.clone(),l=ed(s.fieldTransforms,i,o.transformResults);c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Oa?(function(s,i,o){if(!So(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=ed(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(bm(s)),l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Ti(t,e,n,r){return t instanceof su?(function(i,o,c,l){if(!So(i.precondition,o))return c;const h=i.value.clone(),f=td(i.fieldTransforms,l,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null})(t,e,n,r):t instanceof Oa?(function(i,o,c,l){if(!So(i.precondition,o))return c;const h=td(i.fieldTransforms,l,o),f=o.data;return f.setAll(bm(i)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(t,e,n,r):(function(i,o,c){return So(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function Zf(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&As(r,s,((i,o)=>CR(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class su extends ru{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Oa extends ru{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function bm(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function ed(t,e,n){const r=new Map;Me(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,RR(o,c,n[s]))}return r}function td(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,bR(i,o,e))}return r}class NR extends ru{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&PR(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ti(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ti(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=vm();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const l=Am(o,c);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Te())}isEqual(e){return this.batchId===e.batchId&&As(this.mutations,e.mutations,((n,r)=>Zf(n,r)))&&As(this.baseMutations,e.baseMutations,((n,r)=>Zf(n,r)))}}class OR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class DR{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ge,ye;function Rm(t){if(t===void 0)return Mn("GRPC error has no .code"),H.UNKNOWN;switch(t){case Ge.OK:return H.OK;case Ge.CANCELLED:return H.CANCELLED;case Ge.UNKNOWN:return H.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return H.INTERNAL;case Ge.UNAVAILABLE:return H.UNAVAILABLE;case Ge.UNAUTHENTICATED:return H.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case Ge.NOT_FOUND:return H.NOT_FOUND;case Ge.ALREADY_EXISTS:return H.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return H.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case Ge.ABORTED:return H.ABORTED;case Ge.OUT_OF_RANGE:return H.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return H.UNIMPLEMENTED;case Ge.DATA_LOSS:return H.DATA_LOSS;default:return ue(39323,{code:t})}}(ye=Ge||(Ge={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";function VR(){return new TextEncoder}const xR=new cr([4294967295,4294967295],0);function nd(t){const e=VR().encode(t),n=new Hg;return n.update(e),new Uint8Array(n.digest())}function rd(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new cr([n,r],0),new cr([s,i],0)]}class iu{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new oi(`Invalid padding: ${n}`);if(r<0)throw new oi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new oi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new oi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=cr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(cr.fromNumber(r)));return s.compare(xR)===1&&(s=new cr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=nd(e),[r,s]=rd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new iu(i,s,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=nd(e),[r,s]=rd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class oi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Da{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,$i.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Da(le.min(),s,new qe(_e),mr(),Te())}}class $i{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $i(r,n,Te(),Te(),Te())}}class Co{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Sm{constructor(e,n){this.targetId=e,this.Ce=n}}class Cm{constructor(e,n,r=lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class sd{constructor(){this.ve=0,this.Fe=id(),this.Me=lt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Te(),n=Te(),r=Te();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ue(38017,{changeType:i})}})),new $i(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=id()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Me(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class MR{constructor(e){this.Ge=e,this.ze=new Map,this.je=mr(),this.Je=po(),this.He=po(),this.Ye=new qe(_e)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ue(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(el(i))if(r===0){const o=new se(i.path);this.et(n,o,mt.newNoDocument(o,le.min()))}else Me(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),l=c?this.ct(c,e,o):1;if(l!==0){this.it(n);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=pr(r).toUint8Array()}catch(l){if(l instanceof nm)return ws("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new iu(o,s,i)}catch(l){return ws(l instanceof oi?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const c=this.ot(o);if(c){if(i.current&&el(c.target)){const l=new se(c.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,mt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let r=Te();this.He.forEach(((i,o)=>{let c=!0;o.forEachWhile((l=>{const h=this.ot(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new Da(e,n,this.Ye,this.je,r);return this.je=mr(),this.Je=po(),this.He=po(),this.Ye=new qe(_e),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new sd,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new et(_e),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new et(_e),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new sd),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function po(){return new qe(se.comparator)}function id(){return new qe(se.comparator)}const LR={asc:"ASCENDING",desc:"DESCENDING"},UR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FR={and:"AND",or:"OR"};class BR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function il(t,e){return t.useProto3Json||Sa(e)?e:{value:e}}function ol(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pm(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fs(t){return Me(!!t,49232),le.fromTimestamp((function(n){const r=dr(n);return new xe(r.seconds,r.nanos)})(t))}function Nm(t,e){return al(t,e).canonicalString()}function al(t,e){const n=(function(s){return new Ve(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function km(t){const e=Ve.fromString(t);return Me(Mm(e),10190,{key:e.toString()}),e}function Ic(t,e){const n=km(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(Dm(n))}function Om(t,e){return Nm(t.databaseId,e)}function jR(t){const e=km(t);return e.length===4?Ve.emptyPath():Dm(e)}function od(t){return new Ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Dm(t){return Me(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function $R(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ue(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(h,f){return h.useProto3Json?(Me(f===void 0||typeof f=="string",58123),lt.fromBase64String(f||"")):(Me(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),lt.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(h){const f=h.code===void 0?H.UNKNOWN:Rm(h.code);return new Z(f,h.message||"")})(o);n=new Cm(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ic(t,r.document.name),i=fs(r.document.updateTime),o=r.document.createTime?fs(r.document.createTime):le.min(),c=new un({mapValue:{fields:r.document.fields}}),l=mt.newFoundDocument(s,i,o,c),h=r.targetIds||[],f=r.removedTargetIds||[];n=new Co(h,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ic(t,r.document),i=r.readTime?fs(r.readTime):le.min(),o=mt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Co([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ic(t,r.document),i=r.removedTargetIds||[];n=new Co([],i,s,null)}else{if(!("filter"in e))return ue(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new DR(s,i),c=r.targetId;n=new Sm(c,o)}}return n}function qR(t,e){return{documents:[Om(t,e.path)]}}function HR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Om(t,s);const i=(function(h){if(h.length!==0)return xm(en.create(h,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(h){if(h.length!==0)return h.map((f=>(function(m){return{field:ts(m.field),direction:KR(m.dir)}})(f)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=il(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:n,parent:s}}function zR(t){let e=jR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Me(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=(function(p){const m=Vm(p);return m instanceof en&&hm(m)?m.getFilters():[m]})(n.where));let o=[];n.orderBy&&(o=(function(p){return p.map((m=>(function(P){return new Vi(ns(P.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(m)))})(n.orderBy));let c=null;n.limit&&(c=(function(p){let m;return m=typeof p=="object"?p.value:p,Sa(m)?null:m})(n.limit));let l=null;n.startAt&&(l=(function(p){const m=!!p.before,v=p.values||[];return new Jo(v,m)})(n.startAt));let h=null;return n.endAt&&(h=(function(p){const m=!p.before,v=p.values||[];return new Jo(v,m)})(n.endAt)),gR(e,s,o,i,c,"F",l,h)}function GR(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Vm(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ns(n.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ns(n.unaryFilter.field);return Ke.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ns(n.unaryFilter.field);return Ke.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ns(n.unaryFilter.field);return Ke.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ke.create(ns(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return en.create(n.compositeFilter.filters.map((r=>Vm(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ue(1026)}})(n.compositeFilter.op))})(t):ue(30097,{filter:t})}function KR(t){return LR[t]}function WR(t){return UR[t]}function QR(t){return FR[t]}function ts(t){return{fieldPath:t.canonicalString()}}function ns(t){return yt.fromServerFormat(t.fieldPath)}function xm(t){return t instanceof Ke?(function(n){if(n.op==="=="){if(Kf(n.value))return{unaryFilter:{field:ts(n.field),op:"IS_NAN"}};if(Gf(n.value))return{unaryFilter:{field:ts(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Kf(n.value))return{unaryFilter:{field:ts(n.field),op:"IS_NOT_NAN"}};if(Gf(n.value))return{unaryFilter:{field:ts(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ts(n.field),op:WR(n.op),value:n.value}}})(t):t instanceof en?(function(n){const r=n.getFilters().map((s=>xm(s)));return r.length===1?r[0]:{compositeFilter:{op:QR(n.op),filters:r}}})(t):ue(54877,{filter:t})}function Mm(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class sr{constructor(e,n,r,s,i=le.min(),o=le.min(),c=lt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class JR{constructor(e){this.yt=e}}function XR(t){const e=zR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nl(e,e.limit,"L"):e}class YR{constructor(){this.Cn=new ZR}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(fr.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(fr.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class ZR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new et(Ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new et(Ve.comparator)).toArray()}}const ad={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Lm=41943040;class Ot{static withCacheSize(e){return new Ot(e,Ot.DEFAULT_COLLECTION_PERCENTILE,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Ot.DEFAULT_COLLECTION_PERCENTILE=10,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ot.DEFAULT=new Ot(Lm,Ot.DEFAULT_COLLECTION_PERCENTILE,Ot.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ot.DISABLED=new Ot(-1,0,0);class Ss{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ss(0)}static cr(){return new Ss(-1)}}const cd="LruGarbageCollector",eS=1048576;function ld([t,e],[n,r]){const s=_e(t,n);return s===0?_e(e,r):s}class tS{constructor(e){this.Ir=e,this.buffer=new et(ld),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ld(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class nS{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Y(cd,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Os(n)?Y(cd,"Ignoring IndexedDB error during garbage collection: ",n):await ba(n)}await this.Vr(3e5)}))}}class rS{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Ra.ce);const r=new tS(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(ad)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ad):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,c,l,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s)))).next((p=>(r=p,c=Date.now(),this.removeTargets(e,r,n)))).next((p=>(i=p,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(h=Date.now(),Zr()<=ge.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(l-c)+`ms
	Removed ${p} documents in `+(h-l)+`ms
Total Duration: ${h-f}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p}))))}}function sS(t,e){return new rS(t,e)}class iS{constructor(){this.changes=new Hr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class oS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class aS{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&Ti(r.mutation,s,rr.empty(),xe.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Te()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Te()){const s=kr();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=ii();return i.forEach(((c,l)=>{o=o.insert(c,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=kr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Te())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,s){let i=mr();const o=Ei(),c=(function(){return Ei()})();return n.forEach(((l,h)=>{const f=r.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof Oa)?i=i.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),Ti(f.mutation,h,f.mutation.getFieldMask(),xe.now())):o.set(h.key,rr.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((h,f)=>o.set(h,f))),n.forEach(((h,f)=>c.set(h,new oS(f,o.get(h)??null)))),c)))}recalculateAndSaveOverlays(e,n){const r=Ei();let s=new qe(((o,c)=>o-c)),i=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((l=>{const h=n.get(l);if(h===null)return;let f=r.get(l)||rr.empty();f=c.applyToLocalView(h,f),r.set(l,f);const p=(s.get(c.batchId)||Te()).add(l);s=s.insert(c.batchId,p)}))})).next((()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),h=l.key,f=l.value,p=vm();f.forEach((m=>{if(!i.has(m)){const v=Am(n.get(m),r.get(m));v!==null&&p.set(m,v),i=i.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return M.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gm(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve(kr());let c=Ni,l=i;return o.next((h=>M.forEach(h,((f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next((m=>{l=l.insert(f,m)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,l,h,Te()))).next((f=>({batchId:c,changes:ER(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next((r=>{let s=ii();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ii();return this.indexManager.getCollectionParents(e,i).next((c=>M.forEach(c,(l=>{const h=(function(p,m){return new Vs(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next((f=>{f.forEach(((p,m)=>{o=o.insert(p,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((l,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,mt.newInvalidDocument(f)))}));let c=ii();return o.forEach(((l,h)=>{const f=i.get(l);f!==void 0&&Ti(f.mutation,h,rr.empty(),xe.now()),Na(n,h)&&(c=c.insert(l,h))})),c}))}}class cS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:fs(s.createTime)}})(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:XR(s.bundledQuery),readTime:fs(s.readTime)}})(n)),M.resolve()}}class lS{constructor(){this.overlays=new qe(se.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=kr();return M.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.St(e,n,i)})),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=kr(),i=n.length+1,o=new se(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const l=c.getNext().value,h=l.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new qe(((h,f)=>h-f));const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=i.get(h.largestBatchId);f===null&&(f=kr(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const c=kr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((h,f)=>c.set(h,f))),!(c.size()>=s)););return M.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new OR(n,r));let i=this.qr.get(n);i===void 0&&(i=Te(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}class uS{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}class ou{constructor(){this.Qr=new et(st.$r),this.Ur=new et(st.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new st(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new st(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new se(new Ve([])),r=new st(n,e),s=new st(n,e+1),i=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new se(new Ve([])),r=new st(n,e),s=new st(n,e+1);let i=Te();return this.Ur.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new st(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class st{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return se.comparator(e.key,n.key)||_e(e.Yr,n.Yr)}static Kr(e,n){return _e(e.Yr,n.Yr)||se.comparator(e.key,n.key)}}class hS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new et(st.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new kR(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Zr=this.Zr.add(new st(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Jb:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new st(n,0),s=new st(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(o=>{const c=this.Xr(o.Yr);i.push(c)})),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(_e);return n.forEach((s=>{const i=new st(s,0),o=new st(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(c=>{r=r.add(c.Yr)}))})),M.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;se.isDocumentKey(i)||(i=i.child(""));const o=new st(new se(i),0);let c=new et(_e);return this.Zr.forEachWhile((l=>{const h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(l.Yr)),!0)}),o),M.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Me(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return M.forEach(n.mutations,(s=>{const i=new st(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new st(n,0),s=this.Zr.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class fS{constructor(e){this.ri=e,this.docs=(function(){return new qe(se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(n))}getEntries(e,n){let r=mr();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():mt.newInvalidDocument(s))})),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=mr();const o=n.path,c=new se(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:h,value:{document:f}}=l.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||Gb(zb(f),r)<=0||(s.has(f.key)||Na(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ue(9500)}ii(e,n){return M.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new dS(this)}getSize(e){return M.resolve(this.size)}}class dS extends iS{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class pS{constructor(e){this.persistence=e,this.si=new Hr((n=>Zl(n)),eu),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.oi=0,this._i=new ou,this.targetCount=0,this.ai=Ss.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ss(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),M.waitFor(i).next((()=>s))}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}class Um{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ra(0),this.li=!1,this.li=!0,this.hi=new uS,this.referenceDelegate=e(this),this.Pi=new pS(this),this.indexManager=new YR,this.remoteDocumentCache=(function(s){return new fS(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new JR(n),this.Ii=new cS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new hS(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const s=new gS(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,n){return M.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class gS extends Wb{constructor(e){super(),this.currentSequenceNumber=e}}class au{constructor(e){this.persistence=e,this.Ri=new ou,this.Vi=null}static mi(e){return new au(e)}get fi(){if(this.Vi)return this.Vi;throw ue(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,(r=>{const s=se.fromPath(r);return this.gi(e,s).next((i=>{i||n.removeEntry(s,le.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Zo{constructor(e,n){this.persistence=e,this.pi=new Hr((r=>Yb(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=sS(this,n)}static mi(e,n){return new Zo(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return M.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?M.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,n).next((c=>{c||(r++,i.removeEntry(o,le.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ro(e.data.value)),n}br(e,n,r){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return M.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class cu{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Te(),s=Te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new cu(e,n.fromCache,r,s)}}class mS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class _S{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ZI()?8:Qb(Tt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new mS;return this.Ss(e,n,o).next((c=>{if(i.result=c,this.Vs)return this.bs(e,n,o,c.size)}))})).next((()=>i.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(Zr()<=ge.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",es(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(Zr()<=ge.DEBUG&&Y("QueryEngine","Query:",es(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Zr()<=ge.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",es(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gn(n))):M.resolve())}ys(e,n){if(Xf(n))return M.resolve(null);let r=gn(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=nl(n,null,"F"),r=gn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=Te(...i);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((l=>{const h=this.Ds(n,c);return this.Cs(n,h,o,l.readTime)?this.ys(e,nl(n,null,"F")):this.vs(e,h,n,l)}))))})))))}ws(e,n,r,s){return Xf(n)||s.isEqual(le.min())?M.resolve(null):this.ps.getDocuments(e,r).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?M.resolve(null):(Zr()<=ge.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),es(n)),this.vs(e,o,n,Hb(s,Ni)).next((c=>c)))}))}Ds(e,n){let r=new et(_m(e));return n.forEach(((s,i)=>{Na(e,i)&&(r=r.add(i))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Zr()<=ge.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",es(n)),this.ps.getDocumentsMatchingQuery(e,n,fr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const lu="LocalStore",yS=3e8;class vS{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new qe(_e),this.xs=new Hr((i=>Zl(i)),eu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function ES(t,e,n,r){return new vS(t,e,n,r)}async function Fm(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],c=[];let l=Te();for(const h of s){o.push(h.batchId);for(const f of h.mutations)l=l.add(f.key)}for(const h of i){c.push(h.batchId);for(const f of h.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(r,l).next((h=>({Ls:h,removedBatchIds:o,addedBatchIds:c})))}))}))}function Bm(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function TS(t,e){const n=ve(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach(((f,p)=>{const m=s.get(p);if(!m)return;c.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,p).next((()=>n.Pi.addMatchingKeys(i,f.addedDocuments,p))));let v=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(lt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,r)),s=s.insert(p,v),(function(k,O,j){return k.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=yS?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(m,v,f)&&c.push(n.Pi.updateTargetData(i,v))}));let l=mr(),h=Te();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))})),c.push(IS(i,o,e.documentUpdates).next((f=>{l=f.ks,h=f.qs}))),!r.isEqual(le.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next((p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));c.push(f)}return M.waitFor(c).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,l,h))).next((()=>l))})).then((i=>(n.Ms=s,i)))}function IS(t,e,n){let r=Te(),s=Te();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=mr();return n.forEach(((c,l)=>{const h=i.get(c);l.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):Y(lu,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",l.version)})),{ks:o,qs:s}}))}function wS(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((i=>i?(s=i,M.resolve(s)):n.Pi.allocateTargetId(r).next((o=>(s=new sr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function cl(t,e,n){const r=ve(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!Os(o))throw o;Y(lu,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function ud(t,e,n){const r=ve(t);let s=le.min(),i=Te();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,h,f){const p=ve(l),m=p.xs.get(f);return m!==void 0?M.resolve(p.Ms.get(m)):p.Pi.getTargetData(h,f)})(r,o,gn(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((l=>{i=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:le.min(),n?i:Te()))).next((c=>(AS(r,_R(e),c),{documents:c,Qs:i})))))}function AS(t,e,n){let r=t.Os.get(e)||le.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Os.set(e,r)}class hd{constructor(){this.activeTargetIds=wR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bS{constructor(){this.Mo=new hd,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new hd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class RS{Oo(e){}shutdown(){}}const fd="ConnectivityMonitor";class dd{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Y(fd,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Y(fd,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let go=null;function ll(){return go===null?go=(function(){return 268435456+Math.round(2147483648*Math.random())})():go++,"0x"+go.toString(16)}const wc="RestConnection",SS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class CS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Wo?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=ll(),c=this.zo(e,n.toUriEncodedString());Y(wc,`Sending RPC '${e}' ${o}:`,c,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:h}=new URL(c),f=vr(h);return this.Jo(e,c,l,r,f).then((p=>(Y(wc,`Received RPC '${e}' ${o}: `,p),p)),(p=>{throw ws(wc,`RPC '${e}' ${o} failed with error: `,p,"url: ",c,"request:",r),p}))}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ks})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,n){const r=SS[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class PS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const dt="WebChannelConnection";class NS extends CS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=ll();return new Promise(((c,l)=>{const h=new zg;h.setWithCredentials(!0),h.listenOnce(Gg.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Ao.NO_ERROR:const p=h.getResponseJson();Y(dt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),c(p);break;case Ao.TIMEOUT:Y(dt,`RPC '${e}' ${o} timed out`),l(new Z(H.DEADLINE_EXCEEDED,"Request time out"));break;case Ao.HTTP_ERROR:const m=h.getStatus();if(Y(dt,`RPC '${e}' ${o} failed with status:`,m,"response text:",h.getResponseText()),m>0){let v=h.getResponseJson();Array.isArray(v)&&(v=v[0]);const P=v?.error;if(P&&P.status&&P.message){const k=(function(j){const F=j.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(F)>=0?F:H.UNKNOWN})(P.status);l(new Z(k,P.message))}else l(new Z(H.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Z(H.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{Y(dt,`RPC '${e}' ${o} completed.`)}}));const f=JSON.stringify(s);Y(dt,`RPC '${e}' ${o} sending request:`,s),h.send(n,"POST",f,r,15)}))}T_(e,n,r){const s=ll(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Qg(),c=Wg(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const f=i.join("");Y(dt,`Creating RPC '${e}' stream ${s}: ${f}`,l);const p=o.createWebChannel(f,l);this.I_(p);let m=!1,v=!1;const P=new PS({Yo:O=>{v?Y(dt,`Not sending because RPC '${e}' stream ${s} is closed:`,O):(m||(Y(dt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),Y(dt,`RPC '${e}' stream ${s} sending:`,O),p.send(O))},Zo:()=>p.close()}),k=(O,j,F)=>{O.listen(j,(q=>{try{F(q)}catch(z){setTimeout((()=>{throw z}),0)}}))};return k(p,si.EventType.OPEN,(()=>{v||(Y(dt,`RPC '${e}' stream ${s} transport opened.`),P.o_())})),k(p,si.EventType.CLOSE,(()=>{v||(v=!0,Y(dt,`RPC '${e}' stream ${s} transport closed`),P.a_(),this.E_(p))})),k(p,si.EventType.ERROR,(O=>{v||(v=!0,ws(dt,`RPC '${e}' stream ${s} transport errored. Name:`,O.name,"Message:",O.message),P.a_(new Z(H.UNAVAILABLE,"The operation could not be completed")))})),k(p,si.EventType.MESSAGE,(O=>{if(!v){const j=O.data[0];Me(!!j,16349);const F=j,q=F?.error||F[0]?.error;if(q){Y(dt,`RPC '${e}' stream ${s} received error:`,q);const z=q.status;let ie=(function(_){const I=Ge[_];if(I!==void 0)return Rm(I)})(z),oe=q.message;ie===void 0&&(ie=H.INTERNAL,oe="Unknown error status: "+z+" with message "+q.message),v=!0,P.a_(new Z(ie,oe)),p.close()}else Y(dt,`RPC '${e}' stream ${s} received:`,j),P.u_(j)}})),k(c,Kg.STAT_EVENT,(O=>{O.stat===Qc.PROXY?Y(dt,`RPC '${e}' stream ${s} detected buffering proxy`):O.stat===Qc.NOPROXY&&Y(dt,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{P.__()}),0),P}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Ac(){return typeof document<"u"?document:null}function Va(t){return new BR(t,!0)}class jm{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const pd="PersistentStream";class kS{constructor(e,n,r,s,i,o,c,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jm(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(Mn(n.toString()),Mn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new Z(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Y(pd,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Y(pd,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class OS extends kS{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=$R(this.serializer,e),r=(function(i){if(!("targetChange"in i))return le.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?fs(o.readTime):le.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=od(this.serializer),n.addTarget=(function(i,o){let c;const l=o.target;if(c=el(l)?{documents:qR(i,l)}:{query:HR(i,l).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=Pm(i,o.resumeToken);const h=il(i,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(le.min())>0){c.readTime=ol(i,o.snapshotVersion.toTimestamp());const h=il(i,o.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const r=GR(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=od(this.serializer),n.removeTarget=e,this.q_(n)}}class DS{}class VS extends DS{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Z(H.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,al(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Z(H.UNKNOWN,i.toString())}))}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,al(n,r),s,o,c,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(H.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class xS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Mn(n),this.aa=!1):Y("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Cs="RemoteStore";class MS{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{Hi(this)&&(Y(Cs,"Restarting streams for network reachability change."),await(async function(l){const h=ve(l);h.Ea.add(4),await qi(h),h.Ra.set("Unknown"),h.Ea.delete(4),await xa(h)})(this))}))})),this.Ra=new xS(r,s)}}async function xa(t){if(Hi(t))for(const e of t.da)await e(!0)}async function qi(t){for(const e of t.da)await e(!1)}function $m(t,e){const n=ve(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),du(n)?fu(n):xs(n).O_()&&hu(n,e))}function uu(t,e){const n=ve(t),r=xs(n);n.Ia.delete(e),r.O_()&&qm(n,e),n.Ia.size===0&&(r.O_()?r.L_():Hi(n)&&n.Ra.set("Unknown"))}function hu(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xs(t).Y_(e)}function qm(t,e){t.Va.Ue(e),xs(t).Z_(e)}function fu(t){t.Va=new MR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),xs(t).start(),t.Ra.ua()}function du(t){return Hi(t)&&!xs(t).x_()&&t.Ia.size>0}function Hi(t){return ve(t).Ea.size===0}function Hm(t){t.Va=void 0}async function LS(t){t.Ra.set("Online")}async function US(t){t.Ia.forEach(((e,n)=>{hu(t,e)}))}async function FS(t,e){Hm(t),du(t)?(t.Ra.ha(e),fu(t)):t.Ra.set("Unknown")}async function BS(t,e,n){if(t.Ra.set("Online"),e instanceof Cm&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.Va.removeTarget(c))})(t,e)}catch(r){Y(Cs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await gd(t,r)}else if(e instanceof Co?t.Va.Ze(e):e instanceof Sm?t.Va.st(e):t.Va.tt(e),!n.isEqual(le.min()))try{const r=await Bm(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach(((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const f=i.Ia.get(h);f&&i.Ia.set(h,f.withResumeToken(l.resumeToken,o))}})),c.targetMismatches.forEach(((l,h)=>{const f=i.Ia.get(l);if(!f)return;i.Ia.set(l,f.withResumeToken(lt.EMPTY_BYTE_STRING,f.snapshotVersion)),qm(i,l);const p=new sr(f.target,l,h,f.sequenceNumber);hu(i,p)})),i.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){Y(Cs,"Failed to raise snapshot:",r),await gd(t,r)}}async function gd(t,e,n){if(!Os(e))throw e;t.Ea.add(1),await qi(t),t.Ra.set("Offline"),n||(n=()=>Bm(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Y(Cs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await xa(t)}))}async function md(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),Y(Cs,"RemoteStore received new credentials");const r=Hi(n);n.Ea.add(3),await qi(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await xa(n)}async function jS(t,e){const n=ve(t);e?(n.Ea.delete(2),await xa(n)):e||(n.Ea.add(2),await qi(n),n.Ra.set("Unknown"))}function xs(t){return t.ma||(t.ma=(function(n,r,s){const i=ve(n);return i.sa(),new OS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:LS.bind(null,t),t_:US.bind(null,t),r_:FS.bind(null,t),H_:BS.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),du(t)?fu(t):t.Ra.set("Unknown")):(await t.ma.stop(),Hm(t))}))),t.ma}class pu{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new pu(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zm(t,e){if(Mn("AsyncQueue",`${e}: ${t}`),Os(t))return new Z(H.UNAVAILABLE,`${e}: ${t}`);throw t}class ds{static emptySet(e){return new ds(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||se.comparator(n.key,r.key):(n,r)=>se.comparator(n.key,r.key),this.keyedMap=ii(),this.sortedSet=new qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ds)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ds;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class _d{constructor(){this.ga=new qe(se.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ue(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Ps{constructor(e,n,r,s,i,o,c,l,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new Ps(e,n,ds.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class $S{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class qS{constructor(){this.queries=yd(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ve(n),i=s.queries;s.queries=yd(),i.forEach(((o,c)=>{for(const l of c.Sa)l.onError(r)}))})(this,new Z(H.ABORTED,"Firestore shutting down"))}}function yd(){return new Hr((t=>mm(t)),Pa)}async function HS(t,e){const n=ve(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new $S,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=zm(o,`Initialization of query '${es(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&gu(n)}async function zS(t,e){const n=ve(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function GS(t,e){const n=ve(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.Sa)c.Fa(s)&&(r=!0);o.wa=s}}r&&gu(n)}function KS(t,e,n){const r=ve(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function gu(t){t.Ca.forEach((e=>{e.next()}))}var ul,vd;(vd=ul||(ul={})).Ma="default",vd.Cache="cache";class WS{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ps(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ps.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ul.Cache}}class Gm{constructor(e){this.key=e}}class Km{constructor(e){this.key=e}}class QS{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Te(),this.mutatedKeys=Te(),this.eu=_m(e),this.tu=new ds(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new _d,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((f,p)=>{const m=s.get(f),v=Na(this.query,p)?p:null,P=!!m&&this.mutatedKeys.has(m.key),k=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let O=!1;m&&v?m.data.isEqual(v.data)?P!==k&&(r.track({type:3,doc:v}),O=!0):this.su(m,v)||(r.track({type:2,doc:v}),O=!0,(l&&this.eu(v,l)>0||h&&this.eu(v,h)<0)&&(c=!0)):!m&&v?(r.track({type:0,doc:v}),O=!0):m&&!v&&(r.track({type:1,doc:m}),O=!0,(l||h)&&(c=!0)),O&&(v?(o=o.add(v),i=k?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((f,p)=>(function(v,P){const k=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{Rt:O})}};return k(v)-k(P)})(f.type,p.type)||this.eu(f.doc,p.doc))),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,h=l!==this.Za;return this.Za=l,o.length!==0||h?{snapshot:new Ps(this.query,e.tu,i,o,e.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new _d,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Te(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new Km(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new Gm(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Te();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ps.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const mu="SyncEngine";class JS{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class XS{constructor(e){this.key=e,this.hu=!1}}class YS{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Hr((c=>mm(c)),Pa),this.Iu=new Map,this.Eu=new Set,this.du=new qe(se.comparator),this.Au=new Map,this.Ru=new ou,this.Vu={},this.mu=new Map,this.fu=Ss.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ZS(t,e,n=!0){const r=Ym(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Wm(r,e,n,!0),s}async function eC(t,e){const n=Ym(t);await Wm(n,e,!0,!1)}async function Wm(t,e,n,r){const s=await wS(t.localStore,gn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await tC(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&$m(t.remoteStore,s),c}async function tC(t,e,n,r,s){t.pu=(p,m,v)=>(async function(k,O,j,F){let q=O.view.ru(j);q.Cs&&(q=await ud(k.localStore,O.query,!1).then((({documents:y})=>O.view.ru(y,q))));const z=F&&F.targetChanges.get(O.targetId),ie=F&&F.targetMismatches.get(O.targetId)!=null,oe=O.view.applyChanges(q,k.isPrimaryClient,z,ie);return Td(k,O.targetId,oe.au),oe.snapshot})(t,p,m,v);const i=await ud(t.localStore,e,!0),o=new QS(e,i.Qs),c=o.ru(i.documents),l=$i.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(c,t.isPrimaryClient,l);Td(t,n,h.au);const f=new JS(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function nC(t,e,n){const r=ve(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!Pa(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await cl(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&uu(r.remoteStore,s.targetId),hl(r,s.targetId)})).catch(ba)):(hl(r,s.targetId),await cl(r.localStore,s.targetId,!0))}async function rC(t,e){const n=ve(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),uu(n.remoteStore,r.targetId))}async function Qm(t,e){const n=ve(t);try{const r=await TS(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(Me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Me(o.hu,14607):s.removedDocuments.size>0&&(Me(o.hu,42227),o.hu=!1))})),await Xm(n,r,e)}catch(r){await ba(r)}}function Ed(t,e,n){const r=ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(o,c){const l=ve(o);l.onlineState=c;let h=!1;l.queries.forEach(((f,p)=>{for(const m of p.Sa)m.va(c)&&(h=!0)})),h&&gu(l)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function sC(t,e,n){const r=ve(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new qe(se.comparator);o=o.insert(i,mt.newNoDocument(i,le.min()));const c=Te().add(i),l=new Da(le.min(),new Map,new qe(_e),o,c);await Qm(r,l),r.du=r.du.remove(i),r.Au.delete(e),_u(r)}else await cl(r.localStore,e,!1).then((()=>hl(r,e,n))).catch(ba)}function hl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||Jm(t,r)}))}function Jm(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(uu(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),_u(t))}function Td(t,e,n){for(const r of n)r instanceof Gm?(t.Ru.addReference(r.key,e),iC(t,r)):r instanceof Km?(Y(mu,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Jm(t,r.key)):ue(19791,{wu:r})}function iC(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Y(mu,"New document in limbo: "+n),t.Eu.add(r),_u(t))}function _u(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new se(Ve.fromString(e)),r=t.fu.next();t.Au.set(r,new XS(n)),t.du=t.du.insert(n,r),$m(t.remoteStore,new sr(gn(tu(n.path)),r,"TargetPurposeLimboResolution",Ra.ce))}}async function Xm(t,e,n){const r=ve(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,l)=>{o.push(r.pu(l,e,n).then((h=>{if((h||n)&&r.isPrimaryClient){const f=h?!h.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(h){s.push(h);const f=cu.As(l.targetId,h);i.push(f)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(l,h){const f=ve(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>M.forEach(h,(m=>M.forEach(m.Es,(v=>f.persistence.referenceDelegate.addReference(p,m.targetId,v))).next((()=>M.forEach(m.ds,(v=>f.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))))))}catch(p){if(!Os(p))throw p;Y(lu,"Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const v=f.Ms.get(m),P=v.snapshotVersion,k=v.withLastLimboFreeSnapshotVersion(P);f.Ms=f.Ms.insert(m,k)}}})(r.localStore,i))}async function oC(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){Y(mu,"User change. New user:",e.toKey());const r=await Fm(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((c=>{c.forEach((l=>{l.reject(new Z(H.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Xm(n,r.Ls)}}function aC(t,e){const n=ve(t),r=n.Au.get(e);if(r&&r.hu)return Te().add(r.key);{let s=Te();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function Ym(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sC.bind(null,e),e.Pu.H_=GS.bind(null,e.eventManager),e.Pu.yu=KS.bind(null,e.eventManager),e}class ea{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Va(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return ES(this.persistence,new _S,e.initialUser,this.serializer)}Cu(e){return new Um(au.mi,this.serializer)}Du(e){return new bS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ea.provider={build:()=>new ea};class cC extends ea{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Me(this.persistence.referenceDelegate instanceof Zo,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new nS(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ot.withCacheSize(this.cacheSizeBytes):Ot.DEFAULT;return new Um((r=>Zo.mi(r,n)),this.serializer)}}class fl{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ed(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=oC.bind(null,this.syncEngine),await jS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new qS})()}createDatastore(e){const n=Va(e.databaseInfo.databaseId),r=(function(i){return new NS(i)})(e.databaseInfo);return(function(i,o,c,l){return new VS(i,o,c,l)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,c){return new MS(r,s,i,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>Ed(this.syncEngine,n,0)),(function(){return dd.v()?new dd:new RS})())}createSyncEngine(e,n){return(function(s,i,o,c,l,h,f){const p=new YS(s,i,o,c,l,h);return f&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=ve(n);Y(Cs,"RemoteStore shutting down."),r.Ea.add(5),await qi(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}fl.provider={build:()=>new fl};class lC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Mn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const _r="FirestoreClient";class uC{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=pt.UNAUTHENTICATED,this.clientId=Yg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{Y(_r,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Y(_r,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=zm(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function bc(t,e){t.asyncQueue.verifyOperationInProgress(),Y(_r,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await Fm(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Id(t,e){t.asyncQueue.verifyOperationInProgress();const n=await hC(t);Y(_r,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>md(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>md(e.remoteStore,s))),t._onlineComponents=e}async function hC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(_r,"Using user provided OfflineComponentProvider");try{await bc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===H.FAILED_PRECONDITION||s.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;ws("Error using user provided cache. Falling back to memory cache: "+n),await bc(t,new ea)}}else Y(_r,"Using default OfflineComponentProvider"),await bc(t,new cC(void 0));return t._offlineComponents}async function fC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(_r,"Using user provided OnlineComponentProvider"),await Id(t,t._uninitializedComponentsProvider._online)):(Y(_r,"Using default OnlineComponentProvider"),await Id(t,new fl))),t._onlineComponents}async function wd(t){const e=await fC(t),n=e.eventManager;return n.onListen=ZS.bind(null,e.syncEngine),n.onUnlisten=nC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=eC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rC.bind(null,e.syncEngine),n}function Zm(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const Ad=new Map;const e_="firestore.googleapis.com",bd=!0;class Rd{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Z(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=e_,this.ssl=bd}else this.host=e.host,this.ssl=e.ssl??bd;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Lm;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<eS)throw new Z(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zm(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Z(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Z(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Z(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rd(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Db;switch(r.type){case"firstParty":return new Lb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Ad.get(n);r&&(Y("ComponentProvider","Removing Datastore"),Ad.delete(n),r.terminate())})(this),Promise.resolve()}}function dC(t,e,n,r={}){t=bo(t,yu);const s=vr(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(Bl(`https://${c}`),jl("Firestore",!0)),i.host!==e_&&i.host!==c&&ws("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:c,ssl:s,emulatorOptions:r};if(!Lr(l,o)&&(t._setSettings(l),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=pt.MOCK_USER;else{h=Tg(r.mockUserToken,t._app?.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Z(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new pt(p)}t._authCredentials=new Vb(new Xg(h,f))}}class zr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zr(this.firestore,e,this._query)}}class vt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}toJSON(){return{type:vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ji(n,vt._jsonSchema))return new vt(e,r||null,new se(Ve.fromString(n.referencePath)))}}vt._jsonSchemaVersion="firestore/documentReference/1.0",vt._jsonSchema={type:We("string",vt._jsonSchemaVersion),referencePath:We("string")};class ps extends zr{constructor(e,n,r){super(e,n,tu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new se(e))}withConverter(e){return new ps(this.firestore,e,this._path)}}function pC(t,e,...n){if(t=Ct(t),t instanceof yu){const r=Ve.fromString(e,...n);return Lf(r),new ps(t,null,r)}{if(!(t instanceof vt||t instanceof ps))throw new Z(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return Lf(r),new ps(t.firestore,null,r)}}const Sd="AsyncQueue";class Cd{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jm(this,"async_queue_retry"),this._c=()=>{const r=Ac();r&&Y(Sd,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Ac();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Ac();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new hs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Os(e))throw e;Y(Sd,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Mn("INTERNAL UNHANDLED ERROR: ",Pd(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=pu.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&ue(47125,{Pc:Pd(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Pd(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function Nd(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(t,["next","error","complete"])}class dl extends yu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Cd,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cd(e),this._firestoreClient=void 0,await e}}}function gC(t,e){const n=typeof t=="object"?t:Hl(),r=typeof t=="string"?t:Wo,s=wa(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=yg("firestore");i&&dC(s,...i)}return s}function mC(t){if(t._terminated)throw new Z(H.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_C(t),t._firestoreClient}function _C(t){const e=t._freezeSettings(),n=(function(s,i,o,c){return new tR(s,i,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Zm(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new uC(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}class Ht{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ht(lt.fromBase64String(e))}catch(n){throw new Z(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ht(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ht._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ji(e,Ht._jsonSchema))return Ht.fromBase64String(e.bytes)}}Ht._jsonSchemaVersion="firestore/bytes/1.0",Ht._jsonSchema={type:We("string",Ht._jsonSchemaVersion),bytes:We("string")};class t_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class n_{constructor(e){this._methodName=e}}class mn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mn._jsonSchemaVersion}}static fromJSON(e){if(ji(e,mn._jsonSchema))return new mn(e.latitude,e.longitude)}}mn._jsonSchemaVersion="firestore/geoPoint/1.0",mn._jsonSchema={type:We("string",mn._jsonSchemaVersion),latitude:We("number"),longitude:We("number")};class _n{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ji(e,_n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new _n(e.vectorValues);throw new Z(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_n._jsonSchemaVersion="firestore/vectorValue/1.0",_n._jsonSchema={type:We("string",_n._jsonSchemaVersion),vectorValues:We("object")};const yC=/^__.*__$/;function r_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ac:t})}}class vu{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new vu({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return pl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(r_(this.Ac)&&yC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Va(e)}Cc(e,n,r,s=!1){return new vu({Ac:e,methodName:n,Dc:r,path:yt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function EC(t){const e=t._freezeSettings(),n=Va(t._databaseId);return new vC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function TC(t,e,n,r=!1){return Eu(n,t.Cc(r?4:3,e))}function Eu(t,e){if(s_(t=Ct(t)))return wC("Unsupported field value:",e,t),IC(t,e);if(t instanceof n_)return(function(r,s){if(!r_(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const c of r){let l=Eu(c,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=Ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return AR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=xe.fromDate(r);return{timestampValue:ol(s.serializer,i)}}if(r instanceof xe){const i=new xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ol(s.serializer,i)}}if(r instanceof mn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ht)return{bytesValue:Pm(s.serializer,r._byteString)};if(r instanceof vt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Nm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof _n)return(function(o,c){return{mapValue:{fields:{[am]:{stringValue:cm},[Qo]:{arrayValue:{values:o.toArray().map((h=>{if(typeof h!="number")throw c.Sc("VectorValues must only contain numeric values.");return nu(c.serializer,h)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${Aa(r)}`)})(t,e)}function IC(t,e){const n={};return tm(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ds(t,((r,s)=>{const i=Eu(s,e.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function s_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xe||t instanceof mn||t instanceof Ht||t instanceof vt||t instanceof n_||t instanceof _n)}function wC(t,e,n){if(!s_(n)||!Zg(n)){const r=Aa(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}const AC=new RegExp("[~\\*/\\[\\]]");function bC(t,e,n){if(e.search(AC)>=0)throw pl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new t_(...e.split("."))._internalPath}catch{throw pl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Z(H.INVALID_ARGUMENT,c+t+l)}class i_{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Tu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class RC extends i_{data(){return super.data()}}function Tu(t,e){return typeof e=="string"?bC(t,e):e instanceof t_?e._internalPath:e._delegate._internalPath}function SC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Z(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Iu{}class o_ extends Iu{}function CC(t,e,...n){let r=[];e instanceof Iu&&r.push(e),r=r.concat(n),(function(i){const o=i.filter((l=>l instanceof Au)).length,c=i.filter((l=>l instanceof wu)).length;if(o>1||o>0&&c>0)throw new Z(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class wu extends o_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new wu(e,n,r)}_apply(e){const n=this._parse(e);return a_(e._query,n),new zr(e.firestore,e.converter,tl(e._query,n))}_parse(e){const n=EC(e.firestore);return(function(i,o,c,l,h,f,p){let m;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Z(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Od(p,f);const P=[];for(const k of p)P.push(kd(l,i,k));m={arrayValue:{values:P}}}else m=kd(l,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Od(p,f),m=TC(c,o,p,f==="in"||f==="not-in");return Ke.create(h,f,m)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Au extends Iu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Au(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:en.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let o=s;const c=i.getFlattenedFilters();for(const l of c)a_(o,l),o=tl(o,l)})(e._query,n),new zr(e.firestore,e.converter,tl(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bu extends o_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new bu(e,n)}_apply(e){const n=(function(s,i,o){if(s.startAt!==null)throw new Z(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Z(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vi(i,o)})(e._query,this._field,this._direction);return new zr(e.firestore,e.converter,(function(s,i){const o=s.explicitOrderBy.concat([i]);return new Vs(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function PC(t,e="asc"){const n=e,r=Tu("orderBy",t);return bu._create(r,n)}function kd(t,e,n){if(typeof(n=Ct(n))=="string"){if(n==="")throw new Z(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gm(e)&&n.indexOf("/")!==-1)throw new Z(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ve.fromString(n));if(!se.isDocumentKey(r))throw new Z(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zf(t,new se(r))}if(n instanceof vt)return zf(t,n._key);throw new Z(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Aa(n)}.`)}function Od(t,e){if(!Array.isArray(t)||t.length===0)throw new Z(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function a_(t,e){const n=(function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Z(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Z(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class NC{convertValue(e,n="none"){switch(gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ds(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[Qo].arrayValue?.values?.map((r=>$e(r.doubleValue)));return new _n(n)}convertGeoPoint(e){return new mn($e(e.latitude),$e(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ca(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ki(e));default:return null}}convertTimestamp(e){const n=dr(e);return new xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ve.fromString(e);Me(Mm(r),9688,{name:e});const s=new Oi(r.get(1),r.get(3)),i=new se(r.popFirst(5));return s.isEqual(n)||Mn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}class ai{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mr extends i_{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Po(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Tu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Mr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Mr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mr._jsonSchema={type:We("string",Mr._jsonSchemaVersion),bundleSource:We("string","DocumentSnapshot"),bundleName:We("string"),bundle:We("string")};class Po extends Mr{data(e={}){return super.data(e)}}class gs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ai(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Po(this._firestore,this._userDataWriter,r.key,r,new ai(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((c=>{const l=new Po(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ai(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const l=new Po(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ai(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:kC(c.type),doc:l,oldIndex:h,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=gs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function kC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:t})}}gs._jsonSchemaVersion="firestore/querySnapshot/1.0",gs._jsonSchema={type:We("string",gs._jsonSchemaVersion),bundleSource:We("string","QuerySnapshot"),bundleName:We("string"),bundle:We("string")};class c_ extends NC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ht(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,n)}}function OC(t,...e){t=Ct(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Nd(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Nd(e[r])){const l=e[r];e[r]=l.next?.bind(l),e[r+1]=l.error?.bind(l),e[r+2]=l.complete?.bind(l)}let i,o,c;if(t instanceof vt)o=bo(t.firestore,dl),c=tu(t._key.path),i={next:l=>{e[r]&&e[r](DC(o,t,l))},error:e[r+1],complete:e[r+2]};else{const l=bo(t,zr);o=bo(l.firestore,dl),c=l._query;const h=new c_(o);i={next:f=>{e[r]&&e[r](new gs(o,h,l,f))},error:e[r+1],complete:e[r+2]},SC(t._query)}return(function(h,f,p,m){const v=new lC(m),P=new WS(f,v,p);return h.asyncQueue.enqueueAndForget((async()=>HS(await wd(h),P))),()=>{v.Nu(),h.asyncQueue.enqueueAndForget((async()=>zS(await wd(h),P)))}})(mC(o),c,s,i)}function DC(t,e,n){const r=n.docs.get(e._key),s=new c_(t);return new Mr(t,s,e._key,r,new ai(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){ks=s})(qr),Ur(new hr("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new dl(new xb(r.getProvider("auth-internal")),new Ub(o,r.getProvider("app-check-internal")),(function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Z(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oi(h.options.projectId,f)})(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),pn(Df,Vf,e),pn(Df,Vf,"esm2020")})();function l_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VC=l_,u_=new Fi("auth","Firebase",l_());const ta=new $l("@firebase/auth");function xC(t,...e){ta.logLevel<=ge.WARN&&ta.warn(`Auth (${qr}): ${t}`,...e)}function No(t,...e){ta.logLevel<=ge.ERROR&&ta.error(`Auth (${qr}): ${t}`,...e)}function Ln(t,...e){throw Ru(t,...e)}function yn(t,...e){return Ru(t,...e)}function h_(t,e,n){const r={...VC(),[e]:n};return new Fi("auth","Firebase",r).create(e,{appName:t.name})}function lr(t){return h_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ru(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return u_.create(t,...e)}function ae(t,e,...n){if(!t)throw Ru(e,...n)}function Nn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw No(e),new Error(e)}function Un(t,e){t||Nn(e)}function gl(){return typeof self<"u"&&self.location?.href||""}function MC(){return Dd()==="http:"||Dd()==="https:"}function Dd(){return typeof self<"u"&&self.location?.protocol||null}function LC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MC()||JI()||"connection"in navigator)?navigator.onLine:!0}function UC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class zi{constructor(e,n){this.shortDelay=e,this.longDelay=n,Un(n>e,"Short delay should be less than long delay!"),this.isMobile=KI()||XI()}get(){return LC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Su(t,e){Un(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class f_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const FC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const BC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],jC=new zi(3e4,6e4);function Ma(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ms(t,e,n,r,s={}){return d_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=Bi({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:l,...i};return QI()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&vr(t.emulatorConfig.host)&&(h.credentials="include"),f_.fetch()(await g_(t,t.config.apiHost,n,c),h)})}async function d_(t,e,n){t._canInitEmulator=!1;const r={...FC,...e};try{const s=new $C(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw mo(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[l,h]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw mo(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw mo(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw mo(t,"user-disabled",o);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw h_(t,f,h);Ln(t,f)}}catch(s){if(s instanceof wn)throw s;Ln(t,"network-request-failed",{message:String(s)})}}async function p_(t,e,n,r,s={}){const i=await Ms(t,e,n,r,s);return"mfaPendingCredential"in i&&Ln(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function g_(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Su(t.config,s):`${t.config.apiScheme}://${s}`;return BC.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class $C{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yn(this.auth,"network-request-failed")),jC.get())})}}function mo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=yn(t,e,r);return s.customData._tokenResponse=n,s}async function qC(t,e){return Ms(t,"POST","/v1/accounts:delete",e)}async function na(t,e){return Ms(t,"POST","/v1/accounts:lookup",e)}function Ii(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function HC(t,e=!1){const n=Ct(t),r=await n.getIdToken(e),s=Cu(r);ae(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:Ii(Rc(s.auth_time)),issuedAtTime:Ii(Rc(s.iat)),expirationTime:Ii(Rc(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Rc(t){return Number(t)*1e3}function Cu(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return No("JWT malformed, contained fewer than 3 sections"),null;try{const s=mg(n);return s?JSON.parse(s):(No("Failed to decode base64 JWT payload"),null)}catch(s){return No("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Vd(t){const e=Cu(t);return ae(e,"internal-error"),ae(typeof e.exp<"u","internal-error"),ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function xi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof wn&&zC(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function zC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class GC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class ml{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ii(this.lastLoginAt),this.creationTime=Ii(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ra(t){const e=t.auth,n=await t.getIdToken(),r=await xi(t,na(e,{idToken:n}));ae(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=s.providerUserInfo?.length?m_(s.providerUserInfo):[],o=WC(t.providerData,i),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!o?.length,h=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ml(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function KC(t){const e=Ct(t);await ra(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WC(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function m_(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function QC(t,e){const n=await d_(t,{},async()=>{const r=Bi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await g_(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:c,body:r};return t.emulatorConfig&&vr(t.emulatorConfig.host)&&(l.credentials="include"),f_.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function JC(t,e){return Ms(t,"POST","/v2/accounts:revokeToken",Ma(t,e))}class ms{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken<"u","internal-error"),ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vd(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ae(e.length!==0,"internal-error");const n=Vd(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await QC(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ms;return r&&(ae(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ae(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ae(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ms,this.toJSON())}_performRefresh(){return Nn("not implemented")}}function Kn(t,e){ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Jt{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new GC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ml(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await xi(this,this.stsTokenManager.getToken(this.auth,e));return ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return HC(this,e)}reload(){return KC(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Jt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ra(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qt(this.auth.app))return Promise.reject(lr(this.auth));const e=await this.getIdToken();return await xi(this,qC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,l=n._redirectEventId??void 0,h=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:v,providerData:P,stsTokenManager:k}=n;ae(p&&k,e,"internal-error");const O=ms.fromJSON(this.name,k);ae(typeof p=="string",e,"internal-error"),Kn(r,e.name),Kn(s,e.name),ae(typeof m=="boolean",e,"internal-error"),ae(typeof v=="boolean",e,"internal-error"),Kn(i,e.name),Kn(o,e.name),Kn(c,e.name),Kn(l,e.name),Kn(h,e.name),Kn(f,e.name);const j=new Jt({uid:p,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:v,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:O,createdAt:h,lastLoginAt:f});return P&&Array.isArray(P)&&(j.providerData=P.map(F=>({...F}))),l&&(j._redirectEventId=l),j}static async _fromIdTokenResponse(e,n,r=!1){const s=new ms;s.updateFromServerResponse(n);const i=new Jt({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ra(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ae(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?m_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,c=new ms;c.updateFromIdToken(r);const l=new Jt({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new ml(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(l,h),l}}const xd=new Map;function kn(t){Un(t instanceof Function,"Expected a class definition");let e=xd.get(t);return e?(Un(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xd.set(t,e),e)}class __{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}__.type="NONE";const Md=__;function ko(t,e,n){return`firebase:${t}:${e}:${n}`}class _s{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ko(this.userKey,s.apiKey,i),this.fullPersistenceKey=ko("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await na(this.auth,{idToken:e}).catch(()=>{});return n?Jt._fromGetAccountInfoResponse(this.auth,n,e):null}return Jt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new _s(kn(Md),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||kn(Md);const o=ko(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const f=await h._get(o);if(f){let p;if(typeof f=="string"){const m=await na(e,{idToken:f}).catch(()=>{});if(!m)break;p=await Jt._fromGetAccountInfoResponse(e,m,f)}else p=Jt._fromJSON(e,f);h!==i&&(c=p),i=h;break}}catch{}const l=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new _s(i,e,r):(i=l[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new _s(i,e,r))}}function Ld(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(T_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(y_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(w_(e))return"Blackberry";if(A_(e))return"Webos";if(v_(e))return"Safari";if((e.includes("chrome/")||E_(e))&&!e.includes("edge/"))return"Chrome";if(I_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function y_(t=Tt()){return/firefox\//i.test(t)}function v_(t=Tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function E_(t=Tt()){return/crios\//i.test(t)}function T_(t=Tt()){return/iemobile/i.test(t)}function I_(t=Tt()){return/android/i.test(t)}function w_(t=Tt()){return/blackberry/i.test(t)}function A_(t=Tt()){return/webos/i.test(t)}function Pu(t=Tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function XC(t=Tt()){return Pu(t)&&!!window.navigator?.standalone}function YC(){return YI()&&document.documentMode===10}function b_(t=Tt()){return Pu(t)||I_(t)||A_(t)||w_(t)||/windows phone/i.test(t)||T_(t)}function R_(t,e=[]){let n;switch(t){case"Browser":n=Ld(Tt());break;case"Worker":n=`${Ld(Tt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qr}/${r}`}class ZC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const l=e(i);o(l)}catch(l){c(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function eP(t,e={}){return Ms(t,"GET","/v2/passwordPolicy",Ma(t,e))}const tP=6;class nP{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??tP,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class rP{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ud(this),this.idTokenSubscription=new Ud(this),this.beforeStateQueue=new ZC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=kn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await _s.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await na(this,{idToken:e}),r=await Jt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(qt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===o)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ra(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qt(this.app))return Promise.reject(lr(this));const n=e?Ct(e):null;return n&&ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qt(this.app)?Promise.reject(lr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qt(this.app)?Promise.reject(lr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(kn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await eP(this),n=new nP(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await JC(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&kn(e)||this._popupRedirectResolver;ae(n,this,"argument-error"),this.redirectPersistenceManager=await _s.create(this,[kn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=R_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&xC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function La(t){return Ct(t)}class Ud{constructor(e){this.auth=e,this.observer=null,this.addObserver=ow(n=>this.observer=n)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Nu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sP(t){Nu=t}function iP(t){return Nu.loadJS(t)}function oP(){return Nu.gapiScript}function aP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function cP(t,e){const n=wa(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Lr(i,e??{}))return s;Ln(s,"already-initialized")}return n.initialize({options:e})}function lP(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(kn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function uP(t,e,n){const r=La(t);ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=S_(e),{host:o,port:c}=hP(e),l=c===null?"":`:${c}`,h={url:`${i}//${o}${l}/`},f=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ae(Lr(h,r.config.emulator)&&Lr(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,vr(o)?(Bl(`${i}//${o}${l}`),jl("Auth",!0)):fP()}function S_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function hP(t){const e=S_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Fd(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Fd(o)}}}function Fd(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function fP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class C_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Nn("not implemented")}_getIdTokenResponse(e){return Nn("not implemented")}_linkToIdToken(e,n){return Nn("not implemented")}_getReauthenticationResolver(e){return Nn("not implemented")}}async function ys(t,e){return p_(t,"POST","/v1/accounts:signInWithIdp",Ma(t,e))}const dP="http://localhost";class jr extends C_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new jr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ln("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new jr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ys(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ys(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ys(e,n)}buildRequest(){const e={requestUri:dP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Bi(n)}return e}}class P_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Gi extends P_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Zn extends Gi{constructor(){super("facebook.com")}static credential(e){return jr._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zn.credential(e.oauthAccessToken)}catch{return null}}}Zn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zn.PROVIDER_ID="facebook.com";class er extends Gi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return jr._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return er.credential(n,r)}catch{return null}}}er.GOOGLE_SIGN_IN_METHOD="google.com";er.PROVIDER_ID="google.com";class tr extends Gi{constructor(){super("github.com")}static credential(e){return jr._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.GITHUB_SIGN_IN_METHOD="github.com";tr.PROVIDER_ID="github.com";class nr extends Gi{constructor(){super("twitter.com")}static credential(e,n){return jr._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return nr.credential(n,r)}catch{return null}}}nr.TWITTER_SIGN_IN_METHOD="twitter.com";nr.PROVIDER_ID="twitter.com";async function pP(t,e){return p_(t,"POST","/v1/accounts:signUp",Ma(t,e))}class yr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Jt._fromIdTokenResponse(e,r,s),o=Bd(r);return new yr({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Bd(r);return new yr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Bd(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function gP(t){if(qt(t.app))return Promise.reject(lr(t));const e=La(t);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new yr({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await pP(e,{returnSecureToken:!0}),r=await yr._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}class sa extends wn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,sa.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new sa(e,n,r,s)}}function N_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?sa._fromErrorAndOperation(t,i,e,r):i})}async function mP(t,e,n=!1){const r=await xi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return yr._forOperation(t,"link",r)}async function _P(t,e,n=!1){const{auth:r}=t;if(qt(r.app))return Promise.reject(lr(r));const s="reauthenticate";try{const i=await xi(t,N_(r,s,e,t),n);ae(i.idToken,r,"internal-error");const o=Cu(i.idToken);ae(o,r,"internal-error");const{sub:c}=o;return ae(t.uid===c,r,"user-mismatch"),yr._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&Ln(r,"user-mismatch"),i}}async function yP(t,e,n=!1){if(qt(t.app))return Promise.reject(lr(t));const r="signIn",s=await N_(t,r,e),i=await yr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function vP(t,e,n,r){return Ct(t).onIdTokenChanged(e,n,r)}function EP(t,e,n){return Ct(t).beforeAuthStateChanged(e,n)}const ia="__sak";class k_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ia,"1"),this.storage.removeItem(ia),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const TP=1e3,IP=10;class O_ extends k_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=b_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);YC()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,IP):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},TP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}O_.type="LOCAL";const wP=O_;class D_ extends k_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}D_.type="SESSION";const V_=D_;function AP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Ua{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ua(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async h=>h(n.origin,i)),l=await AP(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ua.receivers=[];function ku(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class bP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,l)=>{const h=ku("",20);s.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(m.data.response);break;default:clearTimeout(f),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function vn(){return window}function RP(t){vn().location.href=t}function x_(){return typeof vn().WorkerGlobalScope<"u"&&typeof vn().importScripts=="function"}async function SP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CP(){return navigator?.serviceWorker?.controller||null}function PP(){return x_()?self:null}const M_="firebaseLocalStorageDb",NP=1,oa="firebaseLocalStorage",L_="fbase_key";class Ki{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Fa(t,e){return t.transaction([oa],e?"readwrite":"readonly").objectStore(oa)}function kP(){const t=indexedDB.deleteDatabase(M_);return new Ki(t).toPromise()}function _l(){const t=indexedDB.open(M_,NP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(oa,{keyPath:L_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(oa)?e(r):(r.close(),await kP(),e(await _l()))})})}async function jd(t,e,n){const r=Fa(t,!0).put({[L_]:e,value:n});return new Ki(r).toPromise()}async function OP(t,e){const n=Fa(t,!1).get(e),r=await new Ki(n).toPromise();return r===void 0?null:r.value}function $d(t,e){const n=Fa(t,!0).delete(e);return new Ki(n).toPromise()}const DP=800,VP=3;class U_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _l(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>VP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return x_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ua._getInstance(PP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await SP(),!this.activeServiceWorker)return;this.sender=new bP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _l();return await jd(e,ia,"1"),await $d(e,ia),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>jd(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>OP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$d(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Fa(s,!1).getAll();return new Ki(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}U_.type="LOCAL";const xP=U_;new zi(3e4,6e4);function MP(t,e){return e?kn(e):(ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Ou extends C_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ys(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ys(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ys(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function LP(t){return yP(t.auth,new Ou(t),t.bypassAuthState)}function UP(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),_P(n,new Ou(t),t.bypassAuthState)}async function FP(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),mP(n,new Ou(t),t.bypassAuthState)}class F_{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LP;case"linkViaPopup":case"linkViaRedirect":return FP;case"reauthViaPopup":case"reauthViaRedirect":return UP;default:Ln(this.auth,"internal-error")}}resolve(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const BP=new zi(2e3,1e4);class is extends F_{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,is.currentPopupAction&&is.currentPopupAction.cancel(),is.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ae(e,this.auth,"internal-error"),e}async onExecution(){Un(this.filter.length===1,"Popup operations only handle one event");const e=ku();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,is.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BP.get())};e()}}is.currentPopupAction=null;const jP="pendingRedirect",Oo=new Map;class $P extends F_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Oo.get(this.auth._key());if(!e){try{const r=await qP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Oo.set(this.auth._key(),e)}return this.bypassAuthState||Oo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qP(t,e){const n=GP(e),r=zP(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function HP(t,e){Oo.set(t._key(),e)}function zP(t){return kn(t._redirectPersistence)}function GP(t){return ko(jP,t.config.apiKey,t.name)}async function KP(t,e,n=!1){if(qt(t.app))return Promise.reject(lr(t));const r=La(t),s=MP(r,e),o=await new $P(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const WP=600*1e3;class QP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!B_(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(yn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WP&&this.cachedEventUids.clear(),this.cachedEventUids.has(qd(e))}saveEventToCache(e){this.cachedEventUids.add(qd(e)),this.lastProcessedEventTime=Date.now()}}function qd(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function B_({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function JP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return B_(t);default:return!1}}async function XP(t,e={}){return Ms(t,"GET","/v1/projects",e)}const YP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZP=/^https?/;async function e0(t){if(t.config.emulator)return;const{authorizedDomains:e}=await XP(t);for(const n of e)try{if(t0(n))return}catch{}Ln(t,"unauthorized-domain")}function t0(t){const e=gl(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ZP.test(n))return!1;if(YP.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const n0=new zi(3e4,6e4);function Hd(){const t=vn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function r0(t){return new Promise((e,n)=>{function r(){Hd(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hd(),n(yn(t,"network-request-failed"))},timeout:n0.get()})}if(vn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(vn().gapi?.load)r();else{const s=aP("iframefcb");return vn()[s]=()=>{gapi.load?r():n(yn(t,"network-request-failed"))},iP(`${oP()}?onload=${s}`).catch(i=>n(i))}}).catch(e=>{throw Do=null,e})}let Do=null;function s0(t){return Do=Do||r0(t),Do}const i0=new zi(5e3,15e3),o0="__/auth/iframe",a0="emulator/auth/iframe",c0={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},l0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function u0(t){const e=t.config;ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Su(e,a0):`https://${t.config.authDomain}/${o0}`,r={apiKey:e.apiKey,appName:t.name,v:qr},s=l0.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Bi(r).slice(1)}`}async function h0(t){const e=await s0(t),n=vn().gapi;return ae(n,t,"internal-error"),e.open({where:document.body,url:u0(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:c0,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=yn(t,"network-request-failed"),c=vn().setTimeout(()=>{i(o)},i0.get());function l(){vn().clearTimeout(c),s(r)}r.ping(l).then(l,()=>{i(o)})}))}const f0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},d0=500,p0=600,g0="_blank",m0="http://localhost";class zd{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _0(t,e,n,r=d0,s=p0){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l={...f0,width:r.toString(),height:s.toString(),top:i,left:o},h=Tt().toLowerCase();n&&(c=E_(h)?g0:n),y_(h)&&(e=e||m0,l.scrollbars="yes");const f=Object.entries(l).reduce((m,[v,P])=>`${m}${v}=${P},`,"");if(XC(h)&&c!=="_self")return y0(e||"",c),new zd(null);const p=window.open(e||"",c,f);ae(p,t,"popup-blocked");try{p.focus()}catch{}return new zd(p)}function y0(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const v0="__/auth/handler",E0="emulator/auth/handler",T0=encodeURIComponent("fac");async function Gd(t,e,n,r,s,i){ae(t.config.authDomain,t,"auth-domain-config-required"),ae(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:qr,eventId:s};if(e instanceof P_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",iw(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Gi){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const l=await t._getAppCheckToken(),h=l?`#${T0}=${encodeURIComponent(l)}`:"";return`${I0(t)}?${Bi(c).slice(1)}${h}`}function I0({config:t}){return t.emulator?Su(t,E0):`https://${t.authDomain}/${v0}`}const Sc="webStorageSupport";class w0{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=V_,this._completeRedirectFn=KP,this._overrideRedirectResult=HP}async _openPopup(e,n,r,s){Un(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Gd(e,n,r,gl(),s);return _0(e,i,ku())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Gd(e,n,r,gl(),s);return RP(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Un(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await h0(e),r=new QP(e);return n.register("authEvent",s=>(ae(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Sc,{type:Sc},s=>{const i=s?.[0]?.[Sc];i!==void 0&&n(!!i),Ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=e0(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return b_()||v_()||Pu()}}const A0=w0;var Kd="@firebase/auth",Wd="1.11.1";class b0{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function R0(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function S0(t){Ur(new hr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;ae(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:R_(t)},h=new rP(r,s,i,l);return lP(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ur(new hr("auth-internal",e=>{const n=La(e.getProvider("auth").getImmediate());return(r=>new b0(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pn(Kd,Wd,R0(t)),pn(Kd,Wd,"esm2020")}const C0=300,P0=Eg("authIdTokenMaxAge")||C0;let Qd=null;const N0=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>P0)return;const s=n?.token;Qd!==s&&(Qd=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function k0(t=Hl()){const e=wa(t,"auth");if(e.isInitialized())return e.getImmediate();const n=cP(t,{popupRedirectResolver:A0,persistence:[xP,wP,V_]}),r=Eg("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=N0(i.toString());EP(n,o,()=>o(n.currentUser)),vP(n,c=>o(c))}}const s=_g("auth");return s&&uP(n,`http://${s}`),n}function O0(){return document.getElementsByTagName("head")?.[0]??document}sP({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=yn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",O0().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});S0("Browser");const D0={class:"upload-section"},V0=["disabled"],x0=["onClick"],M0={style:{"margin-top":"20px",padding:"10px",border:"1px solid #ccc"}},L0={__name:"UploadView",setup(t){const n=Ag({apiKey:"AIzaSyD7AcUHtapuh3XiKaQ1vVGt8x-EGsB17ZA",authDomain:"technical-test-dyd-f45b1.firebaseapp.com",projectId:"technical-test-dyd-f45b1",storageBucket:"technical-test-dyd-f45b1.firebasestorage.app",messagingSenderId:"327601425004",appId:"1:327601425004:web:052de04b7e86534f0be649"}),r=Pb(n),s=gC(n),i=k0(n),o=rt(null),c=rt([]),l=rt("Esperando accin...");let h=rt(!1);Np(()=>{gP(i).then(()=>{console.log("Autenticacin annima lista"),h.value=!0}).catch(P=>{console.error("Error auth:",P),l.value="ERROR de autenticacin: "+P.message});const v=CC(pC(s,"zip-files"),PC("createdAt","desc"));OC(v,P=>{c.value=P.docs.map(k=>({id:k.id,...k.data()}))})});function f(v){o.value=v.target.files[0],l.value="Archivo seleccionado: "+o.value.name}async function p(){if(!o.value){l.value="No hay archivo seleccionado.";return}if(!h.value){l.value="Esperando autenticacin...";return}try{l.value="Subiendo ZIP a Firebase Storage...";const v=`zips/${Date.now()}-${o.value.name}`,P=Cb(r,v);await Rb(P,o.value),l.value="ZIP subido correctamente. Obteniendo URL...";const k=await Sb(P);l.value="Enviando ZIP al backend para descomprimir...";const O=await fetch("http://localhost:5000/process-zip",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:k})}),j=await O.json();O.ok?l.value=`ZIP procesado. Archivos descomprimidos: ${j.files}`:l.value="Error backend: "+(j.error||O.status),o.value=null}catch(v){console.error(v),l.value="ERROR: "+v.message}}async function m(v){const P=prompt("Ingresa la clave para descargar:");if(!P)return;const k=`http://localhost:5000/download?path=${encodeURIComponent(v)}&key=${encodeURIComponent(P)}`;window.open(k,"_blank")}return(v,P)=>(ke(),De("section",D0,[P[1]||(P[1]=K("h1",null,"Subir archivo ZIP",-1)),K("input",{type:"file",onChange:f,accept:".zip"},null,32),K("button",{onClick:p,disabled:!o.value},"Subir ZIP",8,V0),P[2]||(P[2]=K("h2",null,"Archivos descomprimidos",-1)),K("ul",null,[(ke(!0),De(St,null,ss(c.value,k=>(ke(),De("li",{key:k.id},[Dt(Ze(k.name)+" ",1),K("button",{onClick:O=>m(k.fullPath)},"Descargar",8,x0)]))),128))]),K("div",M0,[P[0]||(P[0]=K("strong",null,"Estado:",-1)),K("p",null,Ze(l.value),1)])]))}},U0=Ns(L0,[["__scopeId","data-v-4276bf93"]]),F0={},B0={class:"about"};function j0(t,e){return ke(),De("section",B0,[...e[0]||(e[0]=[Qv('<div class="card header-card" data-v-8d83a5ec><h1 data-v-8d83a5ec>Acerca del Proyecto</h1><p data-v-8d83a5ec> Este proyecto es una prueba tcnica desarrollada en <strong data-v-8d83a5ec>Vue 3</strong> con <strong data-v-8d83a5ec>Vite</strong>, integrada con <strong data-v-8d83a5ec>Firebase Hosting, Storage y Firestore</strong>. Se construy para la empresa <strong data-v-8d83a5ec>D&amp;D  Dinmica y Desarrollo</strong>, demostrando un flujo completo de frontend + backend. </p></div><div class="grid" data-v-8d83a5ec><div class="card" data-v-8d83a5ec><h2 data-v-8d83a5ec>Tecnologas utilizadas</h2><ul data-v-8d83a5ec><li data-v-8d83a5ec>Vue 3 + Composition API</li><li data-v-8d83a5ec>Vite</li><li data-v-8d83a5ec>Vue Router</li><li data-v-8d83a5ec>Firebase Hosting</li><li data-v-8d83a5ec>Firebase Storage</li><li data-v-8d83a5ec>Firestore Database</li><li data-v-8d83a5ec>Emuladores Firebase</li></ul></div><div class="card" data-v-8d83a5ec><h2 data-v-8d83a5ec>Objetivos del proyecto</h2><ol data-v-8d83a5ec><li data-v-8d83a5ec><strong data-v-8d83a5ec>Demostracin de Vue 3:</strong> Interfaz con tarjetas dinmicas usando Composition API. </li><li data-v-8d83a5ec><strong data-v-8d83a5ec>Gestin de archivos ZIP:</strong> Subida, descompresin, registro en Firestore y descarga segura. </li></ol></div></div><a class="github" href="https://github.com/mpaulina24/technical-test-DyD" target="_blank" rel="noopener noreferrer" data-v-8d83a5ec>  Ver repositorio en GitHub </a>',3)])])}const $0=Ns(F0,[["render",j0],["__scopeId","data-v-8d83a5ec"]]),q0=[{path:"/",redirect:"/home"},{path:"/home",component:rI},{path:"/upload",component:U0},{path:"/bondades",component:xI},{path:"/about",component:$0}],H0=BT({history:yT(),routes:q0}),j_=kE(YT);j_.use(H0);j_.mount("#app");
